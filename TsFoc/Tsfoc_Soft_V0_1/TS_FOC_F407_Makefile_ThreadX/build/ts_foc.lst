ARM GAS  /tmp/ccPOftzH.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"ts_foc.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "./app/algorithm/src/ts_foc.c"
  20              		.global	__aeabi_f2d
  21              		.global	__aeabi_d2f
  22              		.section	.text._normalizeRadian,"ax",%progbits
  23              		.align	1
  24              		.global	_normalizeRadian
  25              		.syntax unified
  26              		.thumb
  27              		.thumb_func
  29              	_normalizeRadian:
  30              	.LVL0:
  31              	.LFB250:
   1:./app/algorithm/src/ts_foc.c **** #include "ts_foc.h"
   2:./app/algorithm/src/ts_foc.c **** 
   3:./app/algorithm/src/ts_foc.c **** // å½’ä¸€åŒ–è§’åº¦åˆ° [0,2PI]
   4:./app/algorithm/src/ts_foc.c **** float _normalizeRadian(float angle)
   5:./app/algorithm/src/ts_foc.c **** {
  32              		.loc 1 5 1 view -0
  33              		.cfi_startproc
  34              		@ args = 0, pretend = 0, frame = 0
  35              		@ frame_needed = 0, uses_anonymous_args = 0
  36              		.loc 1 5 1 is_stmt 0 view .LVU1
  37 0000 08B5     		push	{r3, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 8
  40              		.cfi_offset 3, -8
  41              		.cfi_offset 14, -4
  42 0002 10EE100A 		vmov	r0, s0
   6:./app/algorithm/src/ts_foc.c ****   float a = fmod(angle, 2*PI);   //å–ä½™è¿ç®—å¯ä»¥ç”¨äºŽå½’ä¸€åŒ–ï¼Œåˆ—å‡ºç‰¹æ®Šå€¼ä¾‹å­ç®—ä¾¿ç
  43              		.loc 1 6 3 is_stmt 1 view .LVU2
  44              		.loc 1 6 13 is_stmt 0 view .LVU3
  45 0006 FFF7FEFF 		bl	__aeabi_f2d
  46              	.LVL1:
  47              		.loc 1 6 13 view .LVU4
  48 000a 9FED0B1B 		vldr.64	d1, .L5
  49 000e 41EC100B 		vmov	d0, r0, r1
  50 0012 FFF7FEFF 		bl	fmod
  51              	.LVL2:
  52 0016 51EC100B 		vmov	r0, r1, d0
ARM GAS  /tmp/ccPOftzH.s 			page 2


  53              		.loc 1 6 9 discriminator 1 view .LVU5
  54 001a FFF7FEFF 		bl	__aeabi_d2f
  55              	.LVL3:
  56 001e 00EE100A 		vmov	s0, r0
  57              	.LVL4:
   7:./app/algorithm/src/ts_foc.c ****   return a >= 0 ? a : (a + 2*PI);  
  58              		.loc 1 7 3 is_stmt 1 view .LVU6
  59              		.loc 1 7 21 is_stmt 0 view .LVU7
  60 0022 B5EEC00A 		vcmpe.f32	s0, #0
  61 0026 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  62 002a 00DB     		blt	.L4
  63              	.L1:
   8:./app/algorithm/src/ts_foc.c ****   //ä¸‰ç›®è¿ç®—ç¬¦ã€‚æ ¼å¼ï¼šcondition ? expr1 : expr2 
   9:./app/algorithm/src/ts_foc.c ****   //å…¶ä¸­ï¼Œcondition æ˜¯è¦æ±‚å€¼çš„æ¡ä»¶è¡¨è¾¾å¼ï¼Œå¦‚æžœæ¡ä»¶æˆç«‹ï¼Œåˆ™è¿”å›ž expr1 çš„å€¼
  10:./app/algorithm/src/ts_foc.c ****   //fmod å‡½æ•°çš„ä½™æ•°çš„ç¬¦å·ä¸Žé™¤æ•°ç›¸åŒã€‚å› æ­¤ï¼Œå½“ angle çš„å€¼ä¸ºè´Ÿæ•°æ—¶ï¼Œä½™æ•°çš
  11:./app/algorithm/src/ts_foc.c ****   //ä¾‹å¦‚ï¼Œå½“ angle çš„å€¼ä¸º -PI/2ï¼Œ_2PI çš„å€¼ä¸º 2PI æ—¶ï¼Œfmod(angle, _2PI) å°†è¿”å›žä¸€ä¸ª
  12:./app/algorithm/src/ts_foc.c **** }
  64              		.loc 1 12 1 view .LVU8
  65 002c 08BD     		pop	{r3, pc}
  66              	.L4:
   7:./app/algorithm/src/ts_foc.c ****   return a >= 0 ? a : (a + 2*PI);  
  67              		.loc 1 7 21 discriminator 2 view .LVU9
  68 002e DFED047A 		vldr.32	s15, .L5+8
  69 0032 30EE270A 		vadd.f32	s0, s0, s15
   7:./app/algorithm/src/ts_foc.c ****   return a >= 0 ? a : (a + 2*PI);  
  70              		.loc 1 7 21 view .LVU10
  71 0036 F9E7     		b	.L1
  72              	.L6:
  73              		.align	3
  74              	.L5:
  75 0038 00000060 		.word	1610612736
  76 003c FB211940 		.word	1075388923
  77 0040 DB0FC940 		.word	1086918619
  78              		.cfi_endproc
  79              	.LFE250:
  81              		.section	.text._normalizeAngle,"ax",%progbits
  82              		.align	1
  83              		.global	_normalizeAngle
  84              		.syntax unified
  85              		.thumb
  86              		.thumb_func
  88              	_normalizeAngle:
  89              	.LVL5:
  90              	.LFB251:
  13:./app/algorithm/src/ts_foc.c **** 
  14:./app/algorithm/src/ts_foc.c **** // å½’ä¸€åŒ–è§’åº¦åˆ° [0, 360] åº¦
  15:./app/algorithm/src/ts_foc.c **** float _normalizeAngle(float angle) {
  91              		.loc 1 15 36 is_stmt 1 view -0
  92              		.cfi_startproc
  93              		@ args = 0, pretend = 0, frame = 0
  94              		@ frame_needed = 0, uses_anonymous_args = 0
  95              		.loc 1 15 36 is_stmt 0 view .LVU12
  96 0000 08B5     		push	{r3, lr}
  97              	.LCFI1:
  98              		.cfi_def_cfa_offset 8
  99              		.cfi_offset 3, -8
 100              		.cfi_offset 14, -4
ARM GAS  /tmp/ccPOftzH.s 			page 3


 101 0002 10EE100A 		vmov	r0, s0
  16:./app/algorithm/src/ts_foc.c ****     float a = fmod(angle, 360.0);   // å–ä½™è¿ç®—å¯ä»¥ç”¨äºŽå½’ä¸€åŒ–
 102              		.loc 1 16 5 is_stmt 1 view .LVU13
 103              		.loc 1 16 15 is_stmt 0 view .LVU14
 104 0006 FFF7FEFF 		bl	__aeabi_f2d
 105              	.LVL6:
 106              		.loc 1 16 15 view .LVU15
 107 000a 9FED0B1B 		vldr.64	d1, .L11
 108 000e 41EC100B 		vmov	d0, r0, r1
 109 0012 FFF7FEFF 		bl	fmod
 110              	.LVL7:
 111 0016 51EC100B 		vmov	r0, r1, d0
 112              		.loc 1 16 11 discriminator 1 view .LVU16
 113 001a FFF7FEFF 		bl	__aeabi_d2f
 114              	.LVL8:
 115 001e 00EE100A 		vmov	s0, r0
 116              	.LVL9:
  17:./app/algorithm/src/ts_foc.c ****     return a >= 0 ? a : (a + 360.0);  
 117              		.loc 1 17 5 is_stmt 1 view .LVU17
 118              		.loc 1 17 23 is_stmt 0 view .LVU18
 119 0022 B5EEC00A 		vcmpe.f32	s0, #0
 120 0026 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 121 002a 00DB     		blt	.L10
 122              	.L7:
  18:./app/algorithm/src/ts_foc.c **** }
 123              		.loc 1 18 1 view .LVU19
 124 002c 08BD     		pop	{r3, pc}
 125              	.L10:
  17:./app/algorithm/src/ts_foc.c ****     return a >= 0 ? a : (a + 360.0);  
 126              		.loc 1 17 23 discriminator 2 view .LVU20
 127 002e DFED047A 		vldr.32	s15, .L11+8
 128 0032 30EE270A 		vadd.f32	s0, s0, s15
  17:./app/algorithm/src/ts_foc.c ****     return a >= 0 ? a : (a + 360.0);  
 129              		.loc 1 17 23 view .LVU21
 130 0036 F9E7     		b	.L7
 131              	.L12:
 132              		.align	3
 133              	.L11:
 134 0038 00000000 		.word	0
 135 003c 00807640 		.word	1081507840
 136 0040 0000B443 		.word	1135869952
 137              		.cfi_endproc
 138              	.LFE251:
 140              		.section	.text.Get_filter_Velocity,"ax",%progbits
 141              		.align	1
 142              		.global	Get_filter_Velocity
 143              		.syntax unified
 144              		.thumb
 145              		.thumb_func
 147              	Get_filter_Velocity:
 148              	.LVL10:
 149              	.LFB253:
  19:./app/algorithm/src/ts_foc.c **** 
  20:./app/algorithm/src/ts_foc.c **** 
  21:./app/algorithm/src/ts_foc.c **** /// @brief è®¡ç®—ç”µæœº0ç”µè§’åº¦
  22:./app/algorithm/src/ts_foc.c **** /// @param motor 
  23:./app/algorithm/src/ts_foc.c **** int aligns_Motor_Zero_Angle(Motor* motor)
ARM GAS  /tmp/ccPOftzH.s 			page 4


  24:./app/algorithm/src/ts_foc.c **** {
  25:./app/algorithm/src/ts_foc.c ****   setTorque(motor,3, _3PI_2);
  26:./app/algorithm/src/ts_foc.c ****   tx_thread_sleep(2000);  //åœ¨ThreadXä¸­ä¸èƒ½ä½¿ç”¨hal_Delay()
  27:./app/algorithm/src/ts_foc.c ****   Read_AS5600_Angle(motor->As5600_Sensor);
  28:./app/algorithm/src/ts_foc.c ****   motor->zero_electric_angle = _electricalAngle(motor);
  29:./app/algorithm/src/ts_foc.c ****   setTorque(motor,0, _3PI_2);
  30:./app/algorithm/src/ts_foc.c ****   printf("%då·ç”µæœºé›¶ç”µè§’åº¦:%.2f\r\n",motor->Motor_ID,motor->zero_electric_angle);
  31:./app/algorithm/src/ts_foc.c ****   return 0;
  32:./app/algorithm/src/ts_foc.c **** }
  33:./app/algorithm/src/ts_foc.c **** 
  34:./app/algorithm/src/ts_foc.c **** /// @brief èŽ·å–ç”µæœºé€Ÿåº¦(å¸¦æœ‰æ»¤æ³¢)
  35:./app/algorithm/src/ts_foc.c **** /// @param motor 
  36:./app/algorithm/src/ts_foc.c **** /// @return 
  37:./app/algorithm/src/ts_foc.c **** float Get_filter_Velocity(Motor* motor)
  38:./app/algorithm/src/ts_foc.c **** {
 150              		.loc 1 38 1 is_stmt 1 view -0
 151              		.cfi_startproc
 152              		@ args = 0, pretend = 0, frame = 0
 153              		@ frame_needed = 0, uses_anonymous_args = 0
 154              		.loc 1 38 1 is_stmt 0 view .LVU23
 155 0000 10B5     		push	{r4, lr}
 156              	.LCFI2:
 157              		.cfi_def_cfa_offset 8
 158              		.cfi_offset 4, -8
 159              		.cfi_offset 14, -4
 160 0002 0446     		mov	r4, r0
  39:./app/algorithm/src/ts_foc.c ****   //èŽ·å–é€Ÿåº¦æ•°æ®å¹¶æ»¤æ³¢
  40:./app/algorithm/src/ts_foc.c ****   float vel_M0_ori=Get_AS5600_Velocity(motor->As5600_Sensor);
 161              		.loc 1 40 3 is_stmt 1 view .LVU24
 162              		.loc 1 40 20 is_stmt 0 view .LVU25
 163 0004 806A     		ldr	r0, [r0, #40]
 164              	.LVL11:
 165              		.loc 1 40 20 view .LVU26
 166 0006 FFF7FEFF 		bl	Get_AS5600_Velocity
 167              	.LVL12:
  41:./app/algorithm/src/ts_foc.c ****   float vel_M0_flit=Lowpass_Filter_calc(motor->Lowpass_Filter_Vel,motor->DIR*vel_M0_ori);
 168              		.loc 1 41 3 is_stmt 1 view .LVU27
 169              		.loc 1 41 21 is_stmt 0 view .LVU28
 170 000a D4ED027A 		vldr.32	s15, [r4, #8]	@ int
 171 000e F8EEE77A 		vcvt.f32.s32	s15, s15
 172 0012 27EE800A 		vmul.f32	s0, s15, s0
 173              	.LVL13:
 174              		.loc 1 41 21 view .LVU29
 175 0016 A06B     		ldr	r0, [r4, #56]
 176 0018 FFF7FEFF 		bl	Lowpass_Filter_calc
 177              	.LVL14:
  42:./app/algorithm/src/ts_foc.c ****   // motor->As5600_Sensor->Velocity = vel_M0_flit;
  43:./app/algorithm/src/ts_foc.c ****   return vel_M0_flit;   //è€ƒè™‘æ–¹å‘
 178              		.loc 1 43 3 is_stmt 1 view .LVU30
  44:./app/algorithm/src/ts_foc.c **** }
 179              		.loc 1 44 1 is_stmt 0 view .LVU31
 180 001c 10BD     		pop	{r4, pc}
 181              		.loc 1 44 1 view .LVU32
 182              		.cfi_endproc
 183              	.LFE253:
 185              		.section	.text.cal_Iq_Id,"ax",%progbits
 186              		.align	1
ARM GAS  /tmp/ccPOftzH.s 			page 5


 187              		.global	cal_Iq_Id
 188              		.syntax unified
 189              		.thumb
 190              		.thumb_func
 192              	cal_Iq_Id:
 193              	.LVL15:
 194              	.LFB254:
  45:./app/algorithm/src/ts_foc.c **** 
  46:./app/algorithm/src/ts_foc.c **** /// @brief é€šè¿‡Ia,Ib,Icè®¡ç®—Iq,Id(ç›®å‰ä»…è¾“å‡ºIq)
  47:./app/algorithm/src/ts_foc.c **** /// @param Sensor 
  48:./app/algorithm/src/ts_foc.c **** /// @param angle_el 
  49:./app/algorithm/src/ts_foc.c **** /// @return 
  50:./app/algorithm/src/ts_foc.c **** float cal_Iq_Id(Inlinecurrent_Typedef *Sensor, float angle_el)
  51:./app/algorithm/src/ts_foc.c **** {
 195              		.loc 1 51 1 is_stmt 1 view -0
 196              		.cfi_startproc
 197              		@ args = 0, pretend = 0, frame = 0
 198              		@ frame_needed = 0, uses_anonymous_args = 0
 199              		.loc 1 51 1 is_stmt 0 view .LVU34
 200 0000 08B5     		push	{r3, lr}
 201              	.LCFI3:
 202              		.cfi_def_cfa_offset 8
 203              		.cfi_offset 3, -8
 204              		.cfi_offset 14, -4
 205 0002 2DED068B 		vpush.64	{d8, d9, d10}
 206              	.LCFI4:
 207              		.cfi_def_cfa_offset 32
 208              		.cfi_offset 80, -32
 209              		.cfi_offset 81, -28
 210              		.cfi_offset 82, -24
 211              		.cfi_offset 83, -20
 212              		.cfi_offset 84, -16
 213              		.cfi_offset 85, -12
 214 0006 0346     		mov	r3, r0
 215 0008 10EE100A 		vmov	r0, s0
 216              	.LVL16:
  52:./app/algorithm/src/ts_foc.c ****   float I_alpha = Sensor->I_a;
 217              		.loc 1 52 3 is_stmt 1 view .LVU35
 218              		.loc 1 52 9 is_stmt 0 view .LVU36
 219 000c D3ED028A 		vldr.32	s17, [r3, #8]
 220              	.LVL17:
  53:./app/algorithm/src/ts_foc.c ****   float I_beta = _1_SQRT3 * Sensor->I_a + _2_SQRT3 * Sensor->I_b;
 221              		.loc 1 53 3 is_stmt 1 view .LVU37
 222              		.loc 1 53 35 is_stmt 0 view .LVU38
 223 0010 93ED028A 		vldr.32	s16, [r3, #8]
 224              		.loc 1 53 27 view .LVU39
 225 0014 DFED187A 		vldr.32	s15, .L17
 226 0018 28EE278A 		vmul.f32	s16, s16, s15
 227              		.loc 1 53 60 view .LVU40
 228 001c D3ED037A 		vldr.32	s15, [r3, #12]
 229              		.loc 1 53 52 view .LVU41
 230 0020 9FED167A 		vldr.32	s14, .L17+4
 231 0024 67EE877A 		vmul.f32	s15, s15, s14
 232              		.loc 1 53 9 view .LVU42
 233 0028 38EE278A 		vadd.f32	s16, s16, s15
 234              	.LVL18:
  54:./app/algorithm/src/ts_foc.c **** 
ARM GAS  /tmp/ccPOftzH.s 			page 6


  55:./app/algorithm/src/ts_foc.c ****   float ct = cos(angle_el);
 235              		.loc 1 55 3 is_stmt 1 view .LVU43
 236              		.loc 1 55 14 is_stmt 0 view .LVU44
 237 002c FFF7FEFF 		bl	__aeabi_f2d
 238              	.LVL19:
 239              		.loc 1 55 14 view .LVU45
 240 0030 41EC190B 		vmov	d9, r0, r1
 241 0034 B0EE490A 		vmov.f32	s0, s18
 242 0038 F0EE690A 		vmov.f32	s1, s19
 243 003c FFF7FEFF 		bl	cos
 244              	.LVL20:
 245 0040 51EC100B 		vmov	r0, r1, d0
 246              		.loc 1 55 9 discriminator 1 view .LVU46
 247 0044 FFF7FEFF 		bl	__aeabi_d2f
 248              	.LVL21:
 249 0048 0AEE100A 		vmov	s20, r0
 250              	.LVL22:
  56:./app/algorithm/src/ts_foc.c ****   float st = sin(angle_el);
 251              		.loc 1 56 3 is_stmt 1 view .LVU47
 252              		.loc 1 56 14 is_stmt 0 view .LVU48
 253 004c B0EE490A 		vmov.f32	s0, s18
 254 0050 F0EE690A 		vmov.f32	s1, s19
 255 0054 FFF7FEFF 		bl	sin
 256              	.LVL23:
 257              		.loc 1 56 14 view .LVU49
 258 0058 51EC100B 		vmov	r0, r1, d0
 259              		.loc 1 56 9 discriminator 1 view .LVU50
 260 005c FFF7FEFF 		bl	__aeabi_d2f
 261              	.LVL24:
 262 0060 07EE900A 		vmov	s15, r0
 263              	.LVL25:
  57:./app/algorithm/src/ts_foc.c ****   float I_q = I_beta * ct - I_alpha * st;
 264              		.loc 1 57 3 is_stmt 1 view .LVU51
 265              		.loc 1 57 22 is_stmt 0 view .LVU52
 266 0064 28EE0A8A 		vmul.f32	s16, s16, s20
 267              	.LVL26:
 268              		.loc 1 57 37 view .LVU53
 269 0068 28EEA70A 		vmul.f32	s0, s17, s15
 270              	.LVL27:
  58:./app/algorithm/src/ts_foc.c **** 	
  59:./app/algorithm/src/ts_foc.c ****   return I_q;
 271              		.loc 1 59 3 is_stmt 1 view .LVU54
  60:./app/algorithm/src/ts_foc.c **** }
 272              		.loc 1 60 1 is_stmt 0 view .LVU55
 273 006c 38EE400A 		vsub.f32	s0, s16, s0
 274              	.LVL28:
 275              		.loc 1 60 1 view .LVU56
 276 0070 BDEC068B 		vldm	sp!, {d8-d10}
 277              	.LCFI5:
 278              		.cfi_restore 84
 279              		.cfi_restore 85
 280              		.cfi_restore 82
 281              		.cfi_restore 83
 282              		.cfi_restore 80
 283              		.cfi_restore 81
 284              		.cfi_def_cfa_offset 8
 285              	.LVL29:
ARM GAS  /tmp/ccPOftzH.s 			page 7


 286              		.loc 1 60 1 view .LVU57
 287 0074 08BD     		pop	{r3, pc}
 288              	.L18:
 289 0076 00BF     		.align	2
 290              	.L17:
 291 0078 3ACD133F 		.word	1058262330
 292 007c 3ACD933F 		.word	1066650938
 293              		.cfi_endproc
 294              	.LFE254:
 296              		.section	.text._electricalAngle,"ax",%progbits
 297              		.align	1
 298              		.global	_electricalAngle
 299              		.syntax unified
 300              		.thumb
 301              		.thumb_func
 303              	_electricalAngle:
 304              	.LVL30:
 305              	.LFB263:
  61:./app/algorithm/src/ts_foc.c **** 
  62:./app/algorithm/src/ts_foc.c **** /// @brief èŽ·å–ç”µæœºæ€»ç”µæµ(å¸¦æ»¤æ³¢)
  63:./app/algorithm/src/ts_foc.c **** /// @param motor 
  64:./app/algorithm/src/ts_foc.c **** /// @return 
  65:./app/algorithm/src/ts_foc.c **** float Get_Current(Motor* motor)
  66:./app/algorithm/src/ts_foc.c **** {
  67:./app/algorithm/src/ts_foc.c ****   float I_q_M0_ori=cal_Iq_Id(motor->Inlinecurrent,_electricalAngle(motor));
  68:./app/algorithm/src/ts_foc.c ****   float I_q_M0_flit=Lowpass_Filter_calc(motor->Lowpass_Filter_Curr, I_q_M0_ori);
  69:./app/algorithm/src/ts_foc.c ****   motor->Inlinecurrent->I_Q = I_q_M0_flit;
  70:./app/algorithm/src/ts_foc.c ****   return I_q_M0_flit;
  71:./app/algorithm/src/ts_foc.c **** }
  72:./app/algorithm/src/ts_foc.c **** 
  73:./app/algorithm/src/ts_foc.c **** 
  74:./app/algorithm/src/ts_foc.c **** /// @brief è§’åº¦,é€Ÿåº¦çŽ¯(ç”µåŽ‹)
  75:./app/algorithm/src/ts_foc.c **** /// @param motor 
  76:./app/algorithm/src/ts_foc.c **** /// @param target 
  77:./app/algorithm/src/ts_foc.c **** void Set_Velocity_Angle(Motor* motor, float target)
  78:./app/algorithm/src/ts_foc.c **** {
  79:./app/algorithm/src/ts_foc.c ****  setTorque(motor,Pid_clac(motor->Pid_Vel,Pid_clac(motor->Pid_Ang,(target-Get_AS5600_Angle(motor->As
  80:./app/algorithm/src/ts_foc.c **** }
  81:./app/algorithm/src/ts_foc.c **** 
  82:./app/algorithm/src/ts_foc.c **** /// @brief é€Ÿåº¦çŽ¯(ç”µåŽ‹)
  83:./app/algorithm/src/ts_foc.c **** /// @param motor 
  84:./app/algorithm/src/ts_foc.c **** /// @param target 
  85:./app/algorithm/src/ts_foc.c **** void Set_Velocity(Motor* motor, float target)
  86:./app/algorithm/src/ts_foc.c **** {
  87:./app/algorithm/src/ts_foc.c ****   setTorque(motor,Pid_clac(motor->Pid_Vel,(target-Get_filter_Velocity(motor))*180/PI),_electricalAn
  88:./app/algorithm/src/ts_foc.c **** }
  89:./app/algorithm/src/ts_foc.c **** 
  90:./app/algorithm/src/ts_foc.c **** /// @brief åŠ›ä½(ç”µåŽ‹)
  91:./app/algorithm/src/ts_foc.c **** /// @param motor 
  92:./app/algorithm/src/ts_foc.c **** /// @param target 
  93:./app/algorithm/src/ts_foc.c **** void Set_Force_Angle(Motor* motor, float target)
  94:./app/algorithm/src/ts_foc.c **** {
  95:./app/algorithm/src/ts_foc.c ****   setTorque(motor,Pid_clac(motor->Pid_Ang,(target-Get_AS5600_Angle(motor->As5600_Sensor))*180/PI),_
  96:./app/algorithm/src/ts_foc.c **** }
  97:./app/algorithm/src/ts_foc.c **** 
  98:./app/algorithm/src/ts_foc.c **** /// @brief åŠ›çŸ©(ç”µæµ)
  99:./app/algorithm/src/ts_foc.c **** /// @param motor 
ARM GAS  /tmp/ccPOftzH.s 			page 8


 100:./app/algorithm/src/ts_foc.c **** /// @param Target 
 101:./app/algorithm/src/ts_foc.c **** void setTorque_Curr(Motor* motor, float Target)
 102:./app/algorithm/src/ts_foc.c **** {
 103:./app/algorithm/src/ts_foc.c ****   setTorque(motor,Pid_clac(motor->Pid_Curr,Target-Get_Current(motor)),_electricalAngle(motor));
 104:./app/algorithm/src/ts_foc.c **** }
 105:./app/algorithm/src/ts_foc.c **** 
 106:./app/algorithm/src/ts_foc.c **** /// @brief åŠ›ä½é—­çŽ¯(ç”µæµ)
 107:./app/algorithm/src/ts_foc.c **** /// @param motor 
 108:./app/algorithm/src/ts_foc.c **** /// @param Target 
 109:./app/algorithm/src/ts_foc.c **** void set_Force_Angle_Curr(Motor* motor, float Target)      //åŠ›ä½é—­çŽ¯
 110:./app/algorithm/src/ts_foc.c **** {
 111:./app/algorithm/src/ts_foc.c ****   setTorque_Curr(motor,Pid_clac(motor->Pid_Ang, (Target-Get_AS5600_Angle(motor->As5600_Sensor))*180
 112:./app/algorithm/src/ts_foc.c **** }
 113:./app/algorithm/src/ts_foc.c **** 
 114:./app/algorithm/src/ts_foc.c **** /// @brief é€Ÿåº¦é—­çŽ¯(ç”µæµ)
 115:./app/algorithm/src/ts_foc.c **** /// @param motor 
 116:./app/algorithm/src/ts_foc.c **** /// @param Target 
 117:./app/algorithm/src/ts_foc.c **** void set_Velocity_Curr(Motor* motor, float Target)          //é€Ÿåº¦é—­çŽ¯
 118:./app/algorithm/src/ts_foc.c **** {
 119:./app/algorithm/src/ts_foc.c ****   setTorque_Curr(motor,Pid_clac(motor->Pid_Vel,(Target-Get_filter_Velocity(motor))*180/PI)); 
 120:./app/algorithm/src/ts_foc.c **** }
 121:./app/algorithm/src/ts_foc.c **** 
 122:./app/algorithm/src/ts_foc.c **** /// @brief è§’åº¦-é€Ÿåº¦-åŠ› ä½ç½®é—­çŽ¯
 123:./app/algorithm/src/ts_foc.c **** /// @param motor 
 124:./app/algorithm/src/ts_foc.c **** /// @param Target 
 125:./app/algorithm/src/ts_foc.c **** void set_Velocity_Angle_Curr(Motor* motor, float Target)   //è§’åº¦-é€Ÿåº¦-åŠ› ä½ç½®é—­çŽ¯
 126:./app/algorithm/src/ts_foc.c **** {
 127:./app/algorithm/src/ts_foc.c ****   setTorque_Curr(motor,Pid_clac(motor->Pid_Vel,Pid_clac(motor->Pid_Ang,(Target-Get_AS5600_Angle(mot
 128:./app/algorithm/src/ts_foc.c **** }
 129:./app/algorithm/src/ts_foc.c **** 
 130:./app/algorithm/src/ts_foc.c **** 
 131:./app/algorithm/src/ts_foc.c **** 
 132:./app/algorithm/src/ts_foc.c **** 
 133:./app/algorithm/src/ts_foc.c **** /// @brief èŽ·å–ç”µè§’åº¦
 134:./app/algorithm/src/ts_foc.c **** /// @return float
 135:./app/algorithm/src/ts_foc.c **** float _electricalAngle(Motor* motor)
 136:./app/algorithm/src/ts_foc.c **** {
 306              		.loc 1 136 1 is_stmt 1 view -0
 307              		.cfi_startproc
 308              		@ args = 0, pretend = 0, frame = 0
 309              		@ frame_needed = 0, uses_anonymous_args = 0
 310              		.loc 1 136 1 is_stmt 0 view .LVU59
 311 0000 08B5     		push	{r3, lr}
 312              	.LCFI6:
 313              		.cfi_def_cfa_offset 8
 314              		.cfi_offset 3, -8
 315              		.cfi_offset 14, -4
 137:./app/algorithm/src/ts_foc.c ****     // return  _normalizeAngle((float)(motor->DIR *  motor->PP) * motor->As5600_Sensor->Angle-motor
 138:./app/algorithm/src/ts_foc.c ****     return  _normalizeRadian((float)(motor->DIR *  motor->PP) * motor->As5600_Sensor->Angle-motor->
 316              		.loc 1 138 5 is_stmt 1 view .LVU60
 317              		.loc 1 138 43 is_stmt 0 view .LVU61
 318 0002 8368     		ldr	r3, [r0, #8]
 319              		.loc 1 138 57 view .LVU62
 320 0004 4268     		ldr	r2, [r0, #4]
 321              		.loc 1 138 49 view .LVU63
 322 0006 02FB03F3 		mul	r3, r2, r3
 323 000a 07EE903A 		vmov	s15, r3	@ int
ARM GAS  /tmp/ccPOftzH.s 			page 9


 324              		.loc 1 138 30 view .LVU64
 325 000e F8EEE77A 		vcvt.f32.s32	s15, s15
 326              		.loc 1 138 70 view .LVU65
 327 0012 836A     		ldr	r3, [r0, #40]
 328              		.loc 1 138 85 view .LVU66
 329 0014 93ED037A 		vldr.32	s14, [r3, #12]
 330              		.loc 1 138 63 view .LVU67
 331 0018 67EE877A 		vmul.f32	s15, s15, s14
 332              		.loc 1 138 98 view .LVU68
 333 001c 90ED040A 		vldr.32	s0, [r0, #16]
 334              		.loc 1 138 13 view .LVU69
 335 0020 37EEC00A 		vsub.f32	s0, s15, s0
 336 0024 FFF7FEFF 		bl	_normalizeRadian
 337              	.LVL31:
 139:./app/algorithm/src/ts_foc.c **** }
 338              		.loc 1 139 1 view .LVU70
 339 0028 08BD     		pop	{r3, pc}
 340              		.cfi_endproc
 341              	.LFE263:
 343              		.section	.text.Get_Current,"ax",%progbits
 344              		.align	1
 345              		.global	Get_Current
 346              		.syntax unified
 347              		.thumb
 348              		.thumb_func
 350              	Get_Current:
 351              	.LVL32:
 352              	.LFB255:
  66:./app/algorithm/src/ts_foc.c ****   float I_q_M0_ori=cal_Iq_Id(motor->Inlinecurrent,_electricalAngle(motor));
 353              		.loc 1 66 1 is_stmt 1 view -0
 354              		.cfi_startproc
 355              		@ args = 0, pretend = 0, frame = 0
 356              		@ frame_needed = 0, uses_anonymous_args = 0
  66:./app/algorithm/src/ts_foc.c ****   float I_q_M0_ori=cal_Iq_Id(motor->Inlinecurrent,_electricalAngle(motor));
 357              		.loc 1 66 1 is_stmt 0 view .LVU72
 358 0000 38B5     		push	{r3, r4, r5, lr}
 359              	.LCFI7:
 360              		.cfi_def_cfa_offset 16
 361              		.cfi_offset 3, -16
 362              		.cfi_offset 4, -12
 363              		.cfi_offset 5, -8
 364              		.cfi_offset 14, -4
 365 0002 0446     		mov	r4, r0
  67:./app/algorithm/src/ts_foc.c ****   float I_q_M0_flit=Lowpass_Filter_calc(motor->Lowpass_Filter_Curr, I_q_M0_ori);
 366              		.loc 1 67 3 is_stmt 1 view .LVU73
  67:./app/algorithm/src/ts_foc.c ****   float I_q_M0_flit=Lowpass_Filter_calc(motor->Lowpass_Filter_Curr, I_q_M0_ori);
 367              		.loc 1 67 20 is_stmt 0 view .LVU74
 368 0004 056C     		ldr	r5, [r0, #64]
 369 0006 FFF7FEFF 		bl	_electricalAngle
 370              	.LVL33:
  67:./app/algorithm/src/ts_foc.c ****   float I_q_M0_flit=Lowpass_Filter_calc(motor->Lowpass_Filter_Curr, I_q_M0_ori);
 371              		.loc 1 67 20 discriminator 1 view .LVU75
 372 000a 2846     		mov	r0, r5
 373 000c FFF7FEFF 		bl	cal_Iq_Id
 374              	.LVL34:
  68:./app/algorithm/src/ts_foc.c ****   motor->Inlinecurrent->I_Q = I_q_M0_flit;
 375              		.loc 1 68 3 is_stmt 1 view .LVU76
ARM GAS  /tmp/ccPOftzH.s 			page 10


  68:./app/algorithm/src/ts_foc.c ****   motor->Inlinecurrent->I_Q = I_q_M0_flit;
 376              		.loc 1 68 21 is_stmt 0 view .LVU77
 377 0010 E06B     		ldr	r0, [r4, #60]
 378 0012 FFF7FEFF 		bl	Lowpass_Filter_calc
 379              	.LVL35:
  69:./app/algorithm/src/ts_foc.c ****   return I_q_M0_flit;
 380              		.loc 1 69 3 is_stmt 1 view .LVU78
  69:./app/algorithm/src/ts_foc.c ****   return I_q_M0_flit;
 381              		.loc 1 69 8 is_stmt 0 view .LVU79
 382 0016 226C     		ldr	r2, [r4, #64]
  69:./app/algorithm/src/ts_foc.c ****   return I_q_M0_flit;
 383              		.loc 1 69 29 view .LVU80
 384 0018 82ED0A0A 		vstr.32	s0, [r2, #40]
  70:./app/algorithm/src/ts_foc.c **** }
 385              		.loc 1 70 3 is_stmt 1 view .LVU81
  71:./app/algorithm/src/ts_foc.c **** 
 386              		.loc 1 71 1 is_stmt 0 view .LVU82
 387 001c 38BD     		pop	{r3, r4, r5, pc}
  71:./app/algorithm/src/ts_foc.c **** 
 388              		.loc 1 71 1 view .LVU83
 389              		.cfi_endproc
 390              	.LFE255:
 392              		.section	.text.setPwm,"ax",%progbits
 393              		.align	1
 394              		.global	setPwm
 395              		.syntax unified
 396              		.thumb
 397              		.thumb_func
 399              	setPwm:
 400              	.LVL36:
 401              	.LFB264:
 140:./app/algorithm/src/ts_foc.c **** 
 141:./app/algorithm/src/ts_foc.c **** 
 142:./app/algorithm/src/ts_foc.c **** /// @brief è®¾ç½®PWMåˆ°æŽ§åˆ¶å™¨è¾“å‡º
 143:./app/algorithm/src/ts_foc.c **** /// @param motor ç”µæœºå¯¹è±¡
 144:./app/algorithm/src/ts_foc.c **** /// @param Ua 
 145:./app/algorithm/src/ts_foc.c **** /// @param Ub 
 146:./app/algorithm/src/ts_foc.c **** /// @param Uc 
 147:./app/algorithm/src/ts_foc.c **** void setPwm(Motor* motor, float Ua, float Ub, float Uc) 
 148:./app/algorithm/src/ts_foc.c **** {
 402              		.loc 1 148 1 is_stmt 1 view -0
 403              		.cfi_startproc
 404              		@ args = 0, pretend = 0, frame = 0
 405              		@ frame_needed = 0, uses_anonymous_args = 0
 406              		.loc 1 148 1 is_stmt 0 view .LVU85
 407 0000 10B5     		push	{r4, lr}
 408              	.LCFI8:
 409              		.cfi_def_cfa_offset 8
 410              		.cfi_offset 4, -8
 411              		.cfi_offset 14, -4
 412 0002 2DED048B 		vpush.64	{d8, d9}
 413              	.LCFI9:
 414              		.cfi_def_cfa_offset 24
 415              		.cfi_offset 80, -24
 416              		.cfi_offset 81, -20
 417              		.cfi_offset 82, -16
 418              		.cfi_offset 83, -12
ARM GAS  /tmp/ccPOftzH.s 			page 11


 419 0006 0446     		mov	r4, r0
 149:./app/algorithm/src/ts_foc.c ****   // é™åˆ¶ä¸Šé™
 150:./app/algorithm/src/ts_foc.c ****   Ua = _constrain(Ua, 0.0f, motor->voltage_power_supply);
 420              		.loc 1 150 3 is_stmt 1 view .LVU86
 421              		.loc 1 150 8 is_stmt 0 view .LVU87
 422 0008 B5EEC00A 		vcmpe.f32	s0, #0
 423 000c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 424 0010 09D4     		bmi	.L33
 425              		.loc 1 150 8 discriminator 2 view .LVU88
 426 0012 D0ED035A 		vldr.32	s11, [r0, #12]
 427 0016 F4EEC05A 		vcmpe.f32	s11, s0
 428 001a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 429 001e 04D4     		bmi	.L24
 430              		.loc 1 150 8 discriminator 5 view .LVU89
 431 0020 F0EE405A 		vmov.f32	s11, s0
 432 0024 01E0     		b	.L24
 433              	.L33:
 434              		.loc 1 150 8 discriminator 1 view .LVU90
 435 0026 DFED3E5A 		vldr.32	s11, .L43
 436              	.L24:
 437              	.LVL37:
 151:./app/algorithm/src/ts_foc.c ****   Ub = _constrain(Ub, 0.0f, motor->voltage_power_supply);
 438              		.loc 1 151 3 is_stmt 1 view .LVU91
 439              		.loc 1 151 8 is_stmt 0 view .LVU92
 440 002a F5EEC00A 		vcmpe.f32	s1, #0
 441 002e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 442 0032 09D4     		bmi	.L34
 443              		.loc 1 151 8 discriminator 2 view .LVU93
 444 0034 94ED036A 		vldr.32	s12, [r4, #12]
 445 0038 B4EEE06A 		vcmpe.f32	s12, s1
 446 003c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 447 0040 04D4     		bmi	.L25
 448              		.loc 1 151 8 discriminator 5 view .LVU94
 449 0042 B0EE606A 		vmov.f32	s12, s1
 450 0046 01E0     		b	.L25
 451              	.L34:
 452              		.loc 1 151 8 discriminator 1 view .LVU95
 453 0048 9FED356A 		vldr.32	s12, .L43
 454              	.L25:
 455              	.LVL38:
 152:./app/algorithm/src/ts_foc.c ****   Uc = _constrain(Uc, 0.0f, motor->voltage_power_supply);
 456              		.loc 1 152 3 is_stmt 1 view .LVU96
 457              		.loc 1 152 8 is_stmt 0 view .LVU97
 458 004c B5EEC01A 		vcmpe.f32	s2, #0
 459 0050 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 460 0054 09D4     		bmi	.L35
 461              		.loc 1 152 8 discriminator 2 view .LVU98
 462 0056 D4ED036A 		vldr.32	s13, [r4, #12]
 463 005a F4EEC16A 		vcmpe.f32	s13, s2
 464 005e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 465 0062 04D4     		bmi	.L26
 466              		.loc 1 152 8 discriminator 5 view .LVU99
 467 0064 F0EE416A 		vmov.f32	s13, s2
 468 0068 01E0     		b	.L26
 469              	.L35:
 470              		.loc 1 152 8 discriminator 1 view .LVU100
 471 006a DFED2D6A 		vldr.32	s13, .L43
ARM GAS  /tmp/ccPOftzH.s 			page 12


 472              	.L26:
 473              	.LVL39:
 153:./app/algorithm/src/ts_foc.c ****   // è®¡ç®—å ç©ºæ¯”
 154:./app/algorithm/src/ts_foc.c ****   // é™åˆ¶å ç©ºæ¯”ä»Ž0åˆ°1
 155:./app/algorithm/src/ts_foc.c ****   float dc_a = _constrain(Ua / motor->voltage_power_supply, 0.0f , 1.0f );
 474              		.loc 1 155 3 is_stmt 1 view .LVU101
 475              		.loc 1 155 16 is_stmt 0 view .LVU102
 476 006e 94ED037A 		vldr.32	s14, [r4, #12]
 477 0072 C5EE877A 		vdiv.f32	s15, s11, s14
 478 0076 F5EEC07A 		vcmpe.f32	s15, #0
 479 007a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 480 007e 09D4     		bmi	.L36
 481              		.loc 1 155 16 discriminator 2 view .LVU103
 482 0080 F7EE005A 		vmov.f32	s11, #1.0e+0
 483              	.LVL40:
 484              		.loc 1 155 16 discriminator 2 view .LVU104
 485 0084 F4EEE57A 		vcmpe.f32	s15, s11
 486 0088 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 487 008c 04DD     		ble	.L27
 488              		.loc 1 155 16 discriminator 4 view .LVU105
 489 008e F0EE657A 		vmov.f32	s15, s11
 490 0092 01E0     		b	.L27
 491              	.LVL41:
 492              	.L36:
 493              		.loc 1 155 16 discriminator 1 view .LVU106
 494 0094 DFED227A 		vldr.32	s15, .L43
 495              	.LVL42:
 496              	.L27:
 156:./app/algorithm/src/ts_foc.c ****   float dc_b = _constrain(Ub / motor->voltage_power_supply, 0.0f , 1.0f );
 497              		.loc 1 156 3 is_stmt 1 view .LVU107
 498              		.loc 1 156 16 is_stmt 0 view .LVU108
 499 0098 C6EE078A 		vdiv.f32	s17, s12, s14
 500 009c F5EEC08A 		vcmpe.f32	s17, #0
 501 00a0 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 502 00a4 09D4     		bmi	.L37
 503              		.loc 1 156 16 discriminator 2 view .LVU109
 504 00a6 B7EE006A 		vmov.f32	s12, #1.0e+0
 505              	.LVL43:
 506              		.loc 1 156 16 discriminator 2 view .LVU110
 507 00aa F4EEC68A 		vcmpe.f32	s17, s12
 508 00ae F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 509 00b2 04DD     		ble	.L29
 510              		.loc 1 156 16 discriminator 4 view .LVU111
 511 00b4 F0EE468A 		vmov.f32	s17, s12
 512 00b8 01E0     		b	.L29
 513              	.LVL44:
 514              	.L37:
 515              		.loc 1 156 16 discriminator 1 view .LVU112
 516 00ba DFED198A 		vldr.32	s17, .L43
 517              	.LVL45:
 518              	.L29:
 157:./app/algorithm/src/ts_foc.c ****   float dc_c = _constrain(Uc / motor->voltage_power_supply, 0.0f , 1.0f );
 519              		.loc 1 157 3 is_stmt 1 view .LVU113
 520              		.loc 1 157 16 is_stmt 0 view .LVU114
 521 00be 86EE878A 		vdiv.f32	s16, s13, s14
 522 00c2 B5EEC08A 		vcmpe.f32	s16, #0
 523 00c6 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
ARM GAS  /tmp/ccPOftzH.s 			page 13


 524 00ca 09D4     		bmi	.L38
 525              		.loc 1 157 16 discriminator 2 view .LVU115
 526 00cc B7EE007A 		vmov.f32	s14, #1.0e+0
 527 00d0 B4EEC78A 		vcmpe.f32	s16, s14
 528 00d4 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 529 00d8 04DD     		ble	.L31
 530              		.loc 1 157 16 discriminator 4 view .LVU116
 531 00da B0EE478A 		vmov.f32	s16, s14
 532 00de 01E0     		b	.L31
 533              	.L38:
 534              		.loc 1 157 16 discriminator 1 view .LVU117
 535 00e0 9FED0F8A 		vldr.32	s16, .L43
 536              	.L31:
 537              	.LVL46:
 158:./app/algorithm/src/ts_foc.c **** 
 159:./app/algorithm/src/ts_foc.c ****   //å†™å…¥PWM
 160:./app/algorithm/src/ts_foc.c ****   motor->Motor_Set_Compare1(dc_a*3300);
 538              		.loc 1 160 3 is_stmt 1 view .LVU118
 539              		.loc 1 160 8 is_stmt 0 view .LVU119
 540 00e4 A36C     		ldr	r3, [r4, #72]
 541              		.loc 1 160 33 view .LVU120
 542 00e6 9FED0F9A 		vldr.32	s18, .L43+4
 543 00ea 67EE897A 		vmul.f32	s15, s15, s18
 544              	.LVL47:
 545              		.loc 1 160 3 view .LVU121
 546 00ee FCEEE77A 		vcvt.u32.f32	s15, s15
 547 00f2 17EE900A 		vmov	r0, s15	@ int
 548              	.LVL48:
 549              		.loc 1 160 3 view .LVU122
 550 00f6 9847     		blx	r3
 551              	.LVL49:
 161:./app/algorithm/src/ts_foc.c ****   motor->Motor_Set_Compare2(dc_b*3300);
 552              		.loc 1 161 3 is_stmt 1 view .LVU123
 553              		.loc 1 161 8 is_stmt 0 view .LVU124
 554 00f8 E36C     		ldr	r3, [r4, #76]
 555              		.loc 1 161 33 view .LVU125
 556 00fa 68EE898A 		vmul.f32	s17, s17, s18
 557              	.LVL50:
 558              		.loc 1 161 3 view .LVU126
 559 00fe FCEEE87A 		vcvt.u32.f32	s15, s17
 560 0102 17EE900A 		vmov	r0, s15	@ int
 561 0106 9847     		blx	r3
 562              	.LVL51:
 162:./app/algorithm/src/ts_foc.c ****   motor->Motor_Set_Compare3(dc_c*3300);
 563              		.loc 1 162 3 is_stmt 1 view .LVU127
 564              		.loc 1 162 8 is_stmt 0 view .LVU128
 565 0108 236D     		ldr	r3, [r4, #80]
 566              		.loc 1 162 33 view .LVU129
 567 010a 28EE098A 		vmul.f32	s16, s16, s18
 568              	.LVL52:
 569              		.loc 1 162 3 view .LVU130
 570 010e FCEEC87A 		vcvt.u32.f32	s15, s16
 571 0112 17EE900A 		vmov	r0, s15	@ int
 572 0116 9847     		blx	r3
 573              	.LVL53:
 163:./app/algorithm/src/ts_foc.c **** }
 574              		.loc 1 163 1 view .LVU131
ARM GAS  /tmp/ccPOftzH.s 			page 14


 575 0118 BDEC048B 		vldm	sp!, {d8-d9}
 576              	.LCFI10:
 577              		.cfi_restore 82
 578              		.cfi_restore 83
 579              		.cfi_restore 80
 580              		.cfi_restore 81
 581              		.cfi_def_cfa_offset 8
 582 011c 10BD     		pop	{r4, pc}
 583              	.LVL54:
 584              	.L44:
 585              		.loc 1 163 1 view .LVU132
 586 011e 00BF     		.align	2
 587              	.L43:
 588 0120 00000000 		.word	0
 589 0124 00404E45 		.word	1162756096
 590              		.cfi_endproc
 591              	.LFE264:
 593              		.global	__aeabi_dmul
 594              		.global	__aeabi_dsub
 595              		.global	__aeabi_dadd
 596              		.section	.text.setTorque,"ax",%progbits
 597              		.align	1
 598              		.global	setTorque
 599              		.syntax unified
 600              		.thumb
 601              		.thumb_func
 603              	setTorque:
 604              	.LVL55:
 605              	.LFB265:
 164:./app/algorithm/src/ts_foc.c **** 
 165:./app/algorithm/src/ts_foc.c **** /// @brief è®¾ç½®åŠ›çŸ©
 166:./app/algorithm/src/ts_foc.c **** /// @param Uq éœ€æ±‚åŠ›çŸ©
 167:./app/algorithm/src/ts_foc.c **** /// @param angle_el 
 168:./app/algorithm/src/ts_foc.c **** void setTorque(Motor* motor,float Uq,float angle_el)
 169:./app/algorithm/src/ts_foc.c **** {
 606              		.loc 1 169 1 is_stmt 1 view -0
 607              		.cfi_startproc
 608              		@ args = 0, pretend = 0, frame = 0
 609              		@ frame_needed = 0, uses_anonymous_args = 0
 610              		.loc 1 169 1 is_stmt 0 view .LVU134
 611 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 612              	.LCFI11:
 613              		.cfi_def_cfa_offset 40
 614              		.cfi_offset 3, -40
 615              		.cfi_offset 4, -36
 616              		.cfi_offset 5, -32
 617              		.cfi_offset 6, -28
 618              		.cfi_offset 7, -24
 619              		.cfi_offset 8, -20
 620              		.cfi_offset 9, -16
 621              		.cfi_offset 10, -12
 622              		.cfi_offset 11, -8
 623              		.cfi_offset 14, -4
 624 0004 2DED048B 		vpush.64	{d8, d9}
 625              	.LCFI12:
 626              		.cfi_def_cfa_offset 56
 627              		.cfi_offset 80, -56
ARM GAS  /tmp/ccPOftzH.s 			page 15


 628              		.cfi_offset 81, -52
 629              		.cfi_offset 82, -48
 630              		.cfi_offset 83, -44
 631 0008 8246     		mov	r10, r0
 632 000a F0EE407A 		vmov.f32	s15, s0
 633 000e B0EE600A 		vmov.f32	s0, s1
 634              	.LVL56:
 170:./app/algorithm/src/ts_foc.c **** 
 171:./app/algorithm/src/ts_foc.c ****   Uq=_constrain(Uq,-(motor->voltage_power_supply)/2,(motor->voltage_power_supply)/2);
 635              		.loc 1 171 3 is_stmt 1 view .LVU135
 636              		.loc 1 171 6 is_stmt 0 view .LVU136
 637 0012 90ED038A 		vldr.32	s16, [r0, #12]
 638 0016 B6EE007A 		vmov.f32	s14, #5.0e-1
 639 001a 28EE478A 		vnmul.f32	s16, s16, s14
 640 001e B4EEE78A 		vcmpe.f32	s16, s15
 641 0022 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 642 0026 08DC     		bgt	.L46
 643 0028 B1EE488A 		vneg.f32	s16, s16
 644              		.loc 1 171 6 discriminator 2 view .LVU137
 645 002c F4EEC87A 		vcmpe.f32	s15, s16
 646 0030 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 647 0034 01DC     		bgt	.L46
 648              		.loc 1 171 6 discriminator 5 view .LVU138
 649 0036 B0EE678A 		vmov.f32	s16, s15
 650              	.L46:
 651              	.LVL57:
 172:./app/algorithm/src/ts_foc.c **** 
 173:./app/algorithm/src/ts_foc.c ****   angle_el = _normalizeAngle(angle_el);
 652              		.loc 1 173 3 is_stmt 1 view .LVU139
 653              		.loc 1 173 14 is_stmt 0 view .LVU140
 654 003a FFF7FEFF 		bl	_normalizeAngle
 655              	.LVL58:
 656              		.loc 1 173 14 view .LVU141
 657 003e 10EE106A 		vmov	r6, s0
 658              	.LVL59:
 174:./app/algorithm/src/ts_foc.c ****   // å¸•å…‹é€†å˜æ¢
 175:./app/algorithm/src/ts_foc.c ****   motor->Ualpha =  -Uq*sin(angle_el);
 659              		.loc 1 175 3 is_stmt 1 view .LVU142
 660              		.loc 1 175 20 is_stmt 0 view .LVU143
 661 0042 F1EE487A 		vneg.f32	s15, s16
 662 0046 17EE900A 		vmov	r0, s15
 663 004a FFF7FEFF 		bl	__aeabi_f2d
 664              	.LVL60:
 665 004e 0446     		mov	r4, r0
 666 0050 0D46     		mov	r5, r1
 667              		.loc 1 175 24 view .LVU144
 668 0052 3046     		mov	r0, r6	@ float
 669 0054 FFF7FEFF 		bl	__aeabi_f2d
 670              	.LVL61:
 671 0058 41EC190B 		vmov	d9, r0, r1
 672 005c B0EE490A 		vmov.f32	s0, s18
 673 0060 F0EE690A 		vmov.f32	s1, s19
 674 0064 FFF7FEFF 		bl	sin
 675              	.LVL62:
 676 0068 53EC102B 		vmov	r2, r3, d0
 677              		.loc 1 175 23 discriminator 1 view .LVU145
 678 006c 2046     		mov	r0, r4
ARM GAS  /tmp/ccPOftzH.s 			page 16


 679 006e 2946     		mov	r1, r5
 680 0070 FFF7FEFF 		bl	__aeabi_dmul
 681              	.LVL63:
 682 0074 FFF7FEFF 		bl	__aeabi_d2f
 683              	.LVL64:
 684 0078 8346     		mov	fp, r0	@ float
 685              		.loc 1 175 17 discriminator 1 view .LVU146
 686 007a CAF81400 		str	r0, [r10, #20]	@ float
 176:./app/algorithm/src/ts_foc.c ****   motor->Ubeta =   Uq*cos(angle_el);
 687              		.loc 1 176 3 is_stmt 1 view .LVU147
 688              		.loc 1 176 23 is_stmt 0 view .LVU148
 689 007e B0EE490A 		vmov.f32	s0, s18
 690 0082 F0EE690A 		vmov.f32	s1, s19
 691 0086 FFF7FEFF 		bl	cos
 692              	.LVL65:
 693 008a 55EC104B 		vmov	r4, r5, d0
 694              		.loc 1 176 22 view .LVU149
 695 008e 18EE100A 		vmov	r0, s16
 696 0092 FFF7FEFF 		bl	__aeabi_f2d
 697              	.LVL66:
 698              		.loc 1 176 22 discriminator 1 view .LVU150
 699 0096 2246     		mov	r2, r4
 700 0098 2B46     		mov	r3, r5
 701 009a FFF7FEFF 		bl	__aeabi_dmul
 702              	.LVL67:
 703 009e FFF7FEFF 		bl	__aeabi_d2f
 704              	.LVL68:
 705              		.loc 1 176 16 discriminator 1 view .LVU151
 706 00a2 CAF81800 		str	r0, [r10, #24]	@ float
 177:./app/algorithm/src/ts_foc.c **** 
 178:./app/algorithm/src/ts_foc.c ****   // å…‹æ‹‰å…‹é€†å˜æ¢
 179:./app/algorithm/src/ts_foc.c ****   motor->Ua = motor->Ualpha + motor->voltage_power_supply/2;
 707              		.loc 1 179 3 is_stmt 1 view .LVU152
 708              		.loc 1 179 36 is_stmt 0 view .LVU153
 709 00a6 9AED038A 		vldr.32	s16, [r10, #12]
 710              	.LVL69:
 711              		.loc 1 179 58 view .LVU154
 712 00aa F6EE007A 		vmov.f32	s15, #5.0e-1
 713 00ae 28EE278A 		vmul.f32	s16, s16, s15
 714              		.loc 1 179 29 view .LVU155
 715 00b2 07EE90BA 		vmov	s15, fp
 716 00b6 37EE889A 		vadd.f32	s18, s15, s16
 717              		.loc 1 179 13 view .LVU156
 718 00ba 8AED079A 		vstr.32	s18, [r10, #28]
 180:./app/algorithm/src/ts_foc.c ****   motor->Ub = (sqrt(3)*motor->Ubeta-motor->Ualpha)/2 + motor->voltage_power_supply/2;
 719              		.loc 1 180 3 is_stmt 1 view .LVU157
 720              		.loc 1 180 29 is_stmt 0 view .LVU158
 721 00be FFF7FEFF 		bl	__aeabi_f2d
 722              	.LVL70:
 723              		.loc 1 180 23 view .LVU159
 724 00c2 26A3     		adr	r3, .L48+4
 725 00c4 D3E90023 		ldrd	r2, [r3]
 726 00c8 FFF7FEFF 		bl	__aeabi_dmul
 727              	.LVL71:
 728 00cc 0646     		mov	r6, r0
 729              	.LVL72:
 730              		.loc 1 180 23 view .LVU160
ARM GAS  /tmp/ccPOftzH.s 			page 17


 731 00ce 0F46     		mov	r7, r1
 732              		.loc 1 180 42 view .LVU161
 733 00d0 5846     		mov	r0, fp	@ float
 734 00d2 FFF7FEFF 		bl	__aeabi_f2d
 735              	.LVL73:
 736 00d6 0246     		mov	r2, r0
 737 00d8 0B46     		mov	r3, r1
 738              		.loc 1 180 36 view .LVU162
 739 00da 3046     		mov	r0, r6
 740 00dc 3946     		mov	r1, r7
 741 00de FFF7FEFF 		bl	__aeabi_dsub
 742              	.LVL74:
 743              		.loc 1 180 51 view .LVU163
 744 00e2 0022     		movs	r2, #0
 745 00e4 1C4B     		ldr	r3, .L48
 746 00e6 FFF7FEFF 		bl	__aeabi_dmul
 747              	.LVL75:
 748 00ea 8046     		mov	r8, r0
 749 00ec 8946     		mov	r9, r1
 750              		.loc 1 180 83 view .LVU164
 751 00ee 18EE100A 		vmov	r0, s16
 752 00f2 FFF7FEFF 		bl	__aeabi_f2d
 753              	.LVL76:
 754 00f6 0446     		mov	r4, r0
 755 00f8 0D46     		mov	r5, r1
 756              		.loc 1 180 54 view .LVU165
 757 00fa 0246     		mov	r2, r0
 758 00fc 0B46     		mov	r3, r1
 759 00fe 4046     		mov	r0, r8
 760 0100 4946     		mov	r1, r9
 761 0102 FFF7FEFF 		bl	__aeabi_dadd
 762              	.LVL77:
 763 0106 FFF7FEFF 		bl	__aeabi_d2f
 764              	.LVL78:
 765 010a 08EE100A 		vmov	s16, r0
 766              		.loc 1 180 13 view .LVU166
 767 010e CAF82000 		str	r0, [r10, #32]	@ float
 181:./app/algorithm/src/ts_foc.c ****   motor->Uc = (-motor->Ualpha-sqrt(3)*motor->Ubeta)/2 + motor->voltage_power_supply/2;
 768              		.loc 1 181 3 is_stmt 1 view .LVU167
 769              		.loc 1 181 16 is_stmt 0 view .LVU168
 770 0112 8BF00040 		eor	r0, fp, #-2147483648
 771 0116 FFF7FEFF 		bl	__aeabi_f2d
 772              	.LVL79:
 773              		.loc 1 181 30 view .LVU169
 774 011a 3246     		mov	r2, r6
 775 011c 3B46     		mov	r3, r7
 776 011e FFF7FEFF 		bl	__aeabi_dsub
 777              	.LVL80:
 778              		.loc 1 181 52 view .LVU170
 779 0122 0022     		movs	r2, #0
 780 0124 0C4B     		ldr	r3, .L48
 781 0126 FFF7FEFF 		bl	__aeabi_dmul
 782              	.LVL81:
 783 012a 0246     		mov	r2, r0
 784 012c 0B46     		mov	r3, r1
 785              		.loc 1 181 55 view .LVU171
 786 012e 2046     		mov	r0, r4
ARM GAS  /tmp/ccPOftzH.s 			page 18


 787 0130 2946     		mov	r1, r5
 788 0132 FFF7FEFF 		bl	__aeabi_dadd
 789              	.LVL82:
 790 0136 FFF7FEFF 		bl	__aeabi_d2f
 791              	.LVL83:
 792 013a 01EE100A 		vmov	s2, r0
 793              		.loc 1 181 13 view .LVU172
 794 013e CAF82400 		str	r0, [r10, #36]	@ float
 182:./app/algorithm/src/ts_foc.c ****   setPwm(motor,motor->Ua,motor->Ub,motor->Uc);
 795              		.loc 1 182 3 is_stmt 1 view .LVU173
 796 0142 F0EE480A 		vmov.f32	s1, s16
 797 0146 B0EE490A 		vmov.f32	s0, s18
 798 014a 5046     		mov	r0, r10
 799 014c FFF7FEFF 		bl	setPwm
 800              	.LVL84:
 183:./app/algorithm/src/ts_foc.c **** }
 801              		.loc 1 183 1 is_stmt 0 view .LVU174
 802 0150 BDEC048B 		vldm	sp!, {d8-d9}
 803              	.LCFI13:
 804              		.cfi_restore 82
 805              		.cfi_restore 83
 806              		.cfi_restore 80
 807              		.cfi_restore 81
 808              		.cfi_def_cfa_offset 40
 809 0154 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 810              	.LVL85:
 811              	.L49:
 812              		.loc 1 183 1 view .LVU175
 813              		.align	3
 814              	.L48:
 815 0158 0000E03F 		.word	1071644672
 816 015c AA4C58E8 		.word	-396866390
 817 0160 7AB6FB3F 		.word	1073460858
 818              		.cfi_endproc
 819              	.LFE265:
 821              		.section	.rodata.aligns_Motor_Zero_Angle.str1.4,"aMS",%progbits,1
 822              		.align	2
 823              	.LC0:
 824 0000 2564E58F 		.ascii	"%d\345\217\267\347\224\265\346\234\272\351\233\266\347"
 824      B7E794B5 
 824      E69CBAE9 
 824      9BB6E7
 825 000f 94B5E8A7 		.ascii	"\224\265\350\247\222\345\272\246:%.2f\015\012\000"
 825      92E5BAA6 
 825      3A252E32 
 825      660D0A00 
 826              		.section	.text.aligns_Motor_Zero_Angle,"ax",%progbits
 827              		.align	1
 828              		.global	aligns_Motor_Zero_Angle
 829              		.syntax unified
 830              		.thumb
 831              		.thumb_func
 833              	aligns_Motor_Zero_Angle:
 834              	.LVL86:
 835              	.LFB252:
  24:./app/algorithm/src/ts_foc.c ****   setTorque(motor,3, _3PI_2);
 836              		.loc 1 24 1 is_stmt 1 view -0
ARM GAS  /tmp/ccPOftzH.s 			page 19


 837              		.cfi_startproc
 838              		@ args = 0, pretend = 0, frame = 0
 839              		@ frame_needed = 0, uses_anonymous_args = 0
  24:./app/algorithm/src/ts_foc.c ****   setTorque(motor,3, _3PI_2);
 840              		.loc 1 24 1 is_stmt 0 view .LVU177
 841 0000 38B5     		push	{r3, r4, r5, lr}
 842              	.LCFI14:
 843              		.cfi_def_cfa_offset 16
 844              		.cfi_offset 3, -16
 845              		.cfi_offset 4, -12
 846              		.cfi_offset 5, -8
 847              		.cfi_offset 14, -4
 848 0002 2DED028B 		vpush.64	{d8}
 849              	.LCFI15:
 850              		.cfi_def_cfa_offset 24
 851              		.cfi_offset 80, -24
 852              		.cfi_offset 81, -20
 853 0006 0446     		mov	r4, r0
  25:./app/algorithm/src/ts_foc.c ****   tx_thread_sleep(2000);  //åœ¨ThreadXä¸­ä¸èƒ½ä½¿ç”¨hal_Delay()
 854              		.loc 1 25 3 is_stmt 1 view .LVU178
 855 0008 9FED148A 		vldr.32	s16, .L52
 856 000c F0EE480A 		vmov.f32	s1, s16
 857 0010 B0EE080A 		vmov.f32	s0, #3.0e+0
 858 0014 FFF7FEFF 		bl	setTorque
 859              	.LVL87:
  26:./app/algorithm/src/ts_foc.c ****   Read_AS5600_Angle(motor->As5600_Sensor);
 860              		.loc 1 26 3 view .LVU179
 861 0018 4FF4FA60 		mov	r0, #2000
 862 001c FFF7FEFF 		bl	_tx_thread_sleep
 863              	.LVL88:
  27:./app/algorithm/src/ts_foc.c ****   motor->zero_electric_angle = _electricalAngle(motor);
 864              		.loc 1 27 3 view .LVU180
 865 0020 A06A     		ldr	r0, [r4, #40]
 866 0022 FFF7FEFF 		bl	Read_AS5600_Angle
 867              	.LVL89:
  28:./app/algorithm/src/ts_foc.c ****   setTorque(motor,0, _3PI_2);
 868              		.loc 1 28 3 view .LVU181
  28:./app/algorithm/src/ts_foc.c ****   setTorque(motor,0, _3PI_2);
 869              		.loc 1 28 32 is_stmt 0 view .LVU182
 870 0026 2046     		mov	r0, r4
 871 0028 FFF7FEFF 		bl	_electricalAngle
 872              	.LVL90:
  28:./app/algorithm/src/ts_foc.c ****   setTorque(motor,0, _3PI_2);
 873              		.loc 1 28 30 discriminator 1 view .LVU183
 874 002c 84ED040A 		vstr.32	s0, [r4, #16]
  29:./app/algorithm/src/ts_foc.c ****   printf("%då·ç”µæœºé›¶ç”µè§’åº¦:%.2f\r\n",motor->Motor_ID,motor->zero_electric_angle);
 875              		.loc 1 29 3 is_stmt 1 view .LVU184
 876 0030 F0EE480A 		vmov.f32	s1, s16
 877 0034 9FED0A0A 		vldr.32	s0, .L52+4
 878 0038 2046     		mov	r0, r4
 879 003a FFF7FEFF 		bl	setTorque
 880              	.LVL91:
  30:./app/algorithm/src/ts_foc.c ****   return 0;
 881              		.loc 1 30 3 view .LVU185
  30:./app/algorithm/src/ts_foc.c ****   return 0;
 882              		.loc 1 30 50 is_stmt 0 view .LVU186
 883 003e 2578     		ldrb	r5, [r4]	@ zero_extendqisi2
ARM GAS  /tmp/ccPOftzH.s 			page 20


  30:./app/algorithm/src/ts_foc.c ****   return 0;
 884              		.loc 1 30 3 view .LVU187
 885 0040 2069     		ldr	r0, [r4, #16]	@ float
 886 0042 FFF7FEFF 		bl	__aeabi_f2d
 887              	.LVL92:
 888 0046 0246     		mov	r2, r0
 889 0048 0B46     		mov	r3, r1
 890 004a 2946     		mov	r1, r5
 891 004c 0548     		ldr	r0, .L52+8
 892 004e FFF7FEFF 		bl	printf
 893              	.LVL93:
  31:./app/algorithm/src/ts_foc.c **** }
 894              		.loc 1 31 3 is_stmt 1 view .LVU188
  32:./app/algorithm/src/ts_foc.c **** 
 895              		.loc 1 32 1 is_stmt 0 view .LVU189
 896 0052 0020     		movs	r0, #0
 897 0054 BDEC028B 		vldm	sp!, {d8}
 898              	.LCFI16:
 899              		.cfi_restore 80
 900              		.cfi_restore 81
 901              		.cfi_def_cfa_offset 16
 902 0058 38BD     		pop	{r3, r4, r5, pc}
 903              	.LVL94:
 904              	.L53:
  32:./app/algorithm/src/ts_foc.c **** 
 905              		.loc 1 32 1 view .LVU190
 906 005a 00BF     		.align	2
 907              	.L52:
 908 005c E4CB9640 		.word	1083624420
 909 0060 00000000 		.word	0
 910 0064 00000000 		.word	.LC0
 911              		.cfi_endproc
 912              	.LFE252:
 914              		.section	.text.Set_Velocity_Angle,"ax",%progbits
 915              		.align	1
 916              		.global	Set_Velocity_Angle
 917              		.syntax unified
 918              		.thumb
 919              		.thumb_func
 921              	Set_Velocity_Angle:
 922              	.LVL95:
 923              	.LFB256:
  78:./app/algorithm/src/ts_foc.c ****  setTorque(motor,Pid_clac(motor->Pid_Vel,Pid_clac(motor->Pid_Ang,(target-Get_AS5600_Angle(motor->As
 924              		.loc 1 78 1 is_stmt 1 view -0
 925              		.cfi_startproc
 926              		@ args = 0, pretend = 0, frame = 0
 927              		@ frame_needed = 0, uses_anonymous_args = 0
  78:./app/algorithm/src/ts_foc.c ****  setTorque(motor,Pid_clac(motor->Pid_Vel,Pid_clac(motor->Pid_Ang,(target-Get_AS5600_Angle(motor->As
 928              		.loc 1 78 1 is_stmt 0 view .LVU192
 929 0000 70B5     		push	{r4, r5, r6, lr}
 930              	.LCFI17:
 931              		.cfi_def_cfa_offset 16
 932              		.cfi_offset 4, -16
 933              		.cfi_offset 5, -12
 934              		.cfi_offset 6, -8
 935              		.cfi_offset 14, -4
 936 0002 2DED028B 		vpush.64	{d8}
ARM GAS  /tmp/ccPOftzH.s 			page 21


 937              	.LCFI18:
 938              		.cfi_def_cfa_offset 24
 939              		.cfi_offset 80, -24
 940              		.cfi_offset 81, -20
 941 0006 0446     		mov	r4, r0
 942 0008 B0EE408A 		vmov.f32	s16, s0
  79:./app/algorithm/src/ts_foc.c **** }
 943              		.loc 1 79 2 is_stmt 1 view .LVU193
 944 000c C56A     		ldr	r5, [r0, #44]
 945 000e 066B     		ldr	r6, [r0, #48]
  79:./app/algorithm/src/ts_foc.c **** }
 946              		.loc 1 79 74 is_stmt 0 view .LVU194
 947 0010 806A     		ldr	r0, [r0, #40]
 948              	.LVL96:
  79:./app/algorithm/src/ts_foc.c **** }
 949              		.loc 1 79 74 view .LVU195
 950 0012 FFF7FEFF 		bl	Get_AS5600_Angle
 951              	.LVL97:
  79:./app/algorithm/src/ts_foc.c **** }
 952              		.loc 1 79 73 discriminator 1 view .LVU196
 953 0016 38EE408A 		vsub.f32	s16, s16, s0
 954              	.LVL98:
  79:./app/algorithm/src/ts_foc.c **** }
 955              		.loc 1 79 113 discriminator 1 view .LVU197
 956 001a DFED0E7A 		vldr.32	s15, .L56
 957 001e 28EE278A 		vmul.f32	s16, s16, s15
  79:./app/algorithm/src/ts_foc.c **** }
 958              		.loc 1 79 2 discriminator 1 view .LVU198
 959 0022 9FED0D0A 		vldr.32	s0, .L56+4
 960 0026 88EE000A 		vdiv.f32	s0, s16, s0
 961 002a 3046     		mov	r0, r6
 962 002c FFF7FEFF 		bl	Pid_clac
 963              	.LVL99:
  79:./app/algorithm/src/ts_foc.c **** }
 964              		.loc 1 79 2 discriminator 2 view .LVU199
 965 0030 2846     		mov	r0, r5
 966 0032 FFF7FEFF 		bl	Pid_clac
 967              	.LVL100:
 968 0036 B0EE408A 		vmov.f32	s16, s0
  79:./app/algorithm/src/ts_foc.c **** }
 969              		.loc 1 79 2 discriminator 3 view .LVU200
 970 003a 2046     		mov	r0, r4
 971 003c FFF7FEFF 		bl	_electricalAngle
 972              	.LVL101:
 973 0040 F0EE400A 		vmov.f32	s1, s0
  79:./app/algorithm/src/ts_foc.c **** }
 974              		.loc 1 79 2 discriminator 4 view .LVU201
 975 0044 B0EE480A 		vmov.f32	s0, s16
 976 0048 2046     		mov	r0, r4
 977 004a FFF7FEFF 		bl	setTorque
 978              	.LVL102:
  80:./app/algorithm/src/ts_foc.c **** 
 979              		.loc 1 80 1 view .LVU202
 980 004e BDEC028B 		vldm	sp!, {d8}
 981              	.LCFI19:
 982              		.cfi_restore 80
 983              		.cfi_restore 81
ARM GAS  /tmp/ccPOftzH.s 			page 22


 984              		.cfi_def_cfa_offset 16
 985 0052 70BD     		pop	{r4, r5, r6, pc}
 986              	.LVL103:
 987              	.L57:
  80:./app/algorithm/src/ts_foc.c **** 
 988              		.loc 1 80 1 view .LVU203
 989              		.align	2
 990              	.L56:
 991 0054 00003443 		.word	1127481344
 992 0058 DB0F4940 		.word	1078530011
 993              		.cfi_endproc
 994              	.LFE256:
 996              		.section	.text.Set_Velocity,"ax",%progbits
 997              		.align	1
 998              		.global	Set_Velocity
 999              		.syntax unified
 1000              		.thumb
 1001              		.thumb_func
 1003              	Set_Velocity:
 1004              	.LVL104:
 1005              	.LFB257:
  86:./app/algorithm/src/ts_foc.c ****   setTorque(motor,Pid_clac(motor->Pid_Vel,(target-Get_filter_Velocity(motor))*180/PI),_electricalAn
 1006              		.loc 1 86 1 is_stmt 1 view -0
 1007              		.cfi_startproc
 1008              		@ args = 0, pretend = 0, frame = 0
 1009              		@ frame_needed = 0, uses_anonymous_args = 0
  86:./app/algorithm/src/ts_foc.c ****   setTorque(motor,Pid_clac(motor->Pid_Vel,(target-Get_filter_Velocity(motor))*180/PI),_electricalAn
 1010              		.loc 1 86 1 is_stmt 0 view .LVU205
 1011 0000 38B5     		push	{r3, r4, r5, lr}
 1012              	.LCFI20:
 1013              		.cfi_def_cfa_offset 16
 1014              		.cfi_offset 3, -16
 1015              		.cfi_offset 4, -12
 1016              		.cfi_offset 5, -8
 1017              		.cfi_offset 14, -4
 1018 0002 2DED028B 		vpush.64	{d8}
 1019              	.LCFI21:
 1020              		.cfi_def_cfa_offset 24
 1021              		.cfi_offset 80, -24
 1022              		.cfi_offset 81, -20
 1023 0006 0446     		mov	r4, r0
 1024 0008 B0EE408A 		vmov.f32	s16, s0
  87:./app/algorithm/src/ts_foc.c **** }
 1025              		.loc 1 87 3 is_stmt 1 view .LVU206
 1026 000c C56A     		ldr	r5, [r0, #44]
  87:./app/algorithm/src/ts_foc.c **** }
 1027              		.loc 1 87 51 is_stmt 0 view .LVU207
 1028 000e FFF7FEFF 		bl	Get_filter_Velocity
 1029              	.LVL105:
  87:./app/algorithm/src/ts_foc.c **** }
 1030              		.loc 1 87 50 discriminator 1 view .LVU208
 1031 0012 38EE408A 		vsub.f32	s16, s16, s0
 1032              	.LVL106:
  87:./app/algorithm/src/ts_foc.c **** }
 1033              		.loc 1 87 78 discriminator 1 view .LVU209
 1034 0016 DFED0D7A 		vldr.32	s15, .L60
 1035 001a 28EE278A 		vmul.f32	s16, s16, s15
ARM GAS  /tmp/ccPOftzH.s 			page 23


  87:./app/algorithm/src/ts_foc.c **** }
 1036              		.loc 1 87 3 discriminator 1 view .LVU210
 1037 001e 9FED0C0A 		vldr.32	s0, .L60+4
 1038 0022 88EE000A 		vdiv.f32	s0, s16, s0
 1039 0026 2846     		mov	r0, r5
 1040 0028 FFF7FEFF 		bl	Pid_clac
 1041              	.LVL107:
 1042 002c B0EE408A 		vmov.f32	s16, s0
  87:./app/algorithm/src/ts_foc.c **** }
 1043              		.loc 1 87 3 discriminator 2 view .LVU211
 1044 0030 2046     		mov	r0, r4
 1045 0032 FFF7FEFF 		bl	_electricalAngle
 1046              	.LVL108:
 1047 0036 F0EE400A 		vmov.f32	s1, s0
  87:./app/algorithm/src/ts_foc.c **** }
 1048              		.loc 1 87 3 discriminator 3 view .LVU212
 1049 003a B0EE480A 		vmov.f32	s0, s16
 1050 003e 2046     		mov	r0, r4
 1051 0040 FFF7FEFF 		bl	setTorque
 1052              	.LVL109:
  88:./app/algorithm/src/ts_foc.c **** 
 1053              		.loc 1 88 1 view .LVU213
 1054 0044 BDEC028B 		vldm	sp!, {d8}
 1055              	.LCFI22:
 1056              		.cfi_restore 80
 1057              		.cfi_restore 81
 1058              		.cfi_def_cfa_offset 16
 1059 0048 38BD     		pop	{r3, r4, r5, pc}
 1060              	.LVL110:
 1061              	.L61:
  88:./app/algorithm/src/ts_foc.c **** 
 1062              		.loc 1 88 1 view .LVU214
 1063 004a 00BF     		.align	2
 1064              	.L60:
 1065 004c 00003443 		.word	1127481344
 1066 0050 DB0F4940 		.word	1078530011
 1067              		.cfi_endproc
 1068              	.LFE257:
 1070              		.section	.text.Set_Force_Angle,"ax",%progbits
 1071              		.align	1
 1072              		.global	Set_Force_Angle
 1073              		.syntax unified
 1074              		.thumb
 1075              		.thumb_func
 1077              	Set_Force_Angle:
 1078              	.LVL111:
 1079              	.LFB258:
  94:./app/algorithm/src/ts_foc.c ****   setTorque(motor,Pid_clac(motor->Pid_Ang,(target-Get_AS5600_Angle(motor->As5600_Sensor))*180/PI),_
 1080              		.loc 1 94 1 is_stmt 1 view -0
 1081              		.cfi_startproc
 1082              		@ args = 0, pretend = 0, frame = 0
 1083              		@ frame_needed = 0, uses_anonymous_args = 0
  94:./app/algorithm/src/ts_foc.c ****   setTorque(motor,Pid_clac(motor->Pid_Ang,(target-Get_AS5600_Angle(motor->As5600_Sensor))*180/PI),_
 1084              		.loc 1 94 1 is_stmt 0 view .LVU216
 1085 0000 38B5     		push	{r3, r4, r5, lr}
 1086              	.LCFI23:
 1087              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/ccPOftzH.s 			page 24


 1088              		.cfi_offset 3, -16
 1089              		.cfi_offset 4, -12
 1090              		.cfi_offset 5, -8
 1091              		.cfi_offset 14, -4
 1092 0002 2DED028B 		vpush.64	{d8}
 1093              	.LCFI24:
 1094              		.cfi_def_cfa_offset 24
 1095              		.cfi_offset 80, -24
 1096              		.cfi_offset 81, -20
 1097 0006 0446     		mov	r4, r0
 1098 0008 B0EE408A 		vmov.f32	s16, s0
  95:./app/algorithm/src/ts_foc.c **** }
 1099              		.loc 1 95 3 is_stmt 1 view .LVU217
 1100 000c 056B     		ldr	r5, [r0, #48]
  95:./app/algorithm/src/ts_foc.c **** }
 1101              		.loc 1 95 51 is_stmt 0 view .LVU218
 1102 000e 806A     		ldr	r0, [r0, #40]
 1103              	.LVL112:
  95:./app/algorithm/src/ts_foc.c **** }
 1104              		.loc 1 95 51 view .LVU219
 1105 0010 FFF7FEFF 		bl	Get_AS5600_Angle
 1106              	.LVL113:
  95:./app/algorithm/src/ts_foc.c **** }
 1107              		.loc 1 95 50 discriminator 1 view .LVU220
 1108 0014 38EE408A 		vsub.f32	s16, s16, s0
 1109              	.LVL114:
  95:./app/algorithm/src/ts_foc.c **** }
 1110              		.loc 1 95 90 discriminator 1 view .LVU221
 1111 0018 DFED0C7A 		vldr.32	s15, .L64
 1112 001c 28EE278A 		vmul.f32	s16, s16, s15
  95:./app/algorithm/src/ts_foc.c **** }
 1113              		.loc 1 95 3 discriminator 1 view .LVU222
 1114 0020 9FED0B0A 		vldr.32	s0, .L64+4
 1115 0024 88EE000A 		vdiv.f32	s0, s16, s0
 1116 0028 2846     		mov	r0, r5
 1117 002a FFF7FEFF 		bl	Pid_clac
 1118              	.LVL115:
 1119 002e B0EE408A 		vmov.f32	s16, s0
  95:./app/algorithm/src/ts_foc.c **** }
 1120              		.loc 1 95 3 discriminator 2 view .LVU223
 1121 0032 2046     		mov	r0, r4
 1122 0034 FFF7FEFF 		bl	_electricalAngle
 1123              	.LVL116:
 1124 0038 F0EE400A 		vmov.f32	s1, s0
  95:./app/algorithm/src/ts_foc.c **** }
 1125              		.loc 1 95 3 discriminator 3 view .LVU224
 1126 003c B0EE480A 		vmov.f32	s0, s16
 1127 0040 2046     		mov	r0, r4
 1128 0042 FFF7FEFF 		bl	setTorque
 1129              	.LVL117:
  96:./app/algorithm/src/ts_foc.c **** 
 1130              		.loc 1 96 1 view .LVU225
 1131 0046 BDEC028B 		vldm	sp!, {d8}
 1132              	.LCFI25:
 1133              		.cfi_restore 80
 1134              		.cfi_restore 81
 1135              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/ccPOftzH.s 			page 25


 1136 004a 38BD     		pop	{r3, r4, r5, pc}
 1137              	.LVL118:
 1138              	.L65:
  96:./app/algorithm/src/ts_foc.c **** 
 1139              		.loc 1 96 1 view .LVU226
 1140              		.align	2
 1141              	.L64:
 1142 004c 00003443 		.word	1127481344
 1143 0050 DB0F4940 		.word	1078530011
 1144              		.cfi_endproc
 1145              	.LFE258:
 1147              		.section	.text.setTorque_Curr,"ax",%progbits
 1148              		.align	1
 1149              		.global	setTorque_Curr
 1150              		.syntax unified
 1151              		.thumb
 1152              		.thumb_func
 1154              	setTorque_Curr:
 1155              	.LVL119:
 1156              	.LFB259:
 102:./app/algorithm/src/ts_foc.c ****   setTorque(motor,Pid_clac(motor->Pid_Curr,Target-Get_Current(motor)),_electricalAngle(motor));
 1157              		.loc 1 102 1 is_stmt 1 view -0
 1158              		.cfi_startproc
 1159              		@ args = 0, pretend = 0, frame = 0
 1160              		@ frame_needed = 0, uses_anonymous_args = 0
 102:./app/algorithm/src/ts_foc.c ****   setTorque(motor,Pid_clac(motor->Pid_Curr,Target-Get_Current(motor)),_electricalAngle(motor));
 1161              		.loc 1 102 1 is_stmt 0 view .LVU228
 1162 0000 38B5     		push	{r3, r4, r5, lr}
 1163              	.LCFI26:
 1164              		.cfi_def_cfa_offset 16
 1165              		.cfi_offset 3, -16
 1166              		.cfi_offset 4, -12
 1167              		.cfi_offset 5, -8
 1168              		.cfi_offset 14, -4
 1169 0002 2DED028B 		vpush.64	{d8}
 1170              	.LCFI27:
 1171              		.cfi_def_cfa_offset 24
 1172              		.cfi_offset 80, -24
 1173              		.cfi_offset 81, -20
 1174 0006 0446     		mov	r4, r0
 1175 0008 B0EE408A 		vmov.f32	s16, s0
 103:./app/algorithm/src/ts_foc.c **** }
 1176              		.loc 1 103 3 is_stmt 1 view .LVU229
 1177 000c 456B     		ldr	r5, [r0, #52]
 103:./app/algorithm/src/ts_foc.c **** }
 1178              		.loc 1 103 51 is_stmt 0 view .LVU230
 1179 000e FFF7FEFF 		bl	Get_Current
 1180              	.LVL120:
 103:./app/algorithm/src/ts_foc.c **** }
 1181              		.loc 1 103 3 discriminator 1 view .LVU231
 1182 0012 38EE400A 		vsub.f32	s0, s16, s0
 1183 0016 2846     		mov	r0, r5
 1184 0018 FFF7FEFF 		bl	Pid_clac
 1185              	.LVL121:
 1186 001c B0EE408A 		vmov.f32	s16, s0
 1187              	.LVL122:
 103:./app/algorithm/src/ts_foc.c **** }
ARM GAS  /tmp/ccPOftzH.s 			page 26


 1188              		.loc 1 103 3 discriminator 2 view .LVU232
 1189 0020 2046     		mov	r0, r4
 1190 0022 FFF7FEFF 		bl	_electricalAngle
 1191              	.LVL123:
 1192 0026 F0EE400A 		vmov.f32	s1, s0
 103:./app/algorithm/src/ts_foc.c **** }
 1193              		.loc 1 103 3 discriminator 3 view .LVU233
 1194 002a B0EE480A 		vmov.f32	s0, s16
 1195 002e 2046     		mov	r0, r4
 1196 0030 FFF7FEFF 		bl	setTorque
 1197              	.LVL124:
 104:./app/algorithm/src/ts_foc.c **** 
 1198              		.loc 1 104 1 view .LVU234
 1199 0034 BDEC028B 		vldm	sp!, {d8}
 1200              	.LCFI28:
 1201              		.cfi_restore 80
 1202              		.cfi_restore 81
 1203              		.cfi_def_cfa_offset 16
 1204 0038 38BD     		pop	{r3, r4, r5, pc}
 104:./app/algorithm/src/ts_foc.c **** 
 1205              		.loc 1 104 1 view .LVU235
 1206              		.cfi_endproc
 1207              	.LFE259:
 1209              		.section	.text.set_Force_Angle_Curr,"ax",%progbits
 1210              		.align	1
 1211              		.global	set_Force_Angle_Curr
 1212              		.syntax unified
 1213              		.thumb
 1214              		.thumb_func
 1216              	set_Force_Angle_Curr:
 1217              	.LVL125:
 1218              	.LFB260:
 110:./app/algorithm/src/ts_foc.c ****   setTorque_Curr(motor,Pid_clac(motor->Pid_Ang, (Target-Get_AS5600_Angle(motor->As5600_Sensor))*180
 1219              		.loc 1 110 1 is_stmt 1 view -0
 1220              		.cfi_startproc
 1221              		@ args = 0, pretend = 0, frame = 0
 1222              		@ frame_needed = 0, uses_anonymous_args = 0
 110:./app/algorithm/src/ts_foc.c ****   setTorque_Curr(motor,Pid_clac(motor->Pid_Ang, (Target-Get_AS5600_Angle(motor->As5600_Sensor))*180
 1223              		.loc 1 110 1 is_stmt 0 view .LVU237
 1224 0000 38B5     		push	{r3, r4, r5, lr}
 1225              	.LCFI29:
 1226              		.cfi_def_cfa_offset 16
 1227              		.cfi_offset 3, -16
 1228              		.cfi_offset 4, -12
 1229              		.cfi_offset 5, -8
 1230              		.cfi_offset 14, -4
 1231 0002 2DED028B 		vpush.64	{d8}
 1232              	.LCFI30:
 1233              		.cfi_def_cfa_offset 24
 1234              		.cfi_offset 80, -24
 1235              		.cfi_offset 81, -20
 1236 0006 0446     		mov	r4, r0
 1237 0008 B0EE408A 		vmov.f32	s16, s0
 111:./app/algorithm/src/ts_foc.c **** }
 1238              		.loc 1 111 3 is_stmt 1 view .LVU238
 1239 000c 056B     		ldr	r5, [r0, #48]
 111:./app/algorithm/src/ts_foc.c **** }
ARM GAS  /tmp/ccPOftzH.s 			page 27


 1240              		.loc 1 111 57 is_stmt 0 view .LVU239
 1241 000e 806A     		ldr	r0, [r0, #40]
 1242              	.LVL126:
 111:./app/algorithm/src/ts_foc.c **** }
 1243              		.loc 1 111 57 view .LVU240
 1244 0010 FFF7FEFF 		bl	Get_AS5600_Angle
 1245              	.LVL127:
 111:./app/algorithm/src/ts_foc.c **** }
 1246              		.loc 1 111 56 discriminator 1 view .LVU241
 1247 0014 38EE408A 		vsub.f32	s16, s16, s0
 1248              	.LVL128:
 111:./app/algorithm/src/ts_foc.c **** }
 1249              		.loc 1 111 96 discriminator 1 view .LVU242
 1250 0018 DFED087A 		vldr.32	s15, .L70
 1251 001c 28EE278A 		vmul.f32	s16, s16, s15
 111:./app/algorithm/src/ts_foc.c **** }
 1252              		.loc 1 111 3 discriminator 1 view .LVU243
 1253 0020 9FED070A 		vldr.32	s0, .L70+4
 1254 0024 88EE000A 		vdiv.f32	s0, s16, s0
 1255 0028 2846     		mov	r0, r5
 1256 002a FFF7FEFF 		bl	Pid_clac
 1257              	.LVL129:
 111:./app/algorithm/src/ts_foc.c **** }
 1258              		.loc 1 111 3 discriminator 2 view .LVU244
 1259 002e 2046     		mov	r0, r4
 1260 0030 FFF7FEFF 		bl	setTorque_Curr
 1261              	.LVL130:
 112:./app/algorithm/src/ts_foc.c **** 
 1262              		.loc 1 112 1 view .LVU245
 1263 0034 BDEC028B 		vldm	sp!, {d8}
 1264              	.LCFI31:
 1265              		.cfi_restore 80
 1266              		.cfi_restore 81
 1267              		.cfi_def_cfa_offset 16
 1268 0038 38BD     		pop	{r3, r4, r5, pc}
 1269              	.LVL131:
 1270              	.L71:
 112:./app/algorithm/src/ts_foc.c **** 
 1271              		.loc 1 112 1 view .LVU246
 1272 003a 00BF     		.align	2
 1273              	.L70:
 1274 003c 00003443 		.word	1127481344
 1275 0040 DB0F4940 		.word	1078530011
 1276              		.cfi_endproc
 1277              	.LFE260:
 1279              		.section	.text.set_Velocity_Curr,"ax",%progbits
 1280              		.align	1
 1281              		.global	set_Velocity_Curr
 1282              		.syntax unified
 1283              		.thumb
 1284              		.thumb_func
 1286              	set_Velocity_Curr:
 1287              	.LVL132:
 1288              	.LFB261:
 118:./app/algorithm/src/ts_foc.c ****   setTorque_Curr(motor,Pid_clac(motor->Pid_Vel,(Target-Get_filter_Velocity(motor))*180/PI)); 
 1289              		.loc 1 118 1 is_stmt 1 view -0
 1290              		.cfi_startproc
ARM GAS  /tmp/ccPOftzH.s 			page 28


 1291              		@ args = 0, pretend = 0, frame = 0
 1292              		@ frame_needed = 0, uses_anonymous_args = 0
 118:./app/algorithm/src/ts_foc.c ****   setTorque_Curr(motor,Pid_clac(motor->Pid_Vel,(Target-Get_filter_Velocity(motor))*180/PI)); 
 1293              		.loc 1 118 1 is_stmt 0 view .LVU248
 1294 0000 38B5     		push	{r3, r4, r5, lr}
 1295              	.LCFI32:
 1296              		.cfi_def_cfa_offset 16
 1297              		.cfi_offset 3, -16
 1298              		.cfi_offset 4, -12
 1299              		.cfi_offset 5, -8
 1300              		.cfi_offset 14, -4
 1301 0002 2DED028B 		vpush.64	{d8}
 1302              	.LCFI33:
 1303              		.cfi_def_cfa_offset 24
 1304              		.cfi_offset 80, -24
 1305              		.cfi_offset 81, -20
 1306 0006 0446     		mov	r4, r0
 1307 0008 B0EE408A 		vmov.f32	s16, s0
 119:./app/algorithm/src/ts_foc.c **** }
 1308              		.loc 1 119 3 is_stmt 1 view .LVU249
 1309 000c C56A     		ldr	r5, [r0, #44]
 119:./app/algorithm/src/ts_foc.c **** }
 1310              		.loc 1 119 56 is_stmt 0 view .LVU250
 1311 000e FFF7FEFF 		bl	Get_filter_Velocity
 1312              	.LVL133:
 119:./app/algorithm/src/ts_foc.c **** }
 1313              		.loc 1 119 55 discriminator 1 view .LVU251
 1314 0012 38EE408A 		vsub.f32	s16, s16, s0
 1315              	.LVL134:
 119:./app/algorithm/src/ts_foc.c **** }
 1316              		.loc 1 119 83 discriminator 1 view .LVU252
 1317 0016 DFED087A 		vldr.32	s15, .L74
 1318 001a 28EE278A 		vmul.f32	s16, s16, s15
 119:./app/algorithm/src/ts_foc.c **** }
 1319              		.loc 1 119 3 discriminator 1 view .LVU253
 1320 001e 9FED070A 		vldr.32	s0, .L74+4
 1321 0022 88EE000A 		vdiv.f32	s0, s16, s0
 1322 0026 2846     		mov	r0, r5
 1323 0028 FFF7FEFF 		bl	Pid_clac
 1324              	.LVL135:
 119:./app/algorithm/src/ts_foc.c **** }
 1325              		.loc 1 119 3 discriminator 2 view .LVU254
 1326 002c 2046     		mov	r0, r4
 1327 002e FFF7FEFF 		bl	setTorque_Curr
 1328              	.LVL136:
 120:./app/algorithm/src/ts_foc.c **** 
 1329              		.loc 1 120 1 view .LVU255
 1330 0032 BDEC028B 		vldm	sp!, {d8}
 1331              	.LCFI34:
 1332              		.cfi_restore 80
 1333              		.cfi_restore 81
 1334              		.cfi_def_cfa_offset 16
 1335 0036 38BD     		pop	{r3, r4, r5, pc}
 1336              	.LVL137:
 1337              	.L75:
 120:./app/algorithm/src/ts_foc.c **** 
 1338              		.loc 1 120 1 view .LVU256
ARM GAS  /tmp/ccPOftzH.s 			page 29


 1339              		.align	2
 1340              	.L74:
 1341 0038 00003443 		.word	1127481344
 1342 003c DB0F4940 		.word	1078530011
 1343              		.cfi_endproc
 1344              	.LFE261:
 1346              		.section	.text.set_Velocity_Angle_Curr,"ax",%progbits
 1347              		.align	1
 1348              		.global	set_Velocity_Angle_Curr
 1349              		.syntax unified
 1350              		.thumb
 1351              		.thumb_func
 1353              	set_Velocity_Angle_Curr:
 1354              	.LVL138:
 1355              	.LFB262:
 126:./app/algorithm/src/ts_foc.c ****   setTorque_Curr(motor,Pid_clac(motor->Pid_Vel,Pid_clac(motor->Pid_Ang,(Target-Get_AS5600_Angle(mot
 1356              		.loc 1 126 1 is_stmt 1 view -0
 1357              		.cfi_startproc
 1358              		@ args = 0, pretend = 0, frame = 0
 1359              		@ frame_needed = 0, uses_anonymous_args = 0
 126:./app/algorithm/src/ts_foc.c ****   setTorque_Curr(motor,Pid_clac(motor->Pid_Vel,Pid_clac(motor->Pid_Ang,(Target-Get_AS5600_Angle(mot
 1360              		.loc 1 126 1 is_stmt 0 view .LVU258
 1361 0000 70B5     		push	{r4, r5, r6, lr}
 1362              	.LCFI35:
 1363              		.cfi_def_cfa_offset 16
 1364              		.cfi_offset 4, -16
 1365              		.cfi_offset 5, -12
 1366              		.cfi_offset 6, -8
 1367              		.cfi_offset 14, -4
 1368 0002 2DED028B 		vpush.64	{d8}
 1369              	.LCFI36:
 1370              		.cfi_def_cfa_offset 24
 1371              		.cfi_offset 80, -24
 1372              		.cfi_offset 81, -20
 1373 0006 0446     		mov	r4, r0
 1374 0008 B0EE408A 		vmov.f32	s16, s0
 127:./app/algorithm/src/ts_foc.c **** }
 1375              		.loc 1 127 3 is_stmt 1 view .LVU259
 1376 000c C56A     		ldr	r5, [r0, #44]
 127:./app/algorithm/src/ts_foc.c **** }
 1377              		.loc 1 127 48 is_stmt 0 view .LVU260
 1378 000e 066B     		ldr	r6, [r0, #48]
 127:./app/algorithm/src/ts_foc.c **** }
 1379              		.loc 1 127 80 view .LVU261
 1380 0010 806A     		ldr	r0, [r0, #40]
 1381              	.LVL139:
 127:./app/algorithm/src/ts_foc.c **** }
 1382              		.loc 1 127 80 view .LVU262
 1383 0012 FFF7FEFF 		bl	Get_AS5600_Angle
 1384              	.LVL140:
 127:./app/algorithm/src/ts_foc.c **** }
 1385              		.loc 1 127 79 discriminator 1 view .LVU263
 1386 0016 38EE408A 		vsub.f32	s16, s16, s0
 1387              	.LVL141:
 127:./app/algorithm/src/ts_foc.c **** }
 1388              		.loc 1 127 119 discriminator 1 view .LVU264
 1389 001a DFED0D7A 		vldr.32	s15, .L78
ARM GAS  /tmp/ccPOftzH.s 			page 30


 1390 001e 28EE278A 		vmul.f32	s16, s16, s15
 127:./app/algorithm/src/ts_foc.c **** }
 1391              		.loc 1 127 48 discriminator 1 view .LVU265
 1392 0022 9FED0C0A 		vldr.32	s0, .L78+4
 1393 0026 88EE000A 		vdiv.f32	s0, s16, s0
 1394 002a 3046     		mov	r0, r6
 1395 002c FFF7FEFF 		bl	Pid_clac
 1396              	.LVL142:
 1397 0030 B0EE408A 		vmov.f32	s16, s0
 127:./app/algorithm/src/ts_foc.c **** }
 1398              		.loc 1 127 128 discriminator 2 view .LVU266
 1399 0034 2046     		mov	r0, r4
 1400 0036 FFF7FEFF 		bl	Get_filter_Velocity
 1401              	.LVL143:
 127:./app/algorithm/src/ts_foc.c **** }
 1402              		.loc 1 127 3 discriminator 3 view .LVU267
 1403 003a 38EE400A 		vsub.f32	s0, s16, s0
 1404 003e 2846     		mov	r0, r5
 1405 0040 FFF7FEFF 		bl	Pid_clac
 1406              	.LVL144:
 127:./app/algorithm/src/ts_foc.c **** }
 1407              		.loc 1 127 3 discriminator 4 view .LVU268
 1408 0044 2046     		mov	r0, r4
 1409 0046 FFF7FEFF 		bl	setTorque_Curr
 1410              	.LVL145:
 128:./app/algorithm/src/ts_foc.c **** 
 1411              		.loc 1 128 1 view .LVU269
 1412 004a BDEC028B 		vldm	sp!, {d8}
 1413              	.LCFI37:
 1414              		.cfi_restore 80
 1415              		.cfi_restore 81
 1416              		.cfi_def_cfa_offset 16
 1417 004e 70BD     		pop	{r4, r5, r6, pc}
 1418              	.LVL146:
 1419              	.L79:
 128:./app/algorithm/src/ts_foc.c **** 
 1420              		.loc 1 128 1 view .LVU270
 1421              		.align	2
 1422              	.L78:
 1423 0050 00003443 		.word	1127481344
 1424 0054 DB0F4940 		.word	1078530011
 1425              		.cfi_endproc
 1426              	.LFE262:
 1428              		.section	.rodata.auto_identify_motor_params.str1.4,"aMS",%progbits,1
 1429              		.align	2
 1430              	.LC1:
 1431 0000 E794B5E6 		.ascii	"\347\224\265\346\234\272\345\217\202\346\225\260\350"
 1431      9CBAE58F 
 1431      82E695B0 
 1431      E8
 1432 000d AF86E588 		.ascii	"\257\206\345\210\253\345\256\214\346\210\220\015\000"
 1432      ABE5AE8C 
 1432      E688900D 
 1432      00
 1433 001a 0000     		.align	2
 1434              	.LC2:
 1435 001c E8AF86E5 		.ascii	"\350\257\206\345\210\253\346\227\266\351\227\264: %"
ARM GAS  /tmp/ccPOftzH.s 			page 31


 1435      88ABE697 
 1435      B6E997B4 
 1435      3A2025
 1436 002b 6C75206D 		.ascii	"lu ms\015\012\000"
 1436      730D0A00 
 1437 0033 00       		.align	2
 1438              	.LC3:
 1439 0034 E794B5E9 		.ascii	"\347\224\265\351\230\273: %.3f Ohm\015\012\000"
 1439      98BB3A20 
 1439      252E3366 
 1439      204F686D 
 1439      0D0A00
 1440 0047 00       		.align	2
 1441              	.LC4:
 1442 0048 E794B5E6 		.ascii	"\347\224\265\346\204\237: %.3f H\015\012\000"
 1442      849F3A20 
 1442      252E3366 
 1442      20480D0A 
 1442      00
 1443 0059 000000   		.align	2
 1444              	.LC5:
 1445 005c E69E81E5 		.ascii	"\346\236\201\345\257\271\346\225\260: %d\015\012\000"
 1445      AFB9E695 
 1445      B03A2025 
 1445      640D0A00 
 1446              		.align	2
 1447              	.LC6:
 1448 006c E99BB6E7 		.ascii	"\351\233\266\347\224\265\350\247\222\345\272\246: %"
 1448      94B5E8A7 
 1448      92E5BAA6 
 1448      3A2025
 1449 007b 2E336620 		.ascii	".3f rad\015\012\000"
 1449      7261640D 
 1449      0A00
 1450 0085 000000   		.align	2
 1451              	.LC7:
 1452 0088 E69C80E5 		.ascii	"\346\234\200\345\244\247\347\224\265\346\265\201: %"
 1452      A4A7E794 
 1452      B5E6B581 
 1452      3A2025
 1453 0097 2E336620 		.ascii	".3f A\015\012\000"
 1453      410D0A00 
 1454 009f 00       		.align	2
 1455              	.LC8:
 1456 00a0 E69C80E5 		.ascii	"\346\234\200\345\244\247\347\224\265\345\216\213: %"
 1456      A4A7E794 
 1456      B5E58E8B 
 1456      3A2025
 1457 00af 2E336620 		.ascii	".3f V\015\012\000"
 1457      560D0A00 
 1458              		.section	.text.auto_identify_motor_params,"ax",%progbits
 1459              		.align	1
 1460              		.global	auto_identify_motor_params
 1461              		.syntax unified
 1462              		.thumb
 1463              		.thumb_func
 1465              	auto_identify_motor_params:
ARM GAS  /tmp/ccPOftzH.s 			page 32


 1466              	.LVL147:
 1467              	.LFB266:
 184:./app/algorithm/src/ts_foc.c **** 
 185:./app/algorithm/src/ts_foc.c **** /// @brief ç”µæœºå‚æ•°è‡ªåŠ¨è¯†åˆ«
 186:./app/algorithm/src/ts_foc.c **** /// @param motor ç”µæœºå¯¹è±¡
 187:./app/algorithm/src/ts_foc.c **** /// @param diagnostic è¯Šæ–­ä¿¡æ¯ç»“æž„ä½“
 188:./app/algorithm/src/ts_foc.c **** /// @return 0:æˆåŠŸ, -1:å¤±è´¥
 189:./app/algorithm/src/ts_foc.c **** int auto_identify_motor_params(Motor* motor) 
 190:./app/algorithm/src/ts_foc.c **** {
 1468              		.loc 1 190 1 is_stmt 1 view -0
 1469              		.cfi_startproc
 1470              		@ args = 0, pretend = 0, frame = 0
 1471              		@ frame_needed = 0, uses_anonymous_args = 0
 1472              		.loc 1 190 1 is_stmt 0 view .LVU272
 1473 0000 70B5     		push	{r4, r5, r6, lr}
 1474              	.LCFI38:
 1475              		.cfi_def_cfa_offset 16
 1476              		.cfi_offset 4, -16
 1477              		.cfi_offset 5, -12
 1478              		.cfi_offset 6, -8
 1479              		.cfi_offset 14, -4
 1480 0002 2DED028B 		vpush.64	{d8}
 1481              	.LCFI39:
 1482              		.cfi_def_cfa_offset 24
 1483              		.cfi_offset 80, -24
 1484              		.cfi_offset 81, -20
 191:./app/algorithm/src/ts_foc.c ****     int result = 0;  // è¿”å›žå€¼
 1485              		.loc 1 191 5 is_stmt 1 view .LVU273
 1486              	.LVL148:
 192:./app/algorithm/src/ts_foc.c ****     
 193:./app/algorithm/src/ts_foc.c ****     // å‚æ•°æ£€æŸ¥
 194:./app/algorithm/src/ts_foc.c ****     if(motor == NULL || motor->diagnostic == NULL) {
 1487              		.loc 1 194 5 view .LVU274
 1488              		.loc 1 194 7 is_stmt 0 view .LVU275
 1489 0006 0446     		mov	r4, r0
 1490 0008 0028     		cmp	r0, #0
 1491 000a 00F07281 		beq	.L102
 1492              		.loc 1 194 30 discriminator 1 view .LVU276
 1493 000e 406C     		ldr	r0, [r0, #68]
 1494              	.LVL149:
 1495              		.loc 1 194 22 discriminator 1 view .LVU277
 1496 0010 0028     		cmp	r0, #0
 1497 0012 00F07181 		beq	.L103
 1498              	.LBB2:
 195:./app/algorithm/src/ts_foc.c ****         result = -1;
 196:./app/algorithm/src/ts_foc.c ****     }
 197:./app/algorithm/src/ts_foc.c ****     else {
 198:./app/algorithm/src/ts_foc.c ****         // åˆå§‹åŒ–è¯Šæ–­ä¿¡æ¯
 199:./app/algorithm/src/ts_foc.c ****         memset(motor->diagnostic, 0, sizeof(MotorIdentifyDiagnostic));
 1499              		.loc 1 199 9 is_stmt 1 view .LVU278
 1500 0016 2422     		movs	r2, #36
 1501 0018 0021     		movs	r1, #0
 1502 001a FFF7FEFF 		bl	memset
 1503              	.LVL150:
 200:./app/algorithm/src/ts_foc.c ****         motor->diagnostic->state = MOTOR_IDENTIFY_RESISTANCE;
 1504              		.loc 1 200 9 view .LVU279
 1505              		.loc 1 200 14 is_stmt 0 view .LVU280
ARM GAS  /tmp/ccPOftzH.s 			page 33


 1506 001e 636C     		ldr	r3, [r4, #68]
 1507              		.loc 1 200 34 view .LVU281
 1508 0020 0125     		movs	r5, #1
 1509 0022 83F82050 		strb	r5, [r3, #32]
 201:./app/algorithm/src/ts_foc.c ****         motor->diagnostic->identify_time = tx_time_get();
 1510              		.loc 1 201 9 is_stmt 1 view .LVU282
 1511              		.loc 1 201 14 is_stmt 0 view .LVU283
 1512 0026 666C     		ldr	r6, [r4, #68]
 1513              		.loc 1 201 44 view .LVU284
 1514 0028 FFF7FEFF 		bl	_tx_time_get
 1515              	.LVL151:
 1516              		.loc 1 201 42 discriminator 1 view .LVU285
 1517 002c F061     		str	r0, [r6, #28]
 202:./app/algorithm/src/ts_foc.c ****         
 203:./app/algorithm/src/ts_foc.c ****         // å®‰å…¨é™å€¼
 204:./app/algorithm/src/ts_foc.c ****         const float MAX_CURRENT = 5.0f;      // æœ€å¤§ç”µæµé™åˆ¶
 1518              		.loc 1 204 9 is_stmt 1 view .LVU286
 1519              	.LVL152:
 205:./app/algorithm/src/ts_foc.c ****         const float MAX_VOLTAGE = 12.0f;     // æœ€å¤§ç”µåŽ‹é™åˆ¶
 1520              		.loc 1 205 9 view .LVU287
 206:./app/algorithm/src/ts_foc.c ****         const float MIN_CURRENT = 0.01f;     // æœ€å°æœ‰æ•ˆç”µæµ
 1521              		.loc 1 206 9 view .LVU288
 207:./app/algorithm/src/ts_foc.c ****         const uint32_t TIMEOUT_MS = 5000;    // è¶…æ—¶æ—¶é—´
 1522              		.loc 1 207 9 view .LVU289
 208:./app/algorithm/src/ts_foc.c ****         
 209:./app/algorithm/src/ts_foc.c ****         // 1. è¯†åˆ«ç”µæœºç”µé˜»
 210:./app/algorithm/src/ts_foc.c ****         if(result == 0) 
 1523              		.loc 1 210 9 view .LVU290
 1524              	.LBB3:
 211:./app/algorithm/src/ts_foc.c ****         {
 212:./app/algorithm/src/ts_foc.c ****             motor->diagnostic->state = MOTOR_IDENTIFY_RESISTANCE;
 1525              		.loc 1 212 13 view .LVU291
 1526              		.loc 1 212 18 is_stmt 0 view .LVU292
 1527 002e 636C     		ldr	r3, [r4, #68]
 1528              		.loc 1 212 38 view .LVU293
 1529 0030 83F82050 		strb	r5, [r3, #32]
 213:./app/algorithm/src/ts_foc.c ****             float voltage = 1.0f;  // åˆå§‹æµ‹è¯•ç”µåŽ‹
 1530              		.loc 1 213 13 is_stmt 1 view .LVU294
 1531              	.LVL153:
 214:./app/algorithm/src/ts_foc.c ****             float current = 0.0f;
 1532              		.loc 1 214 13 view .LVU295
 215:./app/algorithm/src/ts_foc.c ****             uint32_t start_time = tx_time_get();
 1533              		.loc 1 215 13 view .LVU296
 1534              		.loc 1 215 35 is_stmt 0 view .LVU297
 1535 0034 FFF7FEFF 		bl	_tx_time_get
 1536              	.LVL154:
 1537 0038 0646     		mov	r6, r0
 1538              	.LVL155:
 216:./app/algorithm/src/ts_foc.c ****             
 217:./app/algorithm/src/ts_foc.c ****             // æ¸è¿›å¼å¢žåŠ ç”µåŽ‹ï¼Œé¿å…ç”µæµçªå˜
 218:./app/algorithm/src/ts_foc.c ****             for(float v = 0.5f; v <= voltage && result == 0; v += 0.1f) {
 1539              		.loc 1 218 13 is_stmt 1 view .LVU298
 1540              	.LBB4:
 1541              		.loc 1 218 17 view .LVU299
 1542              		.loc 1 218 23 is_stmt 0 view .LVU300
 1543 003a B6EE008A 		vmov.f32	s16, #5.0e-1
 1544              	.LBE4:
ARM GAS  /tmp/ccPOftzH.s 			page 34


 214:./app/algorithm/src/ts_foc.c ****             uint32_t start_time = tx_time_get();
 1545              		.loc 1 214 19 view .LVU301
 1546 003e DFEDB08A 		vldr.32	s17, .L116
 1547              	.LBE3:
 1548              	.LBE2:
 191:./app/algorithm/src/ts_foc.c ****     
 1549              		.loc 1 191 9 view .LVU302
 1550 0042 0025     		movs	r5, #0
 1551              	.LBB22:
 1552              	.LBB6:
 1553              	.LBB5:
 1554              		.loc 1 218 13 view .LVU303
 1555 0044 03E0     		b	.L82
 1556              	.LVL156:
 1557              	.L85:
 1558              		.loc 1 218 64 is_stmt 1 discriminator 2 view .LVU304
 1559 0046 DFEDAF7A 		vldr.32	s15, .L116+4
 1560 004a 38EE278A 		vadd.f32	s16, s16, s15
 1561              	.LVL157:
 1562              	.L82:
 1563              		.loc 1 218 46 discriminator 1 view .LVU305
 1564 004e F7EE007A 		vmov.f32	s15, #1.0e+0
 1565 0052 B4EEE78A 		vcmpe.f32	s16, s15
 1566 0056 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1567 005a 32D8     		bhi	.L86
 1568              		.loc 1 218 46 is_stmt 0 discriminator 3 view .LVU306
 1569 005c 8DBB     		cbnz	r5, .L86
 219:./app/algorithm/src/ts_foc.c ****                 setTorque(motor, v, 0.0f);
 1570              		.loc 1 219 17 is_stmt 1 view .LVU307
 1571 005e DFEDA80A 		vldr.32	s1, .L116
 1572 0062 B0EE480A 		vmov.f32	s0, s16
 1573 0066 2046     		mov	r0, r4
 1574 0068 FFF7FEFF 		bl	setTorque
 1575              	.LVL158:
 220:./app/algorithm/src/ts_foc.c ****                 tx_thread_sleep(10);
 1576              		.loc 1 220 17 view .LVU308
 1577 006c 0A20     		movs	r0, #10
 1578 006e FFF7FEFF 		bl	_tx_thread_sleep
 1579              	.LVL159:
 221:./app/algorithm/src/ts_foc.c ****                 current = Get_Current(motor);
 1580              		.loc 1 221 17 view .LVU309
 1581              		.loc 1 221 27 is_stmt 0 view .LVU310
 1582 0072 2046     		mov	r0, r4
 1583 0074 FFF7FEFF 		bl	Get_Current
 1584              	.LVL160:
 1585 0078 F0EE408A 		vmov.f32	s17, s0
 1586              	.LVL161:
 222:./app/algorithm/src/ts_foc.c ****                 
 223:./app/algorithm/src/ts_foc.c ****                 // ç”µæµç›‘æŽ§
 224:./app/algorithm/src/ts_foc.c ****                 if(fabs(current) > MAX_CURRENT) {
 1587              		.loc 1 224 17 is_stmt 1 view .LVU311
 1588              		.loc 1 224 20 is_stmt 0 view .LVU312
 1589 007c B0EEC07A 		vabs.f32	s14, s0
 1590              		.loc 1 224 19 view .LVU313
 1591 0080 F1EE047A 		vmov.f32	s15, #5.0e+0
 1592 0084 B4EEE77A 		vcmpe.f32	s14, s15
 1593 0088 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
ARM GAS  /tmp/ccPOftzH.s 			page 35


 1594 008c 08DD     		ble	.L83
 225:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->error_code = 0x01;  // ç”µæµè¶…é™
 1595              		.loc 1 225 21 is_stmt 1 view .LVU314
 1596              		.loc 1 225 26 is_stmt 0 view .LVU315
 1597 008e 636C     		ldr	r3, [r4, #68]
 1598              		.loc 1 225 51 view .LVU316
 1599 0090 0122     		movs	r2, #1
 1600 0092 1A60     		str	r2, [r3]
 226:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 1601              		.loc 1 226 21 is_stmt 1 view .LVU317
 1602              		.loc 1 226 26 is_stmt 0 view .LVU318
 1603 0094 636C     		ldr	r3, [r4, #68]
 1604              		.loc 1 226 46 view .LVU319
 1605 0096 0622     		movs	r2, #6
 1606 0098 83F82020 		strb	r2, [r3, #32]
 227:./app/algorithm/src/ts_foc.c ****                     result = -1;
 1607              		.loc 1 227 21 is_stmt 1 view .LVU320
 1608              	.LVL162:
 1609              		.loc 1 227 28 is_stmt 0 view .LVU321
 1610 009c 4FF0FF35 		mov	r5, #-1
 1611              	.LVL163:
 1612              	.L83:
 228:./app/algorithm/src/ts_foc.c ****                 }
 229:./app/algorithm/src/ts_foc.c ****                 
 230:./app/algorithm/src/ts_foc.c ****                 // è¶…æ—¶æ£€æŸ¥
 231:./app/algorithm/src/ts_foc.c ****                 if(tx_time_get() - start_time > TIMEOUT_MS) {
 1613              		.loc 1 231 17 is_stmt 1 view .LVU322
 1614              		.loc 1 231 20 is_stmt 0 view .LVU323
 1615 00a0 FFF7FEFF 		bl	_tx_time_get
 1616              	.LVL164:
 1617              		.loc 1 231 34 discriminator 1 view .LVU324
 1618 00a4 831B     		subs	r3, r0, r6
 1619              		.loc 1 231 19 discriminator 1 view .LVU325
 1620 00a6 41F28832 		movw	r2, #5000
 1621 00aa 9342     		cmp	r3, r2
 1622 00ac CBD9     		bls	.L85
 232:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->error_code = 0x02;  // è¯†åˆ«è¶…æ—¶
 1623              		.loc 1 232 21 is_stmt 1 view .LVU326
 1624              		.loc 1 232 26 is_stmt 0 view .LVU327
 1625 00ae 636C     		ldr	r3, [r4, #68]
 1626              		.loc 1 232 51 view .LVU328
 1627 00b0 0222     		movs	r2, #2
 1628 00b2 1A60     		str	r2, [r3]
 233:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 1629              		.loc 1 233 21 is_stmt 1 view .LVU329
 1630              		.loc 1 233 26 is_stmt 0 view .LVU330
 1631 00b4 636C     		ldr	r3, [r4, #68]
 1632              		.loc 1 233 46 view .LVU331
 1633 00b6 0622     		movs	r2, #6
 1634 00b8 83F82020 		strb	r2, [r3, #32]
 234:./app/algorithm/src/ts_foc.c ****                     result = -1;
 1635              		.loc 1 234 21 is_stmt 1 view .LVU332
 1636              	.LVL165:
 1637              		.loc 1 234 28 is_stmt 0 view .LVU333
 1638 00bc 4FF0FF35 		mov	r5, #-1
 1639 00c0 C1E7     		b	.L85
 1640              	.LVL166:
ARM GAS  /tmp/ccPOftzH.s 			page 36


 1641              	.L86:
 1642              		.loc 1 234 28 view .LVU334
 1643              	.LBE5:
 235:./app/algorithm/src/ts_foc.c ****                 }
 236:./app/algorithm/src/ts_foc.c ****             }
 237:./app/algorithm/src/ts_foc.c ****             
 238:./app/algorithm/src/ts_foc.c ****             if(result == 0) 
 1644              		.loc 1 238 13 is_stmt 1 view .LVU335
 1645              		.loc 1 238 15 is_stmt 0 view .LVU336
 1646 00c2 002D     		cmp	r5, #0
 1647 00c4 61D1     		bne	.L89
 239:./app/algorithm/src/ts_foc.c ****             {
 240:./app/algorithm/src/ts_foc.c ****                 if(fabs(current) < MIN_CURRENT) {
 1648              		.loc 1 240 17 is_stmt 1 view .LVU337
 1649              		.loc 1 240 20 is_stmt 0 view .LVU338
 1650 00c6 F0EEE87A 		vabs.f32	s15, s17
 1651              		.loc 1 240 19 view .LVU339
 1652 00ca 9FED8F7A 		vldr.32	s14, .L116+8
 1653 00ce F4EEC77A 		vcmpe.f32	s15, s14
 1654 00d2 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1655 00d6 11D4     		bmi	.L112
 241:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->error_code = 0x03;  // ç”µæµå¤ªå°
 242:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 243:./app/algorithm/src/ts_foc.c ****                     result = -1;
 244:./app/algorithm/src/ts_foc.c ****                 }
 245:./app/algorithm/src/ts_foc.c ****                 else {
 246:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->resistance = voltage / current;
 1656              		.loc 1 246 21 is_stmt 1 view .LVU340
 1657              		.loc 1 246 26 is_stmt 0 view .LVU341
 1658 00d8 636C     		ldr	r3, [r4, #68]
 1659              		.loc 1 246 61 view .LVU342
 1660 00da F7EE006A 		vmov.f32	s13, #1.0e+0
 1661 00de 86EEA87A 		vdiv.f32	s14, s13, s17
 1662              		.loc 1 246 51 view .LVU343
 1663 00e2 83ED017A 		vstr.32	s14, [r3, #4]
 247:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->max_current = fabs(current);
 1664              		.loc 1 247 21 is_stmt 1 view .LVU344
 1665              		.loc 1 247 26 is_stmt 0 view .LVU345
 1666 00e6 636C     		ldr	r3, [r4, #68]
 1667              		.loc 1 247 52 view .LVU346
 1668 00e8 C3ED057A 		vstr.32	s15, [r3, #20]
 1669              		.loc 1 247 52 view .LVU347
 1670              	.LBE6:
 248:./app/algorithm/src/ts_foc.c ****                 }
 249:./app/algorithm/src/ts_foc.c ****             }
 250:./app/algorithm/src/ts_foc.c ****         }
 251:./app/algorithm/src/ts_foc.c ****         
 252:./app/algorithm/src/ts_foc.c ****         // 2. è¯†åˆ«ç”µæœºç”µæ„Ÿ
 253:./app/algorithm/src/ts_foc.c ****         if(result == 0) 
 1671              		.loc 1 253 9 is_stmt 1 view .LVU348
 1672              	.LBB7:
 254:./app/algorithm/src/ts_foc.c ****         {
 255:./app/algorithm/src/ts_foc.c ****             motor->diagnostic->state = MOTOR_IDENTIFY_INDUCTANCE;
 1673              		.loc 1 255 13 view .LVU349
 1674              		.loc 1 255 18 is_stmt 0 view .LVU350
 1675 00ec 636C     		ldr	r3, [r4, #68]
 1676              		.loc 1 255 38 view .LVU351
ARM GAS  /tmp/ccPOftzH.s 			page 37


 1677 00ee 0222     		movs	r2, #2
 1678 00f0 83F82020 		strb	r2, [r3, #32]
 256:./app/algorithm/src/ts_foc.c ****             float voltage = 2.0f;
 1679              		.loc 1 256 13 is_stmt 1 view .LVU352
 1680              	.LVL167:
 257:./app/algorithm/src/ts_foc.c ****             float current1 = 0.0f;
 1681              		.loc 1 257 13 view .LVU353
 258:./app/algorithm/src/ts_foc.c ****             float current2 = 0.0f;
 1682              		.loc 1 258 13 view .LVU354
 259:./app/algorithm/src/ts_foc.c ****             
 260:./app/algorithm/src/ts_foc.c ****             // å¤šæ¬¡æµ‹é‡å–å¹³å‡å€¼
 261:./app/algorithm/src/ts_foc.c ****             float inductance_sum = 0.0f;
 1683              		.loc 1 261 13 view .LVU355
 262:./app/algorithm/src/ts_foc.c ****             const int MEASURE_COUNT = 5;
 1684              		.loc 1 262 13 view .LVU356
 263:./app/algorithm/src/ts_foc.c ****             
 264:./app/algorithm/src/ts_foc.c ****             for(int i = 0; i < MEASURE_COUNT && result == 0; i++) 
 1685              		.loc 1 264 13 view .LVU357
 1686              	.LBB8:
 1687              		.loc 1 264 17 view .LVU358
 1688              		.loc 1 264 21 is_stmt 0 view .LVU359
 1689 00f4 2E46     		mov	r6, r5
 1690              	.LVL168:
 1691              		.loc 1 264 21 view .LVU360
 1692              	.LBE8:
 261:./app/algorithm/src/ts_foc.c ****             const int MEASURE_COUNT = 5;
 1693              		.loc 1 261 19 view .LVU361
 1694 00f6 DFED828A 		vldr.32	s17, .L116
 1695              	.LVL169:
 1696              	.LBB10:
 1697              		.loc 1 264 13 view .LVU362
 1698 00fa 0AE0     		b	.L92
 1699              	.LVL170:
 1700              	.L112:
 1701              		.loc 1 264 13 view .LVU363
 1702              	.LBE10:
 1703              	.LBE7:
 1704              	.LBB12:
 241:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 1705              		.loc 1 241 21 is_stmt 1 view .LVU364
 241:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 1706              		.loc 1 241 26 is_stmt 0 view .LVU365
 1707 00fc 636C     		ldr	r3, [r4, #68]
 241:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 1708              		.loc 1 241 51 view .LVU366
 1709 00fe 0322     		movs	r2, #3
 1710 0100 1A60     		str	r2, [r3]
 242:./app/algorithm/src/ts_foc.c ****                     result = -1;
 1711              		.loc 1 242 21 is_stmt 1 view .LVU367
 242:./app/algorithm/src/ts_foc.c ****                     result = -1;
 1712              		.loc 1 242 26 is_stmt 0 view .LVU368
 1713 0102 636C     		ldr	r3, [r4, #68]
 242:./app/algorithm/src/ts_foc.c ****                     result = -1;
 1714              		.loc 1 242 46 view .LVU369
 1715 0104 0622     		movs	r2, #6
 1716 0106 83F82020 		strb	r2, [r3, #32]
 243:./app/algorithm/src/ts_foc.c ****                 }
ARM GAS  /tmp/ccPOftzH.s 			page 38


 1717              		.loc 1 243 21 is_stmt 1 view .LVU370
 1718              	.LVL171:
 243:./app/algorithm/src/ts_foc.c ****                 }
 1719              		.loc 1 243 21 is_stmt 0 view .LVU371
 1720              	.LBE12:
 253:./app/algorithm/src/ts_foc.c ****         {
 1721              		.loc 1 253 9 is_stmt 1 view .LVU372
 265:./app/algorithm/src/ts_foc.c ****             {
 266:./app/algorithm/src/ts_foc.c ****                 setTorque(motor, voltage, 0.0f);
 267:./app/algorithm/src/ts_foc.c ****                 current1 = Get_Current(motor);
 268:./app/algorithm/src/ts_foc.c ****                 tx_thread_sleep(10);
 269:./app/algorithm/src/ts_foc.c ****                 current2 = Get_Current(motor);
 270:./app/algorithm/src/ts_foc.c ****                 
 271:./app/algorithm/src/ts_foc.c ****                 float di_dt = (current2 - current1) / 0.01f;
 272:./app/algorithm/src/ts_foc.c ****                 inductance_sum += voltage / di_dt;
 273:./app/algorithm/src/ts_foc.c ****                 
 274:./app/algorithm/src/ts_foc.c ****                 // ç”µæµç›‘æŽ§
 275:./app/algorithm/src/ts_foc.c ****                 if(fabs(current2) > MAX_CURRENT) {
 276:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->error_code = 0x04;
 277:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 278:./app/algorithm/src/ts_foc.c ****                     result = -1;
 279:./app/algorithm/src/ts_foc.c ****                 }
 280:./app/algorithm/src/ts_foc.c ****             }
 281:./app/algorithm/src/ts_foc.c ****             
 282:./app/algorithm/src/ts_foc.c ****             if(result == 0) {
 283:./app/algorithm/src/ts_foc.c ****                 motor->diagnostic->inductance = inductance_sum / MEASURE_COUNT;
 284:./app/algorithm/src/ts_foc.c ****             }
 285:./app/algorithm/src/ts_foc.c ****         }
 286:./app/algorithm/src/ts_foc.c ****         
 287:./app/algorithm/src/ts_foc.c ****         // 3. è¯†åˆ«ç”µæœºæžå¯¹æ•°
 288:./app/algorithm/src/ts_foc.c ****         if(result == 0) 
 1722              		.loc 1 288 9 view .LVU373
 1723              	.LBB13:
 242:./app/algorithm/src/ts_foc.c ****                     result = -1;
 1724              		.loc 1 242 46 is_stmt 0 view .LVU374
 1725 010a 4FF0FF35 		mov	r5, #-1
 1726 010e 3DE0     		b	.L81
 1727              	.LVL172:
 1728              	.L93:
 242:./app/algorithm/src/ts_foc.c ****                     result = -1;
 1729              		.loc 1 242 46 view .LVU375
 1730              	.LBE13:
 1731              	.LBB14:
 1732              	.LBB11:
 264:./app/algorithm/src/ts_foc.c ****             {
 1733              		.loc 1 264 63 is_stmt 1 discriminator 2 view .LVU376
 1734 0110 0136     		adds	r6, r6, #1
 1735              	.LVL173:
 1736              	.L92:
 264:./app/algorithm/src/ts_foc.c ****             {
 1737              		.loc 1 264 46 discriminator 1 view .LVU377
 1738 0112 042E     		cmp	r6, #4
 1739 0114 31DC     		bgt	.L95
 264:./app/algorithm/src/ts_foc.c ****             {
 1740              		.loc 1 264 46 is_stmt 0 discriminator 3 view .LVU378
 1741 0116 85BB     		cbnz	r5, .L95
 1742              	.LBB9:
ARM GAS  /tmp/ccPOftzH.s 			page 39


 266:./app/algorithm/src/ts_foc.c ****                 current1 = Get_Current(motor);
 1743              		.loc 1 266 17 is_stmt 1 view .LVU379
 1744 0118 DFED790A 		vldr.32	s1, .L116
 1745 011c B0EE000A 		vmov.f32	s0, #2.0e+0
 1746 0120 2046     		mov	r0, r4
 1747 0122 FFF7FEFF 		bl	setTorque
 1748              	.LVL174:
 267:./app/algorithm/src/ts_foc.c ****                 tx_thread_sleep(10);
 1749              		.loc 1 267 17 view .LVU380
 267:./app/algorithm/src/ts_foc.c ****                 tx_thread_sleep(10);
 1750              		.loc 1 267 28 is_stmt 0 view .LVU381
 1751 0126 2046     		mov	r0, r4
 1752 0128 FFF7FEFF 		bl	Get_Current
 1753              	.LVL175:
 1754 012c B0EE408A 		vmov.f32	s16, s0
 1755              	.LVL176:
 268:./app/algorithm/src/ts_foc.c ****                 current2 = Get_Current(motor);
 1756              		.loc 1 268 17 is_stmt 1 view .LVU382
 1757 0130 0A20     		movs	r0, #10
 1758 0132 FFF7FEFF 		bl	_tx_thread_sleep
 1759              	.LVL177:
 269:./app/algorithm/src/ts_foc.c ****                 
 1760              		.loc 1 269 17 view .LVU383
 269:./app/algorithm/src/ts_foc.c ****                 
 1761              		.loc 1 269 28 is_stmt 0 view .LVU384
 1762 0136 2046     		mov	r0, r4
 1763 0138 FFF7FEFF 		bl	Get_Current
 1764              	.LVL178:
 271:./app/algorithm/src/ts_foc.c ****                 inductance_sum += voltage / di_dt;
 1765              		.loc 1 271 17 is_stmt 1 view .LVU385
 271:./app/algorithm/src/ts_foc.c ****                 inductance_sum += voltage / di_dt;
 1766              		.loc 1 271 41 is_stmt 0 view .LVU386
 1767 013c 30EE488A 		vsub.f32	s16, s0, s16
 1768              	.LVL179:
 271:./app/algorithm/src/ts_foc.c ****                 inductance_sum += voltage / di_dt;
 1769              		.loc 1 271 23 view .LVU387
 1770 0140 DFED717A 		vldr.32	s15, .L116+8
 1771 0144 88EE277A 		vdiv.f32	s14, s16, s15
 1772              	.LVL180:
 272:./app/algorithm/src/ts_foc.c ****                 
 1773              		.loc 1 272 17 is_stmt 1 view .LVU388
 272:./app/algorithm/src/ts_foc.c ****                 
 1774              		.loc 1 272 43 is_stmt 0 view .LVU389
 1775 0148 F0EE006A 		vmov.f32	s13, #2.0e+0
 1776 014c C6EE877A 		vdiv.f32	s15, s13, s14
 272:./app/algorithm/src/ts_foc.c ****                 
 1777              		.loc 1 272 32 view .LVU390
 1778 0150 78EEA78A 		vadd.f32	s17, s17, s15
 1779              	.LVL181:
 275:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->error_code = 0x04;
 1780              		.loc 1 275 17 is_stmt 1 view .LVU391
 275:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->error_code = 0x04;
 1781              		.loc 1 275 20 is_stmt 0 view .LVU392
 1782 0154 B0EEC00A 		vabs.f32	s0, s0
 1783              	.LVL182:
 275:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->error_code = 0x04;
 1784              		.loc 1 275 19 view .LVU393
ARM GAS  /tmp/ccPOftzH.s 			page 40


 1785 0158 F1EE047A 		vmov.f32	s15, #5.0e+0
 1786 015c B4EEE70A 		vcmpe.f32	s0, s15
 1787 0160 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1788 0164 D4DD     		ble	.L93
 276:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 1789              		.loc 1 276 21 is_stmt 1 view .LVU394
 276:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 1790              		.loc 1 276 26 is_stmt 0 view .LVU395
 1791 0166 636C     		ldr	r3, [r4, #68]
 276:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 1792              		.loc 1 276 51 view .LVU396
 1793 0168 0422     		movs	r2, #4
 1794 016a 1A60     		str	r2, [r3]
 277:./app/algorithm/src/ts_foc.c ****                     result = -1;
 1795              		.loc 1 277 21 is_stmt 1 view .LVU397
 277:./app/algorithm/src/ts_foc.c ****                     result = -1;
 1796              		.loc 1 277 26 is_stmt 0 view .LVU398
 1797 016c 636C     		ldr	r3, [r4, #68]
 277:./app/algorithm/src/ts_foc.c ****                     result = -1;
 1798              		.loc 1 277 46 view .LVU399
 1799 016e 0622     		movs	r2, #6
 1800 0170 83F82020 		strb	r2, [r3, #32]
 278:./app/algorithm/src/ts_foc.c ****                 }
 1801              		.loc 1 278 21 is_stmt 1 view .LVU400
 1802              	.LVL183:
 278:./app/algorithm/src/ts_foc.c ****                 }
 1803              		.loc 1 278 28 is_stmt 0 view .LVU401
 1804 0174 4FF0FF35 		mov	r5, #-1
 1805 0178 CAE7     		b	.L93
 1806              	.LVL184:
 1807              	.L95:
 278:./app/algorithm/src/ts_foc.c ****                 }
 1808              		.loc 1 278 28 view .LVU402
 1809              	.LBE9:
 1810              	.LBE11:
 282:./app/algorithm/src/ts_foc.c ****                 motor->diagnostic->inductance = inductance_sum / MEASURE_COUNT;
 1811              		.loc 1 282 13 is_stmt 1 view .LVU403
 282:./app/algorithm/src/ts_foc.c ****                 motor->diagnostic->inductance = inductance_sum / MEASURE_COUNT;
 1812              		.loc 1 282 15 is_stmt 0 view .LVU404
 1813 017a 3DB9     		cbnz	r5, .L81
 283:./app/algorithm/src/ts_foc.c ****             }
 1814              		.loc 1 283 17 is_stmt 1 view .LVU405
 283:./app/algorithm/src/ts_foc.c ****             }
 1815              		.loc 1 283 22 is_stmt 0 view .LVU406
 1816 017c 636C     		ldr	r3, [r4, #68]
 283:./app/algorithm/src/ts_foc.c ****             }
 1817              		.loc 1 283 64 view .LVU407
 1818 017e B1EE047A 		vmov.f32	s14, #5.0e+0
 1819 0182 C8EE877A 		vdiv.f32	s15, s17, s14
 283:./app/algorithm/src/ts_foc.c ****             }
 1820              		.loc 1 283 47 view .LVU408
 1821 0186 C3ED027A 		vstr.32	s15, [r3, #8]
 1822              	.LVL185:
 1823              	.L89:
 283:./app/algorithm/src/ts_foc.c ****             }
 1824              		.loc 1 283 47 view .LVU409
 1825              	.LBE14:
ARM GAS  /tmp/ccPOftzH.s 			page 41


 1826              		.loc 1 288 9 is_stmt 1 view .LVU410
 1827              		.loc 1 288 11 is_stmt 0 view .LVU411
 1828 018a 55B1     		cbz	r5, .L113
 1829              	.LVL186:
 1830              	.L81:
 1831              		.loc 1 288 11 view .LVU412
 1832              	.LBE22:
 289:./app/algorithm/src/ts_foc.c ****         {
 290:./app/algorithm/src/ts_foc.c ****             motor->diagnostic->state = MOTOR_IDENTIFY_POLE_PAIRS;
 291:./app/algorithm/src/ts_foc.c ****             float voltage = 3.0f;
 292:./app/algorithm/src/ts_foc.c ****             float angle1 = Get_AS5600_Angle(motor->As5600_Sensor);
 293:./app/algorithm/src/ts_foc.c ****             
 294:./app/algorithm/src/ts_foc.c ****             // æ¸è¿›å¼å¢žåŠ ç”µåŽ‹
 295:./app/algorithm/src/ts_foc.c ****             for(float v = 1.0f; v <= voltage && result == 0; v += 0.5f) 
 296:./app/algorithm/src/ts_foc.c ****             {
 297:./app/algorithm/src/ts_foc.c ****                 setTorque(motor, v, 0.0f);
 298:./app/algorithm/src/ts_foc.c ****                 tx_thread_sleep(100);
 299:./app/algorithm/src/ts_foc.c ****             }
 300:./app/algorithm/src/ts_foc.c ****             
 301:./app/algorithm/src/ts_foc.c ****             if(result == 0) 
 302:./app/algorithm/src/ts_foc.c ****             {
 303:./app/algorithm/src/ts_foc.c ****                 tx_thread_sleep(1000);
 304:./app/algorithm/src/ts_foc.c ****                 float angle2 = Get_AS5600_Angle(motor->As5600_Sensor);
 305:./app/algorithm/src/ts_foc.c ****                 float angle_diff = fabs(angle2 - angle1);
 306:./app/algorithm/src/ts_foc.c ****                 
 307:./app/algorithm/src/ts_foc.c ****                 if(angle_diff < 0.1f) 
 308:./app/algorithm/src/ts_foc.c ****                 {
 309:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->error_code = 0x05;  // è§’åº¦å˜åŒ–å¤ªå°
 310:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 311:./app/algorithm/src/ts_foc.c ****                     result = -1;
 312:./app/algorithm/src/ts_foc.c ****                 }
 313:./app/algorithm/src/ts_foc.c ****                 else {
 314:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->pole_pairs = (int)(2.0f * PI / angle_diff + 0.5f);
 315:./app/algorithm/src/ts_foc.c ****                 }
 316:./app/algorithm/src/ts_foc.c ****             }
 317:./app/algorithm/src/ts_foc.c ****         }
 318:./app/algorithm/src/ts_foc.c ****         
 319:./app/algorithm/src/ts_foc.c ****         // 4. è¯†åˆ«é›¶ç”µè§’åº¦
 320:./app/algorithm/src/ts_foc.c ****         if(result == 0) 
 321:./app/algorithm/src/ts_foc.c ****         {
 322:./app/algorithm/src/ts_foc.c ****             motor->diagnostic->state = MOTOR_IDENTIFY_ZERO_ANGLE;
 323:./app/algorithm/src/ts_foc.c ****             if(aligns_Motor_Zero_Angle(motor) != 0) {
 324:./app/algorithm/src/ts_foc.c ****                 motor->diagnostic->error_code = 0x06;  // é›¶ç”µè§’åº¦è¯†åˆ«å¤±è´¥
 325:./app/algorithm/src/ts_foc.c ****                 motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 326:./app/algorithm/src/ts_foc.c ****                 result = -1;
 327:./app/algorithm/src/ts_foc.c ****             }
 328:./app/algorithm/src/ts_foc.c ****             else 
 329:./app/algorithm/src/ts_foc.c ****             {
 330:./app/algorithm/src/ts_foc.c ****                 motor->diagnostic->zero_angle = motor->zero_electric_angle;
 331:./app/algorithm/src/ts_foc.c ****             }
 332:./app/algorithm/src/ts_foc.c ****         }
 333:./app/algorithm/src/ts_foc.c ****         
 334:./app/algorithm/src/ts_foc.c ****         // æ›´æ–°ç”µæœºå‚æ•°
 335:./app/algorithm/src/ts_foc.c ****         if(result == 0) 
 336:./app/algorithm/src/ts_foc.c ****         {
 337:./app/algorithm/src/ts_foc.c ****             motor->PP = motor->diagnostic->pole_pairs;
 338:./app/algorithm/src/ts_foc.c ****             motor->zero_electric_angle = motor->diagnostic->zero_angle;
ARM GAS  /tmp/ccPOftzH.s 			page 42


 339:./app/algorithm/src/ts_foc.c ****             
 340:./app/algorithm/src/ts_foc.c ****             // å®Œæˆè¯†åˆ«
 341:./app/algorithm/src/ts_foc.c ****             motor->diagnostic->state = MOTOR_IDENTIFY_COMPLETE;
 342:./app/algorithm/src/ts_foc.c ****             motor->diagnostic->identify_time = tx_time_get() - motor->diagnostic->identify_time;
 343:./app/algorithm/src/ts_foc.c ****             
 344:./app/algorithm/src/ts_foc.c ****             // è¾“å‡ºè¯Šæ–­ä¿¡æ¯
 345:./app/algorithm/src/ts_foc.c ****             printf("ç”µæœºå‚æ•°è¯†åˆ«å®Œæˆ\r\n");
 346:./app/algorithm/src/ts_foc.c ****             printf("è¯†åˆ«æ—¶é—´: %lu ms\r\n", motor->diagnostic->identify_time);
 347:./app/algorithm/src/ts_foc.c ****             printf("ç”µé˜»: %.3f Ohm\r\n", motor->diagnostic->resistance);
 348:./app/algorithm/src/ts_foc.c ****             printf("ç”µæ„Ÿ: %.3f H\r\n", motor->diagnostic->inductance);
 349:./app/algorithm/src/ts_foc.c ****             printf("æžå¯¹æ•°: %d\r\n", motor->diagnostic->pole_pairs);
 350:./app/algorithm/src/ts_foc.c ****             printf("é›¶ç”µè§’åº¦: %.3f rad\r\n", motor->diagnostic->zero_angle);
 351:./app/algorithm/src/ts_foc.c ****             printf("æœ€å¤§ç”µæµ: %.3f A\r\n", motor->diagnostic->max_current);
 352:./app/algorithm/src/ts_foc.c ****             printf("æœ€å¤§ç”µåŽ‹: %.3f V\r\n", motor->diagnostic->max_voltage);
 353:./app/algorithm/src/ts_foc.c ****         }
 354:./app/algorithm/src/ts_foc.c ****     }
 355:./app/algorithm/src/ts_foc.c ****     
 356:./app/algorithm/src/ts_foc.c ****     // ç¡®ä¿ç”µæœºåœæ­¢
 357:./app/algorithm/src/ts_foc.c ****     setTorque(motor, 0.0f, 0.0f);
 1833              		.loc 1 357 5 is_stmt 1 view .LVU413
 1834 018c 9FED5C0A 		vldr.32	s0, .L116
 1835 0190 F0EE400A 		vmov.f32	s1, s0
 1836 0194 2046     		mov	r0, r4
 1837 0196 FFF7FEFF 		bl	setTorque
 1838              	.LVL187:
 358:./app/algorithm/src/ts_foc.c ****     
 359:./app/algorithm/src/ts_foc.c ****     return result;
 1839              		.loc 1 359 5 view .LVU414
 360:./app/algorithm/src/ts_foc.c **** }
 1840              		.loc 1 360 1 is_stmt 0 view .LVU415
 1841 019a 2846     		mov	r0, r5
 1842 019c BDEC028B 		vldm	sp!, {d8}
 1843              	.LCFI40:
 1844              		.cfi_remember_state
 1845              		.cfi_restore 80
 1846              		.cfi_restore 81
 1847              		.cfi_def_cfa_offset 16
 1848 01a0 70BD     		pop	{r4, r5, r6, pc}
 1849              	.LVL188:
 1850              	.L113:
 1851              	.LCFI41:
 1852              		.cfi_restore_state
 1853              	.LBB23:
 1854              	.LBB15:
 290:./app/algorithm/src/ts_foc.c ****             float voltage = 3.0f;
 1855              		.loc 1 290 13 is_stmt 1 view .LVU416
 290:./app/algorithm/src/ts_foc.c ****             float voltage = 3.0f;
 1856              		.loc 1 290 18 is_stmt 0 view .LVU417
 1857 01a2 636C     		ldr	r3, [r4, #68]
 290:./app/algorithm/src/ts_foc.c ****             float voltage = 3.0f;
 1858              		.loc 1 290 38 view .LVU418
 1859 01a4 0322     		movs	r2, #3
 1860 01a6 83F82020 		strb	r2, [r3, #32]
 291:./app/algorithm/src/ts_foc.c ****             float angle1 = Get_AS5600_Angle(motor->As5600_Sensor);
 1861              		.loc 1 291 13 is_stmt 1 view .LVU419
 1862              	.LVL189:
 292:./app/algorithm/src/ts_foc.c ****             
ARM GAS  /tmp/ccPOftzH.s 			page 43


 1863              		.loc 1 292 13 view .LVU420
 292:./app/algorithm/src/ts_foc.c ****             
 1864              		.loc 1 292 28 is_stmt 0 view .LVU421
 1865 01aa A06A     		ldr	r0, [r4, #40]
 1866 01ac FFF7FEFF 		bl	Get_AS5600_Angle
 1867              	.LVL190:
 1868 01b0 F0EE408A 		vmov.f32	s17, s0
 1869              	.LVL191:
 295:./app/algorithm/src/ts_foc.c ****             {
 1870              		.loc 1 295 13 is_stmt 1 view .LVU422
 1871              	.LBB16:
 295:./app/algorithm/src/ts_foc.c ****             {
 1872              		.loc 1 295 17 view .LVU423
 295:./app/algorithm/src/ts_foc.c ****             {
 1873              		.loc 1 295 23 is_stmt 0 view .LVU424
 1874 01b4 B7EE008A 		vmov.f32	s16, #1.0e+0
 295:./app/algorithm/src/ts_foc.c ****             {
 1875              		.loc 1 295 13 view .LVU425
 1876 01b8 0DE0     		b	.L97
 1877              	.LVL192:
 1878              	.L98:
 297:./app/algorithm/src/ts_foc.c ****                 tx_thread_sleep(100);
 1879              		.loc 1 297 17 is_stmt 1 view .LVU426
 1880 01ba DFED510A 		vldr.32	s1, .L116
 1881 01be B0EE480A 		vmov.f32	s0, s16
 1882 01c2 2046     		mov	r0, r4
 1883 01c4 FFF7FEFF 		bl	setTorque
 1884              	.LVL193:
 298:./app/algorithm/src/ts_foc.c ****             }
 1885              		.loc 1 298 17 view .LVU427
 1886 01c8 6420     		movs	r0, #100
 1887 01ca FFF7FEFF 		bl	_tx_thread_sleep
 1888              	.LVL194:
 295:./app/algorithm/src/ts_foc.c ****             {
 1889              		.loc 1 295 64 discriminator 4 view .LVU428
 1890 01ce F6EE007A 		vmov.f32	s15, #5.0e-1
 1891 01d2 38EE278A 		vadd.f32	s16, s16, s15
 1892              	.LVL195:
 1893              	.L97:
 295:./app/algorithm/src/ts_foc.c ****             {
 1894              		.loc 1 295 46 discriminator 1 view .LVU429
 1895 01d6 F0EE087A 		vmov.f32	s15, #3.0e+0
 1896 01da B4EEE78A 		vcmpe.f32	s16, s15
 1897 01de F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1898 01e2 EAD9     		bls	.L98
 1899              	.LBE16:
 301:./app/algorithm/src/ts_foc.c ****             {
 1900              		.loc 1 301 13 view .LVU430
 1901              	.LBB17:
 303:./app/algorithm/src/ts_foc.c ****                 float angle2 = Get_AS5600_Angle(motor->As5600_Sensor);
 1902              		.loc 1 303 17 view .LVU431
 1903 01e4 4FF47A70 		mov	r0, #1000
 1904 01e8 FFF7FEFF 		bl	_tx_thread_sleep
 1905              	.LVL196:
 304:./app/algorithm/src/ts_foc.c ****                 float angle_diff = fabs(angle2 - angle1);
 1906              		.loc 1 304 17 view .LVU432
 304:./app/algorithm/src/ts_foc.c ****                 float angle_diff = fabs(angle2 - angle1);
ARM GAS  /tmp/ccPOftzH.s 			page 44


 1907              		.loc 1 304 32 is_stmt 0 view .LVU433
 1908 01ec A06A     		ldr	r0, [r4, #40]
 1909 01ee FFF7FEFF 		bl	Get_AS5600_Angle
 1910              	.LVL197:
 305:./app/algorithm/src/ts_foc.c ****                 
 1911              		.loc 1 305 17 is_stmt 1 view .LVU434
 305:./app/algorithm/src/ts_foc.c ****                 
 1912              		.loc 1 305 48 is_stmt 0 view .LVU435
 1913 01f2 70EE687A 		vsub.f32	s15, s0, s17
 305:./app/algorithm/src/ts_foc.c ****                 
 1914              		.loc 1 305 23 view .LVU436
 1915 01f6 F0EEE77A 		vabs.f32	s15, s15
 1916              	.LVL198:
 307:./app/algorithm/src/ts_foc.c ****                 {
 1917              		.loc 1 307 17 is_stmt 1 view .LVU437
 307:./app/algorithm/src/ts_foc.c ****                 {
 1918              		.loc 1 307 19 is_stmt 0 view .LVU438
 1919 01fa 9FED427A 		vldr.32	s14, .L116+4
 1920 01fe F4EEC77A 		vcmpe.f32	s15, s14
 1921 0202 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1922 0206 61D4     		bmi	.L114
 314:./app/algorithm/src/ts_foc.c ****                 }
 1923              		.loc 1 314 21 is_stmt 1 view .LVU439
 314:./app/algorithm/src/ts_foc.c ****                 }
 1924              		.loc 1 314 69 is_stmt 0 view .LVU440
 1925 0208 DFED406A 		vldr.32	s13, .L116+12
 1926 020c 86EEA77A 		vdiv.f32	s14, s13, s15
 314:./app/algorithm/src/ts_foc.c ****                 }
 1927              		.loc 1 314 82 view .LVU441
 1928 0210 F6EE007A 		vmov.f32	s15, #5.0e-1
 1929              	.LVL199:
 314:./app/algorithm/src/ts_foc.c ****                 }
 1930              		.loc 1 314 82 view .LVU442
 1931 0214 77EE277A 		vadd.f32	s15, s14, s15
 314:./app/algorithm/src/ts_foc.c ****                 }
 1932              		.loc 1 314 26 view .LVU443
 1933 0218 636C     		ldr	r3, [r4, #68]
 314:./app/algorithm/src/ts_foc.c ****                 }
 1934              		.loc 1 314 53 view .LVU444
 1935 021a FDEEE77A 		vcvt.s32.f32	s15, s15
 314:./app/algorithm/src/ts_foc.c ****                 }
 1936              		.loc 1 314 51 view .LVU445
 1937 021e C3ED037A 		vstr.32	s15, [r3, #12]	@ int
 314:./app/algorithm/src/ts_foc.c ****                 }
 1938              		.loc 1 314 51 view .LVU446
 1939              	.LBE17:
 1940              	.LBE15:
 320:./app/algorithm/src/ts_foc.c ****         {
 1941              		.loc 1 320 9 is_stmt 1 view .LVU447
 322:./app/algorithm/src/ts_foc.c ****             if(aligns_Motor_Zero_Angle(motor) != 0) {
 1942              		.loc 1 322 13 view .LVU448
 322:./app/algorithm/src/ts_foc.c ****             if(aligns_Motor_Zero_Angle(motor) != 0) {
 1943              		.loc 1 322 18 is_stmt 0 view .LVU449
 1944 0222 636C     		ldr	r3, [r4, #68]
 322:./app/algorithm/src/ts_foc.c ****             if(aligns_Motor_Zero_Angle(motor) != 0) {
 1945              		.loc 1 322 38 view .LVU450
 1946 0224 0422     		movs	r2, #4
ARM GAS  /tmp/ccPOftzH.s 			page 45


 1947 0226 83F82020 		strb	r2, [r3, #32]
 323:./app/algorithm/src/ts_foc.c ****                 motor->diagnostic->error_code = 0x06;  // é›¶ç”µè§’åº¦è¯†åˆ«å¤±è´¥
 1948              		.loc 1 323 13 is_stmt 1 view .LVU451
 323:./app/algorithm/src/ts_foc.c ****                 motor->diagnostic->error_code = 0x06;  // é›¶ç”µè§’åº¦è¯†åˆ«å¤±è´¥
 1949              		.loc 1 323 16 is_stmt 0 view .LVU452
 1950 022a 2046     		mov	r0, r4
 1951 022c FFF7FEFF 		bl	aligns_Motor_Zero_Angle
 1952              	.LVL200:
 323:./app/algorithm/src/ts_foc.c ****                 motor->diagnostic->error_code = 0x06;  // é›¶ç”µè§’åº¦è¯†åˆ«å¤±è´¥
 1953              		.loc 1 323 15 discriminator 1 view .LVU453
 1954 0230 0028     		cmp	r0, #0
 1955 0232 55D1     		bne	.L115
 330:./app/algorithm/src/ts_foc.c ****             }
 1956              		.loc 1 330 17 is_stmt 1 view .LVU454
 330:./app/algorithm/src/ts_foc.c ****             }
 1957              		.loc 1 330 22 is_stmt 0 view .LVU455
 1958 0234 636C     		ldr	r3, [r4, #68]
 330:./app/algorithm/src/ts_foc.c ****             }
 1959              		.loc 1 330 54 view .LVU456
 1960 0236 2269     		ldr	r2, [r4, #16]	@ float
 330:./app/algorithm/src/ts_foc.c ****             }
 1961              		.loc 1 330 47 view .LVU457
 1962 0238 1A61     		str	r2, [r3, #16]	@ float
 335:./app/algorithm/src/ts_foc.c ****         {
 1963              		.loc 1 335 9 is_stmt 1 view .LVU458
 337:./app/algorithm/src/ts_foc.c ****             motor->zero_electric_angle = motor->diagnostic->zero_angle;
 1964              		.loc 1 337 13 view .LVU459
 337:./app/algorithm/src/ts_foc.c ****             motor->zero_electric_angle = motor->diagnostic->zero_angle;
 1965              		.loc 1 337 30 is_stmt 0 view .LVU460
 1966 023a 636C     		ldr	r3, [r4, #68]
 337:./app/algorithm/src/ts_foc.c ****             motor->zero_electric_angle = motor->diagnostic->zero_angle;
 1967              		.loc 1 337 42 view .LVU461
 1968 023c DA68     		ldr	r2, [r3, #12]
 337:./app/algorithm/src/ts_foc.c ****             motor->zero_electric_angle = motor->diagnostic->zero_angle;
 1969              		.loc 1 337 23 view .LVU462
 1970 023e 6260     		str	r2, [r4, #4]
 338:./app/algorithm/src/ts_foc.c ****             
 1971              		.loc 1 338 13 is_stmt 1 view .LVU463
 338:./app/algorithm/src/ts_foc.c ****             
 1972              		.loc 1 338 59 is_stmt 0 view .LVU464
 1973 0240 1A69     		ldr	r2, [r3, #16]	@ float
 338:./app/algorithm/src/ts_foc.c ****             
 1974              		.loc 1 338 40 view .LVU465
 1975 0242 2261     		str	r2, [r4, #16]	@ float
 341:./app/algorithm/src/ts_foc.c ****             motor->diagnostic->identify_time = tx_time_get() - motor->diagnostic->identify_time;
 1976              		.loc 1 341 13 is_stmt 1 view .LVU466
 341:./app/algorithm/src/ts_foc.c ****             motor->diagnostic->identify_time = tx_time_get() - motor->diagnostic->identify_time;
 1977              		.loc 1 341 38 is_stmt 0 view .LVU467
 1978 0244 0522     		movs	r2, #5
 1979 0246 83F82020 		strb	r2, [r3, #32]
 342:./app/algorithm/src/ts_foc.c ****             
 1980              		.loc 1 342 13 is_stmt 1 view .LVU468
 342:./app/algorithm/src/ts_foc.c ****             
 1981              		.loc 1 342 48 is_stmt 0 view .LVU469
 1982 024a FFF7FEFF 		bl	_tx_time_get
 1983              	.LVL201:
 342:./app/algorithm/src/ts_foc.c ****             
ARM GAS  /tmp/ccPOftzH.s 			page 46


 1984              		.loc 1 342 69 discriminator 1 view .LVU470
 1985 024e 636C     		ldr	r3, [r4, #68]
 342:./app/algorithm/src/ts_foc.c ****             
 1986              		.loc 1 342 81 discriminator 1 view .LVU471
 1987 0250 DA69     		ldr	r2, [r3, #28]
 342:./app/algorithm/src/ts_foc.c ****             
 1988              		.loc 1 342 62 discriminator 1 view .LVU472
 1989 0252 801A     		subs	r0, r0, r2
 342:./app/algorithm/src/ts_foc.c ****             
 1990              		.loc 1 342 46 discriminator 1 view .LVU473
 1991 0254 D861     		str	r0, [r3, #28]
 345:./app/algorithm/src/ts_foc.c ****             printf("è¯†åˆ«æ—¶é—´: %lu ms\r\n", motor->diagnostic->identify_time);
 1992              		.loc 1 345 13 is_stmt 1 view .LVU474
 1993 0256 2E48     		ldr	r0, .L116+16
 1994 0258 FFF7FEFF 		bl	puts
 1995              	.LVL202:
 346:./app/algorithm/src/ts_foc.c ****             printf("ç”µé˜»: %.3f Ohm\r\n", motor->diagnostic->resistance);
 1996              		.loc 1 346 13 view .LVU475
 346:./app/algorithm/src/ts_foc.c ****             printf("ç”µé˜»: %.3f Ohm\r\n", motor->diagnostic->resistance);
 1997              		.loc 1 346 53 is_stmt 0 view .LVU476
 1998 025c 636C     		ldr	r3, [r4, #68]
 346:./app/algorithm/src/ts_foc.c ****             printf("ç”µé˜»: %.3f Ohm\r\n", motor->diagnostic->resistance);
 1999              		.loc 1 346 13 view .LVU477
 2000 025e D969     		ldr	r1, [r3, #28]
 2001 0260 2C48     		ldr	r0, .L116+20
 2002 0262 FFF7FEFF 		bl	printf
 2003              	.LVL203:
 347:./app/algorithm/src/ts_foc.c ****             printf("ç”µæ„Ÿ: %.3f H\r\n", motor->diagnostic->inductance);
 2004              		.loc 1 347 13 is_stmt 1 view .LVU478
 347:./app/algorithm/src/ts_foc.c ****             printf("ç”µæ„Ÿ: %.3f H\r\n", motor->diagnostic->inductance);
 2005              		.loc 1 347 49 is_stmt 0 view .LVU479
 2006 0266 636C     		ldr	r3, [r4, #68]
 347:./app/algorithm/src/ts_foc.c ****             printf("ç”µæ„Ÿ: %.3f H\r\n", motor->diagnostic->inductance);
 2007              		.loc 1 347 13 view .LVU480
 2008 0268 5868     		ldr	r0, [r3, #4]	@ float
 2009 026a FFF7FEFF 		bl	__aeabi_f2d
 2010              	.LVL204:
 2011 026e 0246     		mov	r2, r0
 2012 0270 0B46     		mov	r3, r1
 2013 0272 2948     		ldr	r0, .L116+24
 2014 0274 FFF7FEFF 		bl	printf
 2015              	.LVL205:
 348:./app/algorithm/src/ts_foc.c ****             printf("æžå¯¹æ•°: %d\r\n", motor->diagnostic->pole_pairs);
 2016              		.loc 1 348 13 is_stmt 1 view .LVU481
 348:./app/algorithm/src/ts_foc.c ****             printf("æžå¯¹æ•°: %d\r\n", motor->diagnostic->pole_pairs);
 2017              		.loc 1 348 47 is_stmt 0 view .LVU482
 2018 0278 636C     		ldr	r3, [r4, #68]
 348:./app/algorithm/src/ts_foc.c ****             printf("æžå¯¹æ•°: %d\r\n", motor->diagnostic->pole_pairs);
 2019              		.loc 1 348 13 view .LVU483
 2020 027a 9868     		ldr	r0, [r3, #8]	@ float
 2021 027c FFF7FEFF 		bl	__aeabi_f2d
 2022              	.LVL206:
 2023 0280 0246     		mov	r2, r0
 2024 0282 0B46     		mov	r3, r1
 2025 0284 2548     		ldr	r0, .L116+28
 2026 0286 FFF7FEFF 		bl	printf
 2027              	.LVL207:
ARM GAS  /tmp/ccPOftzH.s 			page 47


 349:./app/algorithm/src/ts_foc.c ****             printf("é›¶ç”µè§’åº¦: %.3f rad\r\n", motor->diagnostic->zero_angle);
 2028              		.loc 1 349 13 is_stmt 1 view .LVU484
 349:./app/algorithm/src/ts_foc.c ****             printf("é›¶ç”µè§’åº¦: %.3f rad\r\n", motor->diagnostic->zero_angle);
 2029              		.loc 1 349 46 is_stmt 0 view .LVU485
 2030 028a 636C     		ldr	r3, [r4, #68]
 349:./app/algorithm/src/ts_foc.c ****             printf("é›¶ç”µè§’åº¦: %.3f rad\r\n", motor->diagnostic->zero_angle);
 2031              		.loc 1 349 13 view .LVU486
 2032 028c D968     		ldr	r1, [r3, #12]
 2033 028e 2448     		ldr	r0, .L116+32
 2034 0290 FFF7FEFF 		bl	printf
 2035              	.LVL208:
 350:./app/algorithm/src/ts_foc.c ****             printf("æœ€å¤§ç”µæµ: %.3f A\r\n", motor->diagnostic->max_current);
 2036              		.loc 1 350 13 is_stmt 1 view .LVU487
 350:./app/algorithm/src/ts_foc.c ****             printf("æœ€å¤§ç”µæµ: %.3f A\r\n", motor->diagnostic->max_current);
 2037              		.loc 1 350 55 is_stmt 0 view .LVU488
 2038 0294 636C     		ldr	r3, [r4, #68]
 350:./app/algorithm/src/ts_foc.c ****             printf("æœ€å¤§ç”µæµ: %.3f A\r\n", motor->diagnostic->max_current);
 2039              		.loc 1 350 13 view .LVU489
 2040 0296 1869     		ldr	r0, [r3, #16]	@ float
 2041 0298 FFF7FEFF 		bl	__aeabi_f2d
 2042              	.LVL209:
 2043 029c 0246     		mov	r2, r0
 2044 029e 0B46     		mov	r3, r1
 2045 02a0 2048     		ldr	r0, .L116+36
 2046 02a2 FFF7FEFF 		bl	printf
 2047              	.LVL210:
 351:./app/algorithm/src/ts_foc.c ****             printf("æœ€å¤§ç”µåŽ‹: %.3f V\r\n", motor->diagnostic->max_voltage);
 2048              		.loc 1 351 13 is_stmt 1 view .LVU490
 351:./app/algorithm/src/ts_foc.c ****             printf("æœ€å¤§ç”µåŽ‹: %.3f V\r\n", motor->diagnostic->max_voltage);
 2049              		.loc 1 351 53 is_stmt 0 view .LVU491
 2050 02a6 636C     		ldr	r3, [r4, #68]
 351:./app/algorithm/src/ts_foc.c ****             printf("æœ€å¤§ç”µåŽ‹: %.3f V\r\n", motor->diagnostic->max_voltage);
 2051              		.loc 1 351 13 view .LVU492
 2052 02a8 5869     		ldr	r0, [r3, #20]	@ float
 2053 02aa FFF7FEFF 		bl	__aeabi_f2d
 2054              	.LVL211:
 2055 02ae 0246     		mov	r2, r0
 2056 02b0 0B46     		mov	r3, r1
 2057 02b2 1D48     		ldr	r0, .L116+40
 2058 02b4 FFF7FEFF 		bl	printf
 2059              	.LVL212:
 352:./app/algorithm/src/ts_foc.c ****         }
 2060              		.loc 1 352 13 is_stmt 1 view .LVU493
 352:./app/algorithm/src/ts_foc.c ****         }
 2061              		.loc 1 352 53 is_stmt 0 view .LVU494
 2062 02b8 636C     		ldr	r3, [r4, #68]
 352:./app/algorithm/src/ts_foc.c ****         }
 2063              		.loc 1 352 13 view .LVU495
 2064 02ba 9869     		ldr	r0, [r3, #24]	@ float
 2065 02bc FFF7FEFF 		bl	__aeabi_f2d
 2066              	.LVL213:
 2067 02c0 0246     		mov	r2, r0
 2068 02c2 0B46     		mov	r3, r1
 2069 02c4 1948     		ldr	r0, .L116+44
 2070 02c6 FFF7FEFF 		bl	printf
 2071              	.LVL214:
 2072 02ca 5FE7     		b	.L81
ARM GAS  /tmp/ccPOftzH.s 			page 48


 2073              	.LVL215:
 2074              	.L114:
 2075              	.LBB20:
 2076              	.LBB18:
 309:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 2077              		.loc 1 309 21 is_stmt 1 view .LVU496
 309:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 2078              		.loc 1 309 26 is_stmt 0 view .LVU497
 2079 02cc 636C     		ldr	r3, [r4, #68]
 309:./app/algorithm/src/ts_foc.c ****                     motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 2080              		.loc 1 309 51 view .LVU498
 2081 02ce 0522     		movs	r2, #5
 2082 02d0 1A60     		str	r2, [r3]
 310:./app/algorithm/src/ts_foc.c ****                     result = -1;
 2083              		.loc 1 310 21 is_stmt 1 view .LVU499
 310:./app/algorithm/src/ts_foc.c ****                     result = -1;
 2084              		.loc 1 310 26 is_stmt 0 view .LVU500
 2085 02d2 636C     		ldr	r3, [r4, #68]
 310:./app/algorithm/src/ts_foc.c ****                     result = -1;
 2086              		.loc 1 310 46 view .LVU501
 2087 02d4 0622     		movs	r2, #6
 2088 02d6 83F82020 		strb	r2, [r3, #32]
 311:./app/algorithm/src/ts_foc.c ****                 }
 2089              		.loc 1 311 21 is_stmt 1 view .LVU502
 2090              	.LVL216:
 311:./app/algorithm/src/ts_foc.c ****                 }
 2091              		.loc 1 311 21 is_stmt 0 view .LVU503
 2092              	.LBE18:
 2093              	.LBE20:
 320:./app/algorithm/src/ts_foc.c ****         {
 2094              		.loc 1 320 9 is_stmt 1 view .LVU504
 2095              	.LBB21:
 2096              	.LBB19:
 311:./app/algorithm/src/ts_foc.c ****                 }
 2097              		.loc 1 311 28 is_stmt 0 view .LVU505
 2098 02da 4FF0FF35 		mov	r5, #-1
 2099 02de 55E7     		b	.L81
 2100              	.LVL217:
 2101              	.L115:
 311:./app/algorithm/src/ts_foc.c ****                 }
 2102              		.loc 1 311 28 view .LVU506
 2103              	.LBE19:
 2104              	.LBE21:
 324:./app/algorithm/src/ts_foc.c ****                 motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 2105              		.loc 1 324 17 is_stmt 1 view .LVU507
 324:./app/algorithm/src/ts_foc.c ****                 motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 2106              		.loc 1 324 22 is_stmt 0 view .LVU508
 2107 02e0 626C     		ldr	r2, [r4, #68]
 324:./app/algorithm/src/ts_foc.c ****                 motor->diagnostic->state = MOTOR_IDENTIFY_ERROR;
 2108              		.loc 1 324 47 view .LVU509
 2109 02e2 0623     		movs	r3, #6
 2110 02e4 1360     		str	r3, [r2]
 325:./app/algorithm/src/ts_foc.c ****                 result = -1;
 2111              		.loc 1 325 17 is_stmt 1 view .LVU510
 325:./app/algorithm/src/ts_foc.c ****                 result = -1;
 2112              		.loc 1 325 22 is_stmt 0 view .LVU511
 2113 02e6 626C     		ldr	r2, [r4, #68]
ARM GAS  /tmp/ccPOftzH.s 			page 49


 325:./app/algorithm/src/ts_foc.c ****                 result = -1;
 2114              		.loc 1 325 42 view .LVU512
 2115 02e8 82F82030 		strb	r3, [r2, #32]
 326:./app/algorithm/src/ts_foc.c ****             }
 2116              		.loc 1 326 17 is_stmt 1 view .LVU513
 2117              	.LVL218:
 335:./app/algorithm/src/ts_foc.c ****         {
 2118              		.loc 1 335 9 view .LVU514
 326:./app/algorithm/src/ts_foc.c ****             }
 2119              		.loc 1 326 24 is_stmt 0 view .LVU515
 2120 02ec 4FF0FF35 		mov	r5, #-1
 2121 02f0 4CE7     		b	.L81
 2122              	.LVL219:
 2123              	.L102:
 326:./app/algorithm/src/ts_foc.c ****             }
 2124              		.loc 1 326 24 view .LVU516
 2125              	.LBE23:
 195:./app/algorithm/src/ts_foc.c ****     }
 2126              		.loc 1 195 16 view .LVU517
 2127 02f2 4FF0FF35 		mov	r5, #-1
 2128 02f6 49E7     		b	.L81
 2129              	.LVL220:
 2130              	.L103:
 195:./app/algorithm/src/ts_foc.c ****     }
 2131              		.loc 1 195 16 view .LVU518
 2132 02f8 4FF0FF35 		mov	r5, #-1
 2133 02fc 46E7     		b	.L81
 2134              	.L117:
 2135 02fe 00BF     		.align	2
 2136              	.L116:
 2137 0300 00000000 		.word	0
 2138 0304 CDCCCC3D 		.word	1036831949
 2139 0308 0AD7233C 		.word	1008981770
 2140 030c DB0FC940 		.word	1086918619
 2141 0310 00000000 		.word	.LC1
 2142 0314 1C000000 		.word	.LC2
 2143 0318 34000000 		.word	.LC3
 2144 031c 48000000 		.word	.LC4
 2145 0320 5C000000 		.word	.LC5
 2146 0324 6C000000 		.word	.LC6
 2147 0328 88000000 		.word	.LC7
 2148 032c A0000000 		.word	.LC8
 2149              		.cfi_endproc
 2150              	.LFE266:
 2152              		.section	.text.Motor1_Set_Compare1,"ax",%progbits
 2153              		.align	1
 2154              		.weak	Motor1_Set_Compare1
 2155              		.syntax unified
 2156              		.thumb
 2157              		.thumb_func
 2159              	Motor1_Set_Compare1:
 2160              	.LVL221:
 2161              	.LFB267:
 361:./app/algorithm/src/ts_foc.c **** 
 362:./app/algorithm/src/ts_foc.c **** 
 363:./app/algorithm/src/ts_foc.c **** 
 364:./app/algorithm/src/ts_foc.c **** 
ARM GAS  /tmp/ccPOftzH.s 			page 50


 365:./app/algorithm/src/ts_foc.c **** 
 366:./app/algorithm/src/ts_foc.c **** 
 367:./app/algorithm/src/ts_foc.c **** 
 368:./app/algorithm/src/ts_foc.c **** 
 369:./app/algorithm/src/ts_foc.c **** 
 370:./app/algorithm/src/ts_foc.c **** 
 371:./app/algorithm/src/ts_foc.c **** 
 372:./app/algorithm/src/ts_foc.c **** 
 373:./app/algorithm/src/ts_foc.c **** 
 374:./app/algorithm/src/ts_foc.c **** /// @brief è®¾ç½®ç”µæœº1é€šé“1pwmè¾“å‡ºå ç©ºæ¯”
 375:./app/algorithm/src/ts_foc.c **** /// @param compare å ç©ºæ¯”å€¼
 376:./app/algorithm/src/ts_foc.c **** void __attribute__((weak)) Motor1_Set_Compare1(uint32_t compare) 
 377:./app/algorithm/src/ts_foc.c **** {
 2162              		.loc 1 377 1 is_stmt 1 view -0
 2163              		.cfi_startproc
 2164              		@ args = 0, pretend = 0, frame = 0
 2165              		@ frame_needed = 0, uses_anonymous_args = 0
 2166              		@ link register save eliminated.
 378:./app/algorithm/src/ts_foc.c ****     __HAL_TIM_SetCompare(&htim4, TIM_CHANNEL_4, compare);
 2167              		.loc 1 378 5 view .LVU520
 2168 0000 014B     		ldr	r3, .L119
 2169 0002 1B68     		ldr	r3, [r3]
 2170 0004 1864     		str	r0, [r3, #64]
 379:./app/algorithm/src/ts_foc.c **** }
 2171              		.loc 1 379 1 is_stmt 0 view .LVU521
 2172 0006 7047     		bx	lr
 2173              	.L120:
 2174              		.align	2
 2175              	.L119:
 2176 0008 00000000 		.word	htim4
 2177              		.cfi_endproc
 2178              	.LFE267:
 2180              		.section	.text.Motor1_Set_Compare2,"ax",%progbits
 2181              		.align	1
 2182              		.weak	Motor1_Set_Compare2
 2183              		.syntax unified
 2184              		.thumb
 2185              		.thumb_func
 2187              	Motor1_Set_Compare2:
 2188              	.LVL222:
 2189              	.LFB268:
 380:./app/algorithm/src/ts_foc.c **** 
 381:./app/algorithm/src/ts_foc.c **** /// @brief è®¾ç½®ç”µæœº1é€šé“2pwmè¾“å‡ºå ç©ºæ¯”
 382:./app/algorithm/src/ts_foc.c **** /// @param compare å ç©ºæ¯”å€¼
 383:./app/algorithm/src/ts_foc.c **** void __attribute__((weak)) Motor1_Set_Compare2(uint32_t compare) 
 384:./app/algorithm/src/ts_foc.c **** {
 2190              		.loc 1 384 1 is_stmt 1 view -0
 2191              		.cfi_startproc
 2192              		@ args = 0, pretend = 0, frame = 0
 2193              		@ frame_needed = 0, uses_anonymous_args = 0
 2194              		@ link register save eliminated.
 385:./app/algorithm/src/ts_foc.c ****     __HAL_TIM_SetCompare(&htim8, TIM_CHANNEL_1, compare);
 2195              		.loc 1 385 5 view .LVU523
 2196 0000 014B     		ldr	r3, .L122
 2197 0002 1B68     		ldr	r3, [r3]
 2198 0004 5863     		str	r0, [r3, #52]
 386:./app/algorithm/src/ts_foc.c **** }
ARM GAS  /tmp/ccPOftzH.s 			page 51


 2199              		.loc 1 386 1 is_stmt 0 view .LVU524
 2200 0006 7047     		bx	lr
 2201              	.L123:
 2202              		.align	2
 2203              	.L122:
 2204 0008 00000000 		.word	htim8
 2205              		.cfi_endproc
 2206              	.LFE268:
 2208              		.section	.text.Motor1_Set_Compare3,"ax",%progbits
 2209              		.align	1
 2210              		.weak	Motor1_Set_Compare3
 2211              		.syntax unified
 2212              		.thumb
 2213              		.thumb_func
 2215              	Motor1_Set_Compare3:
 2216              	.LVL223:
 2217              	.LFB269:
 387:./app/algorithm/src/ts_foc.c **** 
 388:./app/algorithm/src/ts_foc.c **** /// @brief è®¾ç½®ç”µæœº1é€šé“3pwmè¾“å‡ºå ç©ºæ¯”
 389:./app/algorithm/src/ts_foc.c **** /// @param compare å ç©ºæ¯”å€¼
 390:./app/algorithm/src/ts_foc.c **** void __attribute__((weak)) Motor1_Set_Compare3(uint32_t compare) 
 391:./app/algorithm/src/ts_foc.c **** {
 2218              		.loc 1 391 1 is_stmt 1 view -0
 2219              		.cfi_startproc
 2220              		@ args = 0, pretend = 0, frame = 0
 2221              		@ frame_needed = 0, uses_anonymous_args = 0
 2222              		@ link register save eliminated.
 392:./app/algorithm/src/ts_foc.c ****     __HAL_TIM_SetCompare(&htim8, TIM_CHANNEL_2, compare);
 2223              		.loc 1 392 5 view .LVU526
 2224 0000 014B     		ldr	r3, .L125
 2225 0002 1B68     		ldr	r3, [r3]
 2226 0004 9863     		str	r0, [r3, #56]
 393:./app/algorithm/src/ts_foc.c **** }
 2227              		.loc 1 393 1 is_stmt 0 view .LVU527
 2228 0006 7047     		bx	lr
 2229              	.L126:
 2230              		.align	2
 2231              	.L125:
 2232 0008 00000000 		.word	htim8
 2233              		.cfi_endproc
 2234              	.LFE269:
 2236              		.section	.text.Motor2_Set_Compare1,"ax",%progbits
 2237              		.align	1
 2238              		.weak	Motor2_Set_Compare1
 2239              		.syntax unified
 2240              		.thumb
 2241              		.thumb_func
 2243              	Motor2_Set_Compare1:
 2244              	.LVL224:
 2245              	.LFB270:
 394:./app/algorithm/src/ts_foc.c **** 
 395:./app/algorithm/src/ts_foc.c **** /// @brief è®¾ç½®ç”µæœº2é€šé“1pwmè¾“å‡ºå ç©ºæ¯”
 396:./app/algorithm/src/ts_foc.c **** /// @param compare å ç©ºæ¯”å€¼
 397:./app/algorithm/src/ts_foc.c **** void __attribute__((weak)) Motor2_Set_Compare1(uint32_t compare) 
 398:./app/algorithm/src/ts_foc.c **** {
 2246              		.loc 1 398 1 is_stmt 1 view -0
 2247              		.cfi_startproc
ARM GAS  /tmp/ccPOftzH.s 			page 52


 2248              		@ args = 0, pretend = 0, frame = 0
 2249              		@ frame_needed = 0, uses_anonymous_args = 0
 2250              		@ link register save eliminated.
 399:./app/algorithm/src/ts_foc.c ****     __HAL_TIM_SetCompare(&htim4, TIM_CHANNEL_3, compare);
 2251              		.loc 1 399 5 view .LVU529
 2252 0000 014B     		ldr	r3, .L128
 2253 0002 1B68     		ldr	r3, [r3]
 2254 0004 D863     		str	r0, [r3, #60]
 400:./app/algorithm/src/ts_foc.c **** }
 2255              		.loc 1 400 1 is_stmt 0 view .LVU530
 2256 0006 7047     		bx	lr
 2257              	.L129:
 2258              		.align	2
 2259              	.L128:
 2260 0008 00000000 		.word	htim4
 2261              		.cfi_endproc
 2262              	.LFE270:
 2264              		.section	.text.Motor2_Set_Compare2,"ax",%progbits
 2265              		.align	1
 2266              		.weak	Motor2_Set_Compare2
 2267              		.syntax unified
 2268              		.thumb
 2269              		.thumb_func
 2271              	Motor2_Set_Compare2:
 2272              	.LVL225:
 2273              	.LFB271:
 401:./app/algorithm/src/ts_foc.c **** 
 402:./app/algorithm/src/ts_foc.c **** /// @brief è®¾ç½®ç”µæœº2é€šé“2pwmè¾“å‡ºå ç©ºæ¯”
 403:./app/algorithm/src/ts_foc.c **** /// @param compare å ç©ºæ¯”å€¼
 404:./app/algorithm/src/ts_foc.c **** void __attribute__((weak)) Motor2_Set_Compare2(uint32_t compare) 
 405:./app/algorithm/src/ts_foc.c **** {
 2274              		.loc 1 405 1 is_stmt 1 view -0
 2275              		.cfi_startproc
 2276              		@ args = 0, pretend = 0, frame = 0
 2277              		@ frame_needed = 0, uses_anonymous_args = 0
 2278              		@ link register save eliminated.
 406:./app/algorithm/src/ts_foc.c ****     __HAL_TIM_SetCompare(&htim4, TIM_CHANNEL_2, compare);
 2279              		.loc 1 406 5 view .LVU532
 2280 0000 014B     		ldr	r3, .L131
 2281 0002 1B68     		ldr	r3, [r3]
 2282 0004 9863     		str	r0, [r3, #56]
 407:./app/algorithm/src/ts_foc.c **** }
 2283              		.loc 1 407 1 is_stmt 0 view .LVU533
 2284 0006 7047     		bx	lr
 2285              	.L132:
 2286              		.align	2
 2287              	.L131:
 2288 0008 00000000 		.word	htim4
 2289              		.cfi_endproc
 2290              	.LFE271:
 2292              		.section	.text.Motor2_Set_Compare3,"ax",%progbits
 2293              		.align	1
 2294              		.weak	Motor2_Set_Compare3
 2295              		.syntax unified
 2296              		.thumb
 2297              		.thumb_func
 2299              	Motor2_Set_Compare3:
ARM GAS  /tmp/ccPOftzH.s 			page 53


 2300              	.LVL226:
 2301              	.LFB272:
 408:./app/algorithm/src/ts_foc.c **** 
 409:./app/algorithm/src/ts_foc.c **** /// @brief è®¾ç½®ç”µæœº2é€šé“3pwmè¾“å‡ºå ç©ºæ¯”
 410:./app/algorithm/src/ts_foc.c **** /// @param compare å ç©ºæ¯”å€¼
 411:./app/algorithm/src/ts_foc.c **** void __attribute__((weak)) Motor2_Set_Compare3(uint32_t compare) 
 412:./app/algorithm/src/ts_foc.c **** {
 2302              		.loc 1 412 1 is_stmt 1 view -0
 2303              		.cfi_startproc
 2304              		@ args = 0, pretend = 0, frame = 0
 2305              		@ frame_needed = 0, uses_anonymous_args = 0
 2306              		@ link register save eliminated.
 413:./app/algorithm/src/ts_foc.c ****     __HAL_TIM_SetCompare(&htim4, TIM_CHANNEL_1, compare);
 2307              		.loc 1 413 5 view .LVU535
 2308 0000 014B     		ldr	r3, .L134
 2309 0002 1B68     		ldr	r3, [r3]
 2310 0004 5863     		str	r0, [r3, #52]
 414:./app/algorithm/src/ts_foc.c **** }
 2311              		.loc 1 414 1 is_stmt 0 view .LVU536
 2312 0006 7047     		bx	lr
 2313              	.L135:
 2314              		.align	2
 2315              	.L134:
 2316 0008 00000000 		.word	htim4
 2317              		.cfi_endproc
 2318              	.LFE272:
 2320              		.text
 2321              	.Letext0:
 2322              		.file 2 "/usr/lib/gcc/arm-none-eabi/13.2.1/include/stddef.h"
 2323              		.file 3 "./Middlewares/ST/threadx/ports/cortex_m4/gnu/inc/tx_port.h"
 2324              		.file 4 "/usr/lib/gcc/arm-none-eabi/13.2.1/include/stdint.h"
 2325              		.file 5 "./Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 2326              		.file 6 "./Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 2327              		.file 7 "./Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 2328              		.file 8 "./Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2c.h"
 2329              		.file 9 "./Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 2330              		.file 10 "./app/peripheral/inc/as5600.h"
 2331              		.file 11 "./app/algorithm/inc/pid.h"
 2332              		.file 12 "./app/algorithm/inc/lowpass_filter.h"
 2333              		.file 13 "./app/peripheral/inc/inlinecurrent.h"
 2334              		.file 14 "./Core/Inc/tim.h"
 2335              		.file 15 "./app/algorithm/inc/ts_foc.h"
 2336              		.file 16 "/usr/include/newlib/string.h"
 2337              		.file 17 "/usr/include/newlib/math.h"
 2338              		.file 18 "/usr/include/newlib/stdio.h"
 2339              		.file 19 "./Middlewares/ST/threadx/common/inc/tx_api.h"
 2340              		.file 20 "<built-in>"
ARM GAS  /tmp/ccPOftzH.s 			page 54


DEFINED SYMBOLS
                            *ABS*:00000000 ts_foc.c
     /tmp/ccPOftzH.s:23     .text._normalizeRadian:00000000 $t
     /tmp/ccPOftzH.s:29     .text._normalizeRadian:00000000 _normalizeRadian
     /tmp/ccPOftzH.s:75     .text._normalizeRadian:00000038 $d
     /tmp/ccPOftzH.s:82     .text._normalizeAngle:00000000 $t
     /tmp/ccPOftzH.s:88     .text._normalizeAngle:00000000 _normalizeAngle
     /tmp/ccPOftzH.s:134    .text._normalizeAngle:00000038 $d
     /tmp/ccPOftzH.s:141    .text.Get_filter_Velocity:00000000 $t
     /tmp/ccPOftzH.s:147    .text.Get_filter_Velocity:00000000 Get_filter_Velocity
     /tmp/ccPOftzH.s:186    .text.cal_Iq_Id:00000000 $t
     /tmp/ccPOftzH.s:192    .text.cal_Iq_Id:00000000 cal_Iq_Id
     /tmp/ccPOftzH.s:291    .text.cal_Iq_Id:00000078 $d
     /tmp/ccPOftzH.s:297    .text._electricalAngle:00000000 $t
     /tmp/ccPOftzH.s:303    .text._electricalAngle:00000000 _electricalAngle
     /tmp/ccPOftzH.s:344    .text.Get_Current:00000000 $t
     /tmp/ccPOftzH.s:350    .text.Get_Current:00000000 Get_Current
     /tmp/ccPOftzH.s:393    .text.setPwm:00000000 $t
     /tmp/ccPOftzH.s:399    .text.setPwm:00000000 setPwm
     /tmp/ccPOftzH.s:588    .text.setPwm:00000120 $d
     /tmp/ccPOftzH.s:597    .text.setTorque:00000000 $t
     /tmp/ccPOftzH.s:603    .text.setTorque:00000000 setTorque
     /tmp/ccPOftzH.s:815    .text.setTorque:00000158 $d
     /tmp/ccPOftzH.s:822    .rodata.aligns_Motor_Zero_Angle.str1.4:00000000 $d
     /tmp/ccPOftzH.s:827    .text.aligns_Motor_Zero_Angle:00000000 $t
     /tmp/ccPOftzH.s:833    .text.aligns_Motor_Zero_Angle:00000000 aligns_Motor_Zero_Angle
     /tmp/ccPOftzH.s:908    .text.aligns_Motor_Zero_Angle:0000005c $d
     /tmp/ccPOftzH.s:915    .text.Set_Velocity_Angle:00000000 $t
     /tmp/ccPOftzH.s:921    .text.Set_Velocity_Angle:00000000 Set_Velocity_Angle
     /tmp/ccPOftzH.s:991    .text.Set_Velocity_Angle:00000054 $d
     /tmp/ccPOftzH.s:997    .text.Set_Velocity:00000000 $t
     /tmp/ccPOftzH.s:1003   .text.Set_Velocity:00000000 Set_Velocity
     /tmp/ccPOftzH.s:1065   .text.Set_Velocity:0000004c $d
     /tmp/ccPOftzH.s:1071   .text.Set_Force_Angle:00000000 $t
     /tmp/ccPOftzH.s:1077   .text.Set_Force_Angle:00000000 Set_Force_Angle
     /tmp/ccPOftzH.s:1142   .text.Set_Force_Angle:0000004c $d
     /tmp/ccPOftzH.s:1148   .text.setTorque_Curr:00000000 $t
     /tmp/ccPOftzH.s:1154   .text.setTorque_Curr:00000000 setTorque_Curr
     /tmp/ccPOftzH.s:1210   .text.set_Force_Angle_Curr:00000000 $t
     /tmp/ccPOftzH.s:1216   .text.set_Force_Angle_Curr:00000000 set_Force_Angle_Curr
     /tmp/ccPOftzH.s:1274   .text.set_Force_Angle_Curr:0000003c $d
     /tmp/ccPOftzH.s:1280   .text.set_Velocity_Curr:00000000 $t
     /tmp/ccPOftzH.s:1286   .text.set_Velocity_Curr:00000000 set_Velocity_Curr
     /tmp/ccPOftzH.s:1341   .text.set_Velocity_Curr:00000038 $d
     /tmp/ccPOftzH.s:1347   .text.set_Velocity_Angle_Curr:00000000 $t
     /tmp/ccPOftzH.s:1353   .text.set_Velocity_Angle_Curr:00000000 set_Velocity_Angle_Curr
     /tmp/ccPOftzH.s:1423   .text.set_Velocity_Angle_Curr:00000050 $d
     /tmp/ccPOftzH.s:1429   .rodata.auto_identify_motor_params.str1.4:00000000 $d
     /tmp/ccPOftzH.s:1459   .text.auto_identify_motor_params:00000000 $t
     /tmp/ccPOftzH.s:1465   .text.auto_identify_motor_params:00000000 auto_identify_motor_params
     /tmp/ccPOftzH.s:2137   .text.auto_identify_motor_params:00000300 $d
     /tmp/ccPOftzH.s:2153   .text.Motor1_Set_Compare1:00000000 $t
     /tmp/ccPOftzH.s:2159   .text.Motor1_Set_Compare1:00000000 Motor1_Set_Compare1
     /tmp/ccPOftzH.s:2176   .text.Motor1_Set_Compare1:00000008 $d
     /tmp/ccPOftzH.s:2181   .text.Motor1_Set_Compare2:00000000 $t
     /tmp/ccPOftzH.s:2187   .text.Motor1_Set_Compare2:00000000 Motor1_Set_Compare2
     /tmp/ccPOftzH.s:2204   .text.Motor1_Set_Compare2:00000008 $d
ARM GAS  /tmp/ccPOftzH.s 			page 55


     /tmp/ccPOftzH.s:2209   .text.Motor1_Set_Compare3:00000000 $t
     /tmp/ccPOftzH.s:2215   .text.Motor1_Set_Compare3:00000000 Motor1_Set_Compare3
     /tmp/ccPOftzH.s:2232   .text.Motor1_Set_Compare3:00000008 $d
     /tmp/ccPOftzH.s:2237   .text.Motor2_Set_Compare1:00000000 $t
     /tmp/ccPOftzH.s:2243   .text.Motor2_Set_Compare1:00000000 Motor2_Set_Compare1
     /tmp/ccPOftzH.s:2260   .text.Motor2_Set_Compare1:00000008 $d
     /tmp/ccPOftzH.s:2265   .text.Motor2_Set_Compare2:00000000 $t
     /tmp/ccPOftzH.s:2271   .text.Motor2_Set_Compare2:00000000 Motor2_Set_Compare2
     /tmp/ccPOftzH.s:2288   .text.Motor2_Set_Compare2:00000008 $d
     /tmp/ccPOftzH.s:2293   .text.Motor2_Set_Compare3:00000000 $t
     /tmp/ccPOftzH.s:2299   .text.Motor2_Set_Compare3:00000000 Motor2_Set_Compare3
     /tmp/ccPOftzH.s:2316   .text.Motor2_Set_Compare3:00000008 $d

UNDEFINED SYMBOLS
__aeabi_f2d
__aeabi_d2f
fmod
Get_AS5600_Velocity
Lowpass_Filter_calc
cos
sin
__aeabi_dmul
__aeabi_dsub
__aeabi_dadd
_tx_thread_sleep
Read_AS5600_Angle
printf
Get_AS5600_Angle
Pid_clac
memset
_tx_time_get
puts
htim4
htim8
