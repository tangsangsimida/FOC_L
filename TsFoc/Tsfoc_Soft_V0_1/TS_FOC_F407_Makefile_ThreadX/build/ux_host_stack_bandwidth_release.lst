ARM GAS  C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"ux_host_stack_bandwidth_release.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text._ux_host_stack_bandwidth_release,"ax",%progbits
  20              		.align	1
  21              		.global	_ux_host_stack_bandwidth_release
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	_ux_host_stack_bandwidth_release:
  27              	.LVL0:
  28              	.LFB11:
  29              		.file 1 "./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c"
   1:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /**************************************************************************/
   2:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */
   3:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*       Copyright (c) Microsoft Corporation. All rights reserved.        */
   4:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */
   5:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*       This software is licensed under the Microsoft Software License   */
   6:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*       Terms for Microsoft Azure RTOS. Full text of the license can be  */
   7:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*       found in the LICENSE file at https://aka.ms/AzureRTOS_EULA       */
   8:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*       and in the root directory of this software.                      */
   9:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */
  10:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /**************************************************************************/
  11:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
  12:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
  13:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /**************************************************************************/
  14:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /**************************************************************************/
  15:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /**                                                                       */ 
  16:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /** USBX Component                                                        */ 
  17:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /**                                                                       */
  18:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /**   Host Stack                                                          */
  19:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /**                                                                       */
  20:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /**************************************************************************/
  21:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /**************************************************************************/
  22:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
  23:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
  24:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /* Include necessary system files.  */
  25:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
  26:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** #define UX_SOURCE_CODE
  27:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
  28:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** #include "ux_api.h"
  29:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** #include "ux_host_stack.h"
ARM GAS  C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s 			page 2


  30:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
  31:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
  32:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** #if UX_MAX_DEVICES > 1
  33:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /**************************************************************************/ 
  34:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  35:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*  FUNCTION                                               RELEASE        */ 
  36:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  37:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    _ux_host_stack_bandwidth_release                    PORTABLE C      */ 
  38:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                           6.1          */
  39:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*  AUTHOR                                                                */
  40:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */
  41:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    Chaoqiong Xiao, Microsoft Corporation                               */
  42:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */
  43:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*  DESCRIPTION                                                           */
  44:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  45:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    This function will release bandwidth for a periodic endpoint. The   */ 
  46:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    bandwidth requirement is calculated by the MaxPacketSize field of   */
  47:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    endpoint and the speed of the endpoint. If the device is on a 1.1   */ 
  48:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    bus or it is a 1.1 device behind a 2.0 hub on a 2.0 bus, the device */
  49:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    bandwidth must be multiplied by 8 on the 1.1 segment.               */
  50:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */
  51:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    This algorithm takes into account both TT bandwidth and HCD         */ 
  52:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    bandwidth. The TTs are attached to the device structure and not the */ 
  53:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    hub structure in order to make the stack agnostic of the hub class. */ 
  54:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  55:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*  INPUT                                                                 */ 
  56:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  57:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    HCD                                   Pointer to HCD                */ 
  58:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    endpoint                              Pointer to endpoint           */ 
  59:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  60:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*  OUTPUT                                                                */ 
  61:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  62:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    None                                                                */ 
  63:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  64:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*  CALLS                                                                 */ 
  65:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  66:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    None                                                                */ 
  67:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  68:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*  CALLED BY                                                             */ 
  69:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  70:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    USBX Components                                                     */ 
  71:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  72:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*  RELEASE HISTORY                                                       */ 
  73:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  74:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*    DATE              NAME                      DESCRIPTION             */ 
  75:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */ 
  76:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*  05-19-2020     Chaoqiong Xiao           Initial Version 6.0           */
  77:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*  09-30-2020     Chaoqiong Xiao           Modified comment(s),          */
  78:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                            optimized based on compile  */
  79:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                            definitions,                */
  80:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                            resulting in version 6.1    */
  81:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*                                                                        */
  82:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /**************************************************************************/
  83:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** VOID  _ux_host_stack_bandwidth_release(UX_HCD *hcd, UX_ENDPOINT *endpoint)
  84:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** {
  30              		.loc 1 84 1 view -0
  31              		.cfi_startproc
ARM GAS  C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s 			page 3


  32              		@ args = 0, pretend = 0, frame = 16
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 84 1 is_stmt 0 view .LVU1
  35 0000 10B5     		push	{r4, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 4, -8
  39              		.cfi_offset 14, -4
  40 0002 84B0     		sub	sp, sp, #16
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 24
  43 0004 8446     		mov	ip, r0
  44 0006 8E46     		mov	lr, r1
  85:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
  86:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** UX_DEVICE       *device;
  45              		.loc 1 86 1 is_stmt 1 view .LVU2
  87:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** UX_DEVICE       *parent_device;
  46              		.loc 1 87 1 view .LVU3
  88:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** USHORT          hcd_bandwidth_claimed;
  47              		.loc 1 88 1 view .LVU4
  89:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** USHORT          max_packet_size;
  48              		.loc 1 89 1 view .LVU5
  90:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** LONG            packet_size;
  49              		.loc 1 90 1 view .LVU6
  91:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** USHORT          tt_bandwidth_claimed =  0;
  50              		.loc 1 91 1 view .LVU7
  51              	.LVL1:
  92:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** ULONG           port_index;
  52              		.loc 1 92 1 view .LVU8
  93:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** ULONG           port_map;
  53              		.loc 1 93 1 view .LVU9
  94:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** ULONG           tt_index;
  54              		.loc 1 94 1 view .LVU10
  95:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** const UCHAR     overheads[4][3] = {
  55              		.loc 1 95 1 view .LVU11
  56              		.loc 1 95 17 is_stmt 0 view .LVU12
  57 0008 3B4B     		ldr	r3, .L19
  58 000a 93E80700 		ldm	r3, {r0, r1, r2}
  59              	.LVL2:
  60              		.loc 1 95 17 view .LVU13
  61 000e 04AB     		add	r3, sp, #16
  62 0010 03E90700 		stmdb	r3, {r0, r1, r2}
  96:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** /*   LS  FS   HS   */
  97:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     {63, 45, 173}, /* Control */
  98:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     { 0,  9,  38}, /* Isochronous */
  99:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     { 0, 13,  55}, /* Bulk */
 100:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     {19, 13,  55}  /* Interrupt */
 101:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** };
 102:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 103:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* Get the pointer to the device.  */
 104:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     device =  endpoint -> ux_endpoint_device;
  63              		.loc 1 104 5 is_stmt 1 view .LVU14
  64              		.loc 1 104 12 is_stmt 0 view .LVU15
  65 0014 DEF82C20 		ldr	r2, [lr, #44]
  66              	.LVL3:
 105:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 106:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* Calculate the bandwidth. From USB spec.
ARM GAS  C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s 			page 4


 107:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      *
 108:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      * The frame unit consumed per byte is like follow:
 109:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      *              Bytes/FrameUnit     FrameUnit/byte  FrameUnit/byte
 110:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      *              (Overhead included) (HS baseline)   (FS baseline)
 111:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      * Low Speed       187.5                40             8
 112:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      * Full Speed     1500                   5             1
 113:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      * High Speed     7500                   1            1/5
 114:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      * 
 115:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      * The overhead is like follow:
 116:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      *               Control Isochronous Bulk Interrupt
 117:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      * bmAttribute     (0)       (1)     (2)     (3)
 118:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      * Low Speed        63       --      --      19
 119:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      * Full Speed       45        9      13      13
 120:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      * High Speed      173       38      55      55
 121:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      * 
 122:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      * Worst case bit stuffing is calculated as 1.1667 (7/6) times the raw time.
 123:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****      */
 124:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 125:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* Get maximum packet size.  */
 126:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     max_packet_size  = endpoint -> ux_endpoint_descriptor.wMaxPacketSize & UX_MAX_PACKET_SIZE_MASK;
  67              		.loc 1 126 5 is_stmt 1 view .LVU16
  68              		.loc 1 126 58 is_stmt 0 view .LVU17
  69 0018 DEF81C40 		ldr	r4, [lr, #28]
  70              		.loc 1 126 22 view .LVU18
  71 001c C4F30A00 		ubfx	r0, r4, #0, #11
  72              	.LVL4:
 127:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 128:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* Rough time for possible Bit Stuffing.  */
 129:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     packet_size = (max_packet_size * 7 + 5) / 6;
  73              		.loc 1 129 5 is_stmt 1 view .LVU19
  74              		.loc 1 129 36 is_stmt 0 view .LVU20
  75 0020 C0EBC000 		rsb	r0, r0, r0, lsl #3
  76              	.LVL5:
  77              		.loc 1 129 40 view .LVU21
  78 0024 0530     		adds	r0, r0, #5
  79              		.loc 1 129 17 view .LVU22
  80 0026 354B     		ldr	r3, .L19+4
  81 0028 83FB0013 		smull	r1, r3, r3, r0
  82 002c A3EBE070 		sub	r0, r3, r0, asr #31
  83              	.LVL6:
 130:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 131:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* Add overhead.  */
 132:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     packet_size += overheads[endpoint -> ux_endpoint_descriptor.bmAttributes & UX_MASK_ENDPOINT_TYP
  84              		.loc 1 132 5 is_stmt 1 view .LVU23
  85              		.loc 1 132 64 is_stmt 0 view .LVU24
  86 0030 DEF81830 		ldr	r3, [lr, #24]
  87              		.loc 1 132 78 view .LVU25
  88 0034 03F00303 		and	r3, r3, #3
  89              		.loc 1 132 110 view .LVU26
  90 0038 1169     		ldr	r1, [r2, #16]
  91              		.loc 1 132 102 view .LVU27
  92 003a 03EB4303 		add	r3, r3, r3, lsl #1
  93 003e 1033     		adds	r3, r3, #16
  94 0040 6B44     		add	r3, sp, r3
  95 0042 0B44     		add	r3, r3, r1
  96 0044 13F80C3C 		ldrb	r3, [r3, #-12]	@ zero_extendqisi2
  97              		.loc 1 132 17 view .LVU28
ARM GAS  C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s 			page 5


  98 0048 0344     		add	r3, r3, r0
  99              	.LVL7:
 133:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     max_packet_size = (USHORT)packet_size;
 100              		.loc 1 133 5 is_stmt 1 view .LVU29
 101              		.loc 1 133 21 is_stmt 0 view .LVU30
 102 004a 9BB2     		uxth	r3, r3
 103              	.LVL8:
 134:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 135:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* Check for high-speed endpoint.  */
 136:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     if (device -> ux_device_speed == UX_HIGH_SPEED_DEVICE)
 104              		.loc 1 136 5 is_stmt 1 view .LVU31
 105              		.loc 1 136 8 is_stmt 0 view .LVU32
 106 004c 0229     		cmp	r1, #2
 107 004e 1CD0     		beq	.L16
 108              	.L2:
 137:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     {
 138:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 139:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         /* Get number of transactions.  */
 140:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         max_packet_size = (USHORT)(max_packet_size *
 141:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                     (((endpoint -> ux_endpoint_descriptor.wMaxPacketSize & UX_MAX_NUMBER_OF_TRANSAC
 142:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                         UX_MAX_NUMBER_OF_TRANSACTIONS_SHIFT) + 1));
 143:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     }
 144:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 145:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* Calculate the bandwidth claimed by this endpoint for the main bus.  */
 146:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     if (hcd -> ux_hcd_version != 0x200)
 109              		.loc 1 146 5 is_stmt 1 view .LVU33
 110              		.loc 1 146 13 is_stmt 0 view .LVU34
 111 0050 DCF89040 		ldr	r4, [ip, #144]
 112              		.loc 1 146 8 view .LVU35
 113 0054 B4F5007F 		cmp	r4, #512
 114 0058 27D0     		beq	.L3
 147:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     {
 148:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 149:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         if (device -> ux_device_speed == UX_LOW_SPEED_DEVICE)
 115              		.loc 1 149 9 is_stmt 1 view .LVU36
 116              		.loc 1 149 12 is_stmt 0 view .LVU37
 117 005a E9B9     		cbnz	r1, .L4
 150:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             /* Low speed transfer takes 40x more units than high speed. */
 151:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             hcd_bandwidth_claimed =  (USHORT)(max_packet_size * 8 * 5);
 118              		.loc 1 151 13 is_stmt 1 view .LVU38
 119              		.loc 1 151 35 is_stmt 0 view .LVU39
 120 005c 03EB8303 		add	r3, r3, r3, lsl #2
 121              	.LVL9:
 122              		.loc 1 151 35 view .LVU40
 123 0060 DB00     		lsls	r3, r3, #3
 124 0062 9BB2     		uxth	r3, r3
 125              	.LVL10:
  91:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** ULONG           port_index;
 126              		.loc 1 91 17 view .LVU41
 127 0064 0020     		movs	r0, #0
 128              	.LVL11:
 129              	.L5:
 152:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         else
 153:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         {
 154:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 155:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             if (device -> ux_device_speed == UX_FULL_SPEED_DEVICE)
 156:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 /* Full speed transfer takes 5x more units than high speed. */
ARM GAS  C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s 			page 6


 157:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 hcd_bandwidth_claimed =  (USHORT)(max_packet_size * 5);
 158:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             else
 159:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 /* Use high speed timing as base for bus bandwidth calculation. */
 160:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 hcd_bandwidth_claimed =  (USHORT)max_packet_size;
 161:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         }
 162:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     }
 163:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     else        
 164:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     {
 165:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****  
 166:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         hcd_bandwidth_claimed =  (USHORT)max_packet_size;
 167:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         if (device -> ux_device_speed == UX_LOW_SPEED_DEVICE)
 168:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             /* Low speed transfer takes 8x more units than full speed. */
 169:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             tt_bandwidth_claimed =  (USHORT)(max_packet_size * 8);
 170:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         else
 171:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             /* Use full speed timing as base for TT bandwidth calculation. */
 172:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             tt_bandwidth_claimed =  (USHORT)max_packet_size;
 173:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     }
 174:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 175:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* Free the HCD bandwidth.  */
 176:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     hcd -> ux_hcd_available_bandwidth +=  hcd_bandwidth_claimed;
 130              		.loc 1 176 5 is_stmt 1 view .LVU42
 131              		.loc 1 176 39 is_stmt 0 view .LVU43
 132 0066 DCF88C10 		ldr	r1, [ip, #140]
 133              	.LVL12:
 134              		.loc 1 176 39 view .LVU44
 135 006a 0B44     		add	r3, r3, r1
 136              	.LVL13:
 137              		.loc 1 176 39 view .LVU45
 138 006c CCF88C30 		str	r3, [ip, #140]
 139              	.LVL14:
 177:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 178:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* We need to take care of the case where the endpoint belongs to a USB 1.1
 179:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****        device that sits behind a 2.0 hub. We ignore cases where the device
 180:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****        is either high speed or the bus is 1.1.  */
 181:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     if ((device -> ux_device_speed == UX_HIGH_SPEED_DEVICE) || (hcd -> ux_hcd_version != 0x200))
 140              		.loc 1 181 5 is_stmt 1 view .LVU46
 141              		.loc 1 181 17 is_stmt 0 view .LVU47
 142 0070 1369     		ldr	r3, [r2, #16]
 143              		.loc 1 181 8 view .LVU48
 144 0072 022B     		cmp	r3, #2
 145 0074 25D0     		beq	.L1
 146              		.loc 1 181 61 discriminator 1 view .LVU49
 147 0076 B4F5007F 		cmp	r4, #512
 148 007a 22D1     		bne	.L1
 182:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     {
 183:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 184:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         /* The device is high speed, therefore no need for TT.  */
 185:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         return;
 186:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     }
 187:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 188:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* We have a 1.1 device, check if the parent is a 2.0 hub.  */
 189:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     parent_device =  device -> ux_device_parent;
 149              		.loc 1 189 5 is_stmt 1 view .LVU50
 150              		.loc 1 189 19 is_stmt 0 view .LVU51
 151 007c D2F81831 		ldr	r3, [r2, #280]
 152              	.LVL15:
 190:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     if (parent_device == UX_NULL)
ARM GAS  C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s 			page 7


 153              		.loc 1 190 5 is_stmt 1 view .LVU52
 154              		.loc 1 190 8 is_stmt 0 view .LVU53
 155 0080 FBB1     		cbz	r3, .L1
 191:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     {
 192:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 193:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         /* We are at the root, must be a 1.1 controller then! */
 194:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         return;
 195:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     }
 196:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 197:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* We get here when the parent is a hub. The problem occurs when the hub is itself 
 198:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****        connected to a chain of hubs. We need to find the first 2.0 hub parent to this chain 
 199:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****        to check the TT. We need to remember the port on which the first 1.1 device is 
 200:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****        hooked to.  */
 201:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     port_index =  device -> ux_device_port_location - 1;
 156              		.loc 1 201 5 is_stmt 1 view .LVU54
 157              		.loc 1 201 26 is_stmt 0 view .LVU55
 158 0082 D2F81021 		ldr	r2, [r2, #272]
 159              	.LVL16:
 160              		.loc 1 201 16 view .LVU56
 161 0086 013A     		subs	r2, r2, #1
 162              	.LVL17:
 202:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 203:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* Scan the chain of hubs upward.  */
 204:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     while (parent_device != UX_NULL)
 163              		.loc 1 204 5 is_stmt 1 view .LVU57
 164              		.loc 1 204 11 is_stmt 0 view .LVU58
 165 0088 22E0     		b	.L7
 166              	.LVL18:
 167              	.L16:
 140:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                     (((endpoint -> ux_endpoint_descriptor.wMaxPacketSize & UX_MAX_NUMBER_OF_TRANSAC
 168              		.loc 1 140 9 is_stmt 1 view .LVU59
 141:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                         UX_MAX_NUMBER_OF_TRANSACTIONS_SHIFT) + 1));
 169              		.loc 1 141 112 is_stmt 0 view .LVU60
 170 008a C4F3C124 		ubfx	r4, r4, #11, #2
 140:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                     (((endpoint -> ux_endpoint_descriptor.wMaxPacketSize & UX_MAX_NUMBER_OF_TRANSAC
 171              		.loc 1 140 27 view .LVU61
 172 008e 0134     		adds	r4, r4, #1
 140:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                     (((endpoint -> ux_endpoint_descriptor.wMaxPacketSize & UX_MAX_NUMBER_OF_TRANSAC
 173              		.loc 1 140 25 view .LVU62
 174 0090 14FB03F3 		smulbb	r3, r4, r3
 175              	.LVL19:
 140:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                     (((endpoint -> ux_endpoint_descriptor.wMaxPacketSize & UX_MAX_NUMBER_OF_TRANSAC
 176              		.loc 1 140 25 view .LVU63
 177 0094 9BB2     		uxth	r3, r3
 178              	.LVL20:
 140:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                     (((endpoint -> ux_endpoint_descriptor.wMaxPacketSize & UX_MAX_NUMBER_OF_TRANSAC
 179              		.loc 1 140 25 view .LVU64
 180 0096 DBE7     		b	.L2
 181              	.L4:
 155:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 /* Full speed transfer takes 5x more units than high speed. */
 182              		.loc 1 155 13 is_stmt 1 view .LVU65
 155:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 /* Full speed transfer takes 5x more units than high speed. */
 183              		.loc 1 155 16 is_stmt 0 view .LVU66
 184 0098 0129     		cmp	r1, #1
 185 009a 01D0     		beq	.L17
  91:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** ULONG           port_index;
 186              		.loc 1 91 17 view .LVU67
ARM GAS  C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s 			page 8


 187 009c 0020     		movs	r0, #0
 188              	.LVL21:
  91:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** ULONG           port_index;
 189              		.loc 1 91 17 view .LVU68
 190 009e E2E7     		b	.L5
 191              	.LVL22:
 192              	.L17:
 157:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             else
 193              		.loc 1 157 17 is_stmt 1 view .LVU69
 157:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             else
 194              		.loc 1 157 39 is_stmt 0 view .LVU70
 195 00a0 03EB8303 		add	r3, r3, r3, lsl #2
 196              	.LVL23:
 157:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             else
 197              		.loc 1 157 39 view .LVU71
 198 00a4 9BB2     		uxth	r3, r3
 199              	.LVL24:
  91:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** ULONG           port_index;
 200              		.loc 1 91 17 view .LVU72
 201 00a6 0020     		movs	r0, #0
 202              	.LVL25:
  91:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** ULONG           port_index;
 203              		.loc 1 91 17 view .LVU73
 204 00a8 DDE7     		b	.L5
 205              	.LVL26:
 206              	.L3:
 166:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         if (device -> ux_device_speed == UX_LOW_SPEED_DEVICE)
 207              		.loc 1 166 9 is_stmt 1 view .LVU74
 167:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             /* Low speed transfer takes 8x more units than full speed. */
 208              		.loc 1 167 9 view .LVU75
 167:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             /* Low speed transfer takes 8x more units than full speed. */
 209              		.loc 1 167 12 is_stmt 0 view .LVU76
 210 00aa 11B9     		cbnz	r1, .L14
 169:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         else
 211              		.loc 1 169 13 is_stmt 1 view .LVU77
 169:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         else
 212              		.loc 1 169 34 is_stmt 0 view .LVU78
 213 00ac D800     		lsls	r0, r3, #3
 214              	.LVL27:
 169:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         else
 215              		.loc 1 169 34 view .LVU79
 216 00ae 80B2     		uxth	r0, r0
 217              	.LVL28:
 169:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         else
 218              		.loc 1 169 34 view .LVU80
 219 00b0 D9E7     		b	.L5
 220              	.LVL29:
 221              	.L14:
 172:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     }
 222              		.loc 1 172 34 view .LVU81
 223 00b2 1846     		mov	r0, r3
 224              	.LVL30:
 172:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     }
 225              		.loc 1 172 34 view .LVU82
 226 00b4 D7E7     		b	.L5
 227              	.LVL31:
 228              	.L18:
ARM GAS  C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s 			page 9


 205:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     {
 206:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 207:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         /* Check for a high speed device.  */
 208:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         if (parent_device -> ux_device_speed == UX_HIGH_SPEED_DEVICE)
 209:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         {
 210:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 211:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             /* The device is a high speed hub, find the TT that manages the port. 
 212:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                The first 1.1 device is connected to. First we calculate the port mapping bit.  */
 213:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             port_map =  (ULONG)(1 << port_index);
 214:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 215:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             /* Parse all the TTs attached to the hub.  */
 216:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             for (tt_index = 0; tt_index < UX_MAX_TT; tt_index++)
 217:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             {
 218:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 219:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 /* Check if this TT owns the port where the device is attached.  */
 220:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 if ((parent_device -> ux_device_hub_tt[tt_index].ux_hub_tt_port_mapping & port_map)
 221:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 {
 222:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 223:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                     /* We have found the port, check if the tt can give us the bandwidth
 224:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                        we want to claim.  */
 225:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                     parent_device -> ux_device_hub_tt[tt_index].ux_hub_tt_max_bandwidth +=  tt_band
 229              		.loc 1 225 21 is_stmt 1 view .LVU83
 230              		.loc 1 225 89 is_stmt 0 view .LVU84
 231 00b6 2431     		adds	r1, r1, #36
 232              	.LVL32:
 233              		.loc 1 225 89 view .LVU85
 234 00b8 03EBC103 		add	r3, r3, r1, lsl #3
 235              	.LVL33:
 236              		.loc 1 225 89 view .LVU86
 237 00bc 5A68     		ldr	r2, [r3, #4]
 238              	.LVL34:
 239              		.loc 1 225 89 view .LVU87
 240 00be 0244     		add	r2, r2, r0
 241 00c0 5A60     		str	r2, [r3, #4]
 226:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                     return;
 242              		.loc 1 226 21 is_stmt 1 view .LVU88
 243              	.LVL35:
 244              	.L1:
 227:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 }
 228:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             }
 229:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 230:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             /* We should never get here!!!!! */
 231:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             return;
 232:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         }
 233:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 234:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         /* We now remember where this hub is located on the parent.  */
 235:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         port_index =  parent_device -> ux_device_port_location - 1;
 236:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         
 237:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         /* We go up one level in the hub chain.  */
 238:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         parent_device =  parent_device -> ux_device_parent;
 239:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     }
 240:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 241:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     /* We get here when we have not found a 2.0 hub in the list and we got
 242:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****        to the root port.  */
 243:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     return;
 244:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** }
 245              		.loc 1 244 1 is_stmt 0 view .LVU89
ARM GAS  C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s 			page 10


 246 00c2 04B0     		add	sp, sp, #16
 247              	.LCFI2:
 248              		.cfi_remember_state
 249              		.cfi_def_cfa_offset 8
 250              		@ sp needed
 251 00c4 10BD     		pop	{r4, pc}
 252              	.LVL36:
 253              	.L8:
 254              	.LCFI3:
 255              		.cfi_restore_state
 235:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         
 256              		.loc 1 235 9 is_stmt 1 view .LVU90
 235:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         
 257              		.loc 1 235 37 is_stmt 0 view .LVU91
 258 00c6 D3F81021 		ldr	r2, [r3, #272]
 259              	.LVL37:
 235:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         
 260              		.loc 1 235 20 view .LVU92
 261 00ca 013A     		subs	r2, r2, #1
 262              	.LVL38:
 238:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     }
 263              		.loc 1 238 9 is_stmt 1 view .LVU93
 238:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     }
 264              		.loc 1 238 23 is_stmt 0 view .LVU94
 265 00cc D3F81831 		ldr	r3, [r3, #280]
 266              	.LVL39:
 267              	.L7:
 204:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****     {
 268              		.loc 1 204 11 is_stmt 1 view .LVU95
 269 00d0 002B     		cmp	r3, #0
 270 00d2 F6D0     		beq	.L1
 208:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         {
 271              		.loc 1 208 9 view .LVU96
 208:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         {
 272              		.loc 1 208 27 is_stmt 0 view .LVU97
 273 00d4 1969     		ldr	r1, [r3, #16]
 208:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****         {
 274              		.loc 1 208 12 view .LVU98
 275 00d6 0229     		cmp	r1, #2
 276 00d8 F5D1     		bne	.L8
 213:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 277              		.loc 1 213 13 is_stmt 1 view .LVU99
 213:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c **** 
 278              		.loc 1 213 35 is_stmt 0 view .LVU100
 279 00da 0121     		movs	r1, #1
 280 00dc 01FA02F2 		lsl	r2, r1, r2
 281              	.LVL40:
 216:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             {
 282              		.loc 1 216 13 is_stmt 1 view .LVU101
 216:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             {
 283              		.loc 1 216 27 is_stmt 0 view .LVU102
 284 00e0 0021     		movs	r1, #0
 285              	.LVL41:
 286              	.L9:
 216:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             {
 287              		.loc 1 216 32 is_stmt 1 discriminator 1 view .LVU103
 216:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             {
ARM GAS  C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s 			page 11


 288              		.loc 1 216 13 is_stmt 0 discriminator 1 view .LVU104
 289 00e2 0729     		cmp	r1, #7
 290 00e4 EDD8     		bhi	.L1
 220:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 {
 291              		.loc 1 220 17 is_stmt 1 view .LVU105
 220:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 {
 292              		.loc 1 220 65 is_stmt 0 view .LVU106
 293 00e6 01F12404 		add	r4, r1, #36
 294 00ea 53F83440 		ldr	r4, [r3, r4, lsl #3]
 220:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****                 {
 295              		.loc 1 220 20 view .LVU107
 296 00ee 1442     		tst	r4, r2
 297 00f0 E1D1     		bne	.L18
 216:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             {
 298              		.loc 1 216 54 is_stmt 1 discriminator 2 view .LVU108
 216:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             {
 299              		.loc 1 216 62 is_stmt 0 discriminator 2 view .LVU109
 300 00f2 0131     		adds	r1, r1, #1
 301              	.LVL42:
 216:./Middlewares/ST/usbx/common/core/src/ux_host_stack_bandwidth_release.c ****             {
 302              		.loc 1 216 62 discriminator 2 view .LVU110
 303 00f4 F5E7     		b	.L9
 304              	.L20:
 305 00f6 00BF     		.align	2
 306              	.L19:
 307 00f8 00000000 		.word	.LANCHOR0
 308 00fc ABAAAA2A 		.word	715827883
 309              		.cfi_endproc
 310              	.LFE11:
 312              		.section	.rodata
 313              		.align	2
 314              		.set	.LANCHOR0,. + 0
 315              	.LC0:
 316 0000 3F2DAD   		.ascii	"?-\255"
 317 0003 000926   		.ascii	"\000\011&"
 318 0006 000D37   		.ascii	"\000\0157"
 319 0009 130D37   		.ascii	"\023\0157"
 320              		.text
 321              	.Letext0:
 322              		.file 2 "./Middlewares/ST/threadx/ports/cortex_m4/gnu/inc/tx_port.h"
 323              		.file 3 "./Middlewares/ST/threadx/common/inc/tx_api.h"
 324              		.file 4 "./Middlewares/ST/usbx/common/core/inc/ux_api.h"
ARM GAS  C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s 			page 12


DEFINED SYMBOLS
                            *ABS*:00000000 ux_host_stack_bandwidth_release.c
C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s:20     .text._ux_host_stack_bandwidth_release:00000000 $t
C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s:26     .text._ux_host_stack_bandwidth_release:00000000 _ux_host_stack_bandwidth_release
C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s:307    .text._ux_host_stack_bandwidth_release:000000f8 $d
C:\Users\Dennis\AppData\Local\Temp\ccYjDcR6.s:313    .rodata:00000000 $d

NO UNDEFINED SYMBOLS
